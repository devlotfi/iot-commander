import{r as Le,s as Cl,j as Mt,t as Qr}from"./heroui-BBt1nr5R.js";import{S as Yr}from"./lucide-react-DXqvARnK.js";const Oe=u=>typeof u=="string",Gt=()=>{let u,t;const o=new Promise((a,l)=>{u=a,t=l});return o.resolve=u,o.reject=t,o},So=u=>u==null?"":""+u,jl=(u,t,o)=>{u.forEach(a=>{t[a]&&(o[a]=t[a])})},Nl=/###/g,Eo=u=>u&&u.indexOf("###")>-1?u.replace(Nl,"."):u,xo=u=>!u||Oe(u),Zt=(u,t,o)=>{const a=Oe(t)?t.split("."):t;let l=0;for(;l<a.length-1;){if(xo(u))return{};const e=Eo(a[l]);!u[e]&&o&&(u[e]=new o),Object.prototype.hasOwnProperty.call(u,e)?u=u[e]:u={},++l}return xo(u)?{}:{obj:u,k:Eo(a[l])}},Ao=(u,t,o)=>{const{obj:a,k:l}=Zt(u,t,Object);if(a!==void 0||t.length===1){a[l]=o;return}let e=t[t.length-1],r=t.slice(0,t.length-1),n=Zt(u,r,Object);for(;n.obj===void 0&&r.length;)e=`${r[r.length-1]}.${e}`,r=r.slice(0,r.length-1),n=Zt(u,r,Object),n?.obj&&typeof n.obj[`${n.k}.${e}`]<"u"&&(n.obj=void 0);n.obj[`${n.k}.${e}`]=o},Ml=(u,t,o,a)=>{const{obj:l,k:e}=Zt(u,t,Object);l[e]=l[e]||[],l[e].push(o)},Ur=(u,t)=>{const{obj:o,k:a}=Zt(u,t);if(o&&Object.prototype.hasOwnProperty.call(o,a))return o[a]},Ll=(u,t,o)=>{const a=Ur(u,o);return a!==void 0?a:Ur(t,o)},Hs=(u,t,o)=>{for(const a in t)a!=="__proto__"&&a!=="constructor"&&(a in u?Oe(u[a])||u[a]instanceof String||Oe(t[a])||t[a]instanceof String?o&&(u[a]=t[a]):Hs(u[a],t[a],o):u[a]=t[a]);return u},Lt=u=>u.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Ul={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Bl=u=>Oe(u)?u.replace(/[&<>"'\/]/g,t=>Ul[t]):u;class Fl{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const o=this.regExpMap.get(t);if(o!==void 0)return o;const a=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,a),this.regExpQueue.push(t),a}}const Dl=[" ",",","?","!",";"],Wl=new Fl(20),$l=(u,t,o)=>{t=t||"",o=o||"";const a=Dl.filter(r=>t.indexOf(r)<0&&o.indexOf(r)<0);if(a.length===0)return!0;const l=Wl.getRegExp(`(${a.map(r=>r==="?"?"\\?":r).join("|")})`);let e=!l.test(u);if(!e){const r=u.indexOf(o);r>0&&!l.test(u.substring(0,r))&&(e=!0)}return e},sn=(u,t,o=".")=>{if(!u)return;if(u[t])return Object.prototype.hasOwnProperty.call(u,t)?u[t]:void 0;const a=t.split(o);let l=u;for(let e=0;e<a.length;){if(!l||typeof l!="object")return;let r,n="";for(let i=e;i<a.length;++i)if(i!==e&&(n+=o),n+=a[i],r=l[n],r!==void 0){if(["string","number","boolean"].indexOf(typeof r)>-1&&i<a.length-1)continue;e+=i-e+1;break}l=r}return l},nr=u=>u?.replace("_","-"),ql={type:"logger",log(u){this.output("log",u)},warn(u){this.output("warn",u)},error(u){this.output("error",u)},output(u,t){console?.[u]?.apply?.(console,t)}};class Br{constructor(t,o={}){this.init(t,o)}init(t,o={}){this.prefix=o.prefix||"i18next:",this.logger=t||ql,this.options=o,this.debug=o.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,o,a,l){return l&&!this.debug?null:(Oe(t[0])&&(t[0]=`${a}${this.prefix} ${t[0]}`),this.logger[o](t))}create(t){return new Br(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Br(this.logger,t)}}var nt=new Br;class $r{constructor(){this.observers={}}on(t,o){return t.split(" ").forEach(a=>{this.observers[a]||(this.observers[a]=new Map);const l=this.observers[a].get(o)||0;this.observers[a].set(o,l+1)}),this}off(t,o){if(this.observers[t]){if(!o){delete this.observers[t];return}this.observers[t].delete(o)}}emit(t,...o){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([l,e])=>{for(let r=0;r<e;r++)l(...o)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([l,e])=>{for(let r=0;r<e;r++)l.apply(l,[t,...o])})}}class Io extends $r{constructor(t,o={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=o,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const o=this.options.ns.indexOf(t);o>-1&&this.options.ns.splice(o,1)}getResource(t,o,a,l={}){const e=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,r=l.ignoreJSONStructure!==void 0?l.ignoreJSONStructure:this.options.ignoreJSONStructure;let n;t.indexOf(".")>-1?n=t.split("."):(n=[t,o],a&&(Array.isArray(a)?n.push(...a):Oe(a)&&e?n.push(...a.split(e)):n.push(a)));const i=Ur(this.data,n);return!i&&!o&&!a&&t.indexOf(".")>-1&&(t=n[0],o=n[1],a=n.slice(2).join(".")),i||!r||!Oe(a)?i:sn(this.data?.[t]?.[o],a,e)}addResource(t,o,a,l,e={silent:!1}){const r=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator;let n=[t,o];a&&(n=n.concat(r?a.split(r):a)),t.indexOf(".")>-1&&(n=t.split("."),l=o,o=n[1]),this.addNamespaces(o),Ao(this.data,n,l),e.silent||this.emit("added",t,o,a,l)}addResources(t,o,a,l={silent:!1}){for(const e in a)(Oe(a[e])||Array.isArray(a[e]))&&this.addResource(t,o,e,a[e],{silent:!0});l.silent||this.emit("added",t,o,a)}addResourceBundle(t,o,a,l,e,r={silent:!1,skipCopy:!1}){let n=[t,o];t.indexOf(".")>-1&&(n=t.split("."),l=a,a=o,o=n[1]),this.addNamespaces(o);let i=Ur(this.data,n)||{};r.skipCopy||(a=JSON.parse(JSON.stringify(a))),l?Hs(i,a,e):i={...i,...a},Ao(this.data,n,i),r.silent||this.emit("added",t,o,a)}removeResourceBundle(t,o){this.hasResourceBundle(t,o)&&delete this.data[t][o],this.removeNamespaces(o),this.emit("removed",t,o)}hasResourceBundle(t,o){return this.getResource(t,o)!==void 0}getResourceBundle(t,o){return o||(o=this.options.defaultNS),this.getResource(t,o)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const o=this.getDataByLanguage(t);return!!(o&&Object.keys(o)||[]).find(l=>o[l]&&Object.keys(o[l]).length>0)}toJSON(){return this.data}}var Gs={processors:{},addPostProcessor(u){this.processors[u.name]=u},handle(u,t,o,a,l){return u.forEach(e=>{t=this.processors[e]?.process(t,o,a,l)??t}),t}};const Qs=Symbol("i18next/PATH_KEY");function Kl(){const u=[],t=Object.create(null);let o;return t.get=(a,l)=>(o?.revoke?.(),l===Qs?u:(u.push(l),o=Proxy.revocable(a,t),o.proxy)),Proxy.revocable(Object.create(null),t).proxy}function an(u,t){const{[Qs]:o}=u(Kl());return o.join(t?.keySeparator??".")}const Oo={},Jr=u=>!Oe(u)&&typeof u!="boolean"&&typeof u!="number";class Fr extends $r{constructor(t,o={}){super(),jl(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=o,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=nt.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,o={interpolation:{}}){const a={...o};if(t==null)return!1;const l=this.resolve(t,a);if(l?.res===void 0)return!1;const e=Jr(l.res);return!(a.returnObjects===!1&&e)}extractFromKey(t,o){let a=o.nsSeparator!==void 0?o.nsSeparator:this.options.nsSeparator;a===void 0&&(a=":");const l=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let e=o.ns||this.options.defaultNS||[];const r=a&&t.indexOf(a)>-1,n=!this.options.userDefinedKeySeparator&&!o.keySeparator&&!this.options.userDefinedNsSeparator&&!o.nsSeparator&&!$l(t,a,l);if(r&&!n){const i=t.match(this.interpolator.nestingRegexp);if(i&&i.length>0)return{key:t,namespaces:Oe(e)?[e]:e};const s=t.split(a);(a!==l||a===l&&this.options.ns.indexOf(s[0])>-1)&&(e=s.shift()),t=s.join(l)}return{key:t,namespaces:Oe(e)?[e]:e}}translate(t,o,a){let l=typeof o=="object"?{...o}:o;if(typeof l!="object"&&this.options.overloadTranslationOptionHandler&&(l=this.options.overloadTranslationOptionHandler(arguments)),typeof l=="object"&&(l={...l}),l||(l={}),t==null)return"";typeof t=="function"&&(t=an(t,{...this.options,...l})),Array.isArray(t)||(t=[String(t)]);const e=l.returnDetails!==void 0?l.returnDetails:this.options.returnDetails,r=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,{key:n,namespaces:i}=this.extractFromKey(t[t.length-1],l),s=i[i.length-1];let c=l.nsSeparator!==void 0?l.nsSeparator:this.options.nsSeparator;c===void 0&&(c=":");const h=l.lng||this.language,d=l.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(h?.toLowerCase()==="cimode")return d?e?{res:`${s}${c}${n}`,usedKey:n,exactUsedKey:n,usedLng:h,usedNS:s,usedParams:this.getUsedParamsDetails(l)}:`${s}${c}${n}`:e?{res:n,usedKey:n,exactUsedKey:n,usedLng:h,usedNS:s,usedParams:this.getUsedParamsDetails(l)}:n;const m=this.resolve(t,l);let f=m?.res;const y=m?.usedKey||n,b=m?.exactUsedKey||n,S=["[object Number]","[object Function]","[object RegExp]"],g=l.joinArrays!==void 0?l.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,x=l.count!==void 0&&!Oe(l.count),v=Fr.hasDefaultValue(l),A=x?this.pluralResolver.getSuffix(h,l.count,l):"",E=l.ordinal&&x?this.pluralResolver.getSuffix(h,l.count,{ordinal:!1}):"",O=x&&!l.ordinal&&l.count===0,R=O&&l[`defaultValue${this.options.pluralSeparator}zero`]||l[`defaultValue${A}`]||l[`defaultValue${E}`]||l.defaultValue;let P=f;w&&!f&&v&&(P=R);const M=Jr(P),k=Object.prototype.toString.apply(P);if(w&&P&&M&&S.indexOf(k)<0&&!(Oe(g)&&Array.isArray(P))){if(!l.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const B=this.options.returnedObjectHandler?this.options.returnedObjectHandler(y,P,{...l,ns:i}):`key '${n} (${this.language})' returned an object instead of string.`;return e?(m.res=B,m.usedParams=this.getUsedParamsDetails(l),m):B}if(r){const B=Array.isArray(P),U=B?[]:{},F=B?b:y;for(const oe in P)if(Object.prototype.hasOwnProperty.call(P,oe)){const H=`${F}${r}${oe}`;v&&!f?U[oe]=this.translate(H,{...l,defaultValue:Jr(R)?R[oe]:void 0,joinArrays:!1,ns:i}):U[oe]=this.translate(H,{...l,joinArrays:!1,ns:i}),U[oe]===H&&(U[oe]=P[oe])}f=U}}else if(w&&Oe(g)&&Array.isArray(f))f=f.join(g),f&&(f=this.extendTranslation(f,t,l,a));else{let B=!1,U=!1;!this.isValidLookup(f)&&v&&(B=!0,f=R),this.isValidLookup(f)||(U=!0,f=n);const oe=(l.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&U?void 0:f,H=v&&R!==f&&this.options.updateMissing;if(U||B||H){if(this.logger.log(H?"updateKey":"missingKey",h,s,n,H?R:f),r){const J=this.resolve(n,{...l,keySeparator:!1});J&&J.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let K=[];const re=this.languageUtils.getFallbackCodes(this.options.fallbackLng,l.lng||this.language);if(this.options.saveMissingTo==="fallback"&&re&&re[0])for(let J=0;J<re.length;J++)K.push(re[J]);else this.options.saveMissingTo==="all"?K=this.languageUtils.toResolveHierarchy(l.lng||this.language):K.push(l.lng||this.language);const W=(J,C,Y)=>{const ye=v&&Y!==f?Y:oe;this.options.missingKeyHandler?this.options.missingKeyHandler(J,s,C,ye,H,l):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(J,s,C,ye,H,l),this.emit("missingKey",J,s,C,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&x?K.forEach(J=>{const C=this.pluralResolver.getSuffixes(J,l);O&&l[`defaultValue${this.options.pluralSeparator}zero`]&&C.indexOf(`${this.options.pluralSeparator}zero`)<0&&C.push(`${this.options.pluralSeparator}zero`),C.forEach(Y=>{W([J],n+Y,l[`defaultValue${Y}`]||R)})}):W(K,n,R))}f=this.extendTranslation(f,t,l,m,a),U&&f===n&&this.options.appendNamespaceToMissingKey&&(f=`${s}${c}${n}`),(U||B)&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${s}${c}${n}`:n,B?f:void 0,l))}return e?(m.res=f,m.usedParams=this.getUsedParamsDetails(l),m):f}extendTranslation(t,o,a,l,e){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...a},a.lng||this.language||l.usedLng,l.usedNS,l.usedKey,{resolved:l});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init({...a,interpolation:{...this.options.interpolation,...a.interpolation}});const i=Oe(t)&&(a?.interpolation?.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let s;if(i){const h=t.match(this.interpolator.nestingRegexp);s=h&&h.length}let c=a.replace&&!Oe(a.replace)?a.replace:a;if(this.options.interpolation.defaultVariables&&(c={...this.options.interpolation.defaultVariables,...c}),t=this.interpolator.interpolate(t,c,a.lng||this.language||l.usedLng,a),i){const h=t.match(this.interpolator.nestingRegexp),d=h&&h.length;s<d&&(a.nest=!1)}!a.lng&&l&&l.res&&(a.lng=this.language||l.usedLng),a.nest!==!1&&(t=this.interpolator.nest(t,(...h)=>e?.[0]===h[0]&&!a.context?(this.logger.warn(`It seems you are nesting recursively key: ${h[0]} in key: ${o[0]}`),null):this.translate(...h,o),a)),a.interpolation&&this.interpolator.reset()}const r=a.postProcess||this.options.postProcess,n=Oe(r)?[r]:r;return t!=null&&n?.length&&a.applyPostProcessor!==!1&&(t=Gs.handle(n,t,o,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...l,usedParams:this.getUsedParamsDetails(a)},...a}:a,this)),t}resolve(t,o={}){let a,l,e,r,n;return Oe(t)&&(t=[t]),t.forEach(i=>{if(this.isValidLookup(a))return;const s=this.extractFromKey(i,o),c=s.key;l=c;let h=s.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const d=o.count!==void 0&&!Oe(o.count),m=d&&!o.ordinal&&o.count===0,f=o.context!==void 0&&(Oe(o.context)||typeof o.context=="number")&&o.context!=="",y=o.lngs?o.lngs:this.languageUtils.toResolveHierarchy(o.lng||this.language,o.fallbackLng);h.forEach(b=>{this.isValidLookup(a)||(n=b,!Oo[`${y[0]}-${b}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(n)&&(Oo[`${y[0]}-${b}`]=!0,this.logger.warn(`key "${l}" for languages "${y.join(", ")}" won't get resolved as namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(S=>{if(this.isValidLookup(a))return;r=S;const g=[c];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(g,c,S,b,o);else{let x;d&&(x=this.pluralResolver.getSuffix(S,o.count,o));const v=`${this.options.pluralSeparator}zero`,A=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(o.ordinal&&x.indexOf(A)===0&&g.push(c+x.replace(A,this.options.pluralSeparator)),g.push(c+x),m&&g.push(c+v)),f){const E=`${c}${this.options.contextSeparator||"_"}${o.context}`;g.push(E),d&&(o.ordinal&&x.indexOf(A)===0&&g.push(E+x.replace(A,this.options.pluralSeparator)),g.push(E+x),m&&g.push(E+v))}}let w;for(;w=g.pop();)this.isValidLookup(a)||(e=w,a=this.getResource(S,b,w,o))}))})}),{res:a,usedKey:l,exactUsedKey:e,usedLng:r,usedNS:n}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,o,a,l={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,o,a,l):this.resourceStore.getResource(t,o,a,l)}getUsedParamsDetails(t={}){const o=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],a=t.replace&&!Oe(t.replace);let l=a?t.replace:t;if(a&&typeof t.count<"u"&&(l.count=t.count),this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),!a){l={...l};for(const e of o)delete l[e]}return l}static hasDefaultValue(t){const o="defaultValue";for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)&&o===a.substring(0,o.length)&&t[a]!==void 0)return!0;return!1}}class ko{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=nt.create("languageUtils")}getScriptPartFromCode(t){if(t=nr(t),!t||t.indexOf("-")<0)return null;const o=t.split("-");return o.length===2||(o.pop(),o[o.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(o.join("-"))}getLanguagePartFromCode(t){if(t=nr(t),!t||t.indexOf("-")<0)return t;const o=t.split("-");return this.formatLanguageCode(o[0])}formatLanguageCode(t){if(Oe(t)&&t.indexOf("-")>-1){let o;try{o=Intl.getCanonicalLocales(t)[0]}catch{}return o&&this.options.lowerCaseLng&&(o=o.toLowerCase()),o||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let o;return t.forEach(a=>{if(o)return;const l=this.formatLanguageCode(a);(!this.options.supportedLngs||this.isSupportedCode(l))&&(o=l)}),!o&&this.options.supportedLngs&&t.forEach(a=>{if(o)return;const l=this.getScriptPartFromCode(a);if(this.isSupportedCode(l))return o=l;const e=this.getLanguagePartFromCode(a);if(this.isSupportedCode(e))return o=e;o=this.options.supportedLngs.find(r=>{if(r===e)return r;if(!(r.indexOf("-")<0&&e.indexOf("-")<0)&&(r.indexOf("-")>0&&e.indexOf("-")<0&&r.substring(0,r.indexOf("-"))===e||r.indexOf(e)===0&&e.length>1))return r})}),o||(o=this.getFallbackCodes(this.options.fallbackLng)[0]),o}getFallbackCodes(t,o){if(!t)return[];if(typeof t=="function"&&(t=t(o)),Oe(t)&&(t=[t]),Array.isArray(t))return t;if(!o)return t.default||[];let a=t[o];return a||(a=t[this.getScriptPartFromCode(o)]),a||(a=t[this.formatLanguageCode(o)]),a||(a=t[this.getLanguagePartFromCode(o)]),a||(a=t.default),a||[]}toResolveHierarchy(t,o){const a=this.getFallbackCodes((o===!1?[]:o)||this.options.fallbackLng||[],t),l=[],e=r=>{r&&(this.isSupportedCode(r)?l.push(r):this.logger.warn(`rejecting language code not found in supportedLngs: ${r}`))};return Oe(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&e(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&e(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&e(this.getLanguagePartFromCode(t))):Oe(t)&&e(this.formatLanguageCode(t)),a.forEach(r=>{l.indexOf(r)<0&&e(this.formatLanguageCode(r))}),l}}const Po={zero:0,one:1,two:2,few:3,many:4,other:5},To={select:u=>u===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Vl{constructor(t,o={}){this.languageUtils=t,this.options=o,this.logger=nt.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(t,o={}){const a=nr(t==="dev"?"en":t),l=o.ordinal?"ordinal":"cardinal",e=JSON.stringify({cleanedCode:a,type:l});if(e in this.pluralRulesCache)return this.pluralRulesCache[e];let r;try{r=new Intl.PluralRules(a,{type:l})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),To;if(!t.match(/-|_/))return To;const i=this.languageUtils.getLanguagePartFromCode(t);r=this.getRule(i,o)}return this.pluralRulesCache[e]=r,r}needsPlural(t,o={}){let a=this.getRule(t,o);return a||(a=this.getRule("dev",o)),a?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,o,a={}){return this.getSuffixes(t,a).map(l=>`${o}${l}`)}getSuffixes(t,o={}){let a=this.getRule(t,o);return a||(a=this.getRule("dev",o)),a?a.resolvedOptions().pluralCategories.sort((l,e)=>Po[l]-Po[e]).map(l=>`${this.options.prepend}${o.ordinal?`ordinal${this.options.prepend}`:""}${l}`):[]}getSuffix(t,o,a={}){const l=this.getRule(t,a);return l?`${this.options.prepend}${a.ordinal?`ordinal${this.options.prepend}`:""}${l.select(o)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",o,a))}}const Ro=(u,t,o,a=".",l=!0)=>{let e=Ll(u,t,o);return!e&&l&&Oe(o)&&(e=sn(u,o,a),e===void 0&&(e=sn(t,o,a))),e},Xr=u=>u.replace(/\$/g,"$$$$");class Co{constructor(t={}){this.logger=nt.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(o=>o),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:o,escapeValue:a,useRawValueToEscape:l,prefix:e,prefixEscaped:r,suffix:n,suffixEscaped:i,formatSeparator:s,unescapeSuffix:c,unescapePrefix:h,nestingPrefix:d,nestingPrefixEscaped:m,nestingSuffix:f,nestingSuffixEscaped:y,nestingOptionsSeparator:b,maxReplaces:S,alwaysFormat:g}=t.interpolation;this.escape=o!==void 0?o:Bl,this.escapeValue=a!==void 0?a:!0,this.useRawValueToEscape=l!==void 0?l:!1,this.prefix=e?Lt(e):r||"{{",this.suffix=n?Lt(n):i||"}}",this.formatSeparator=s||",",this.unescapePrefix=c?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?Lt(d):m||Lt("$t("),this.nestingSuffix=f?Lt(f):y||Lt(")"),this.nestingOptionsSeparator=b||",",this.maxReplaces=S||1e3,this.alwaysFormat=g!==void 0?g:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(o,a)=>o?.source===a?(o.lastIndex=0,o):new RegExp(a,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,o,a,l){let e,r,n;const i=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},s=m=>{if(m.indexOf(this.formatSeparator)<0){const S=Ro(o,i,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(S,void 0,a,{...l,...o,interpolationkey:m}):S}const f=m.split(this.formatSeparator),y=f.shift().trim(),b=f.join(this.formatSeparator).trim();return this.format(Ro(o,i,y,this.options.keySeparator,this.options.ignoreJSONStructure),b,a,{...l,...o,interpolationkey:y})};this.resetRegExp();const c=l?.missingInterpolationHandler||this.options.missingInterpolationHandler,h=l?.interpolation?.skipOnVariables!==void 0?l.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:m=>Xr(m)},{regex:this.regexp,safeValue:m=>this.escapeValue?Xr(this.escape(m)):Xr(m)}].forEach(m=>{for(n=0;e=m.regex.exec(t);){const f=e[1].trim();if(r=s(f),r===void 0)if(typeof c=="function"){const b=c(t,e,l);r=Oe(b)?b:""}else if(l&&Object.prototype.hasOwnProperty.call(l,f))r="";else if(h){r=e[0];continue}else this.logger.warn(`missed to pass in variable ${f} for interpolating ${t}`),r="";else!Oe(r)&&!this.useRawValueToEscape&&(r=So(r));const y=m.safeValue(r);if(t=t.replace(e[0],y),h?(m.regex.lastIndex+=r.length,m.regex.lastIndex-=e[0].length):m.regex.lastIndex=0,n++,n>=this.maxReplaces)break}}),t}nest(t,o,a={}){let l,e,r;const n=(i,s)=>{const c=this.nestingOptionsSeparator;if(i.indexOf(c)<0)return i;const h=i.split(new RegExp(`${c}[ ]*{`));let d=`{${h[1]}`;i=h[0],d=this.interpolate(d,r);const m=d.match(/'/g),f=d.match(/"/g);((m?.length??0)%2===0&&!f||f.length%2!==0)&&(d=d.replace(/'/g,'"'));try{r=JSON.parse(d),s&&(r={...s,...r})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${i}`,y),`${i}${c}${d}`}return r.defaultValue&&r.defaultValue.indexOf(this.prefix)>-1&&delete r.defaultValue,i};for(;l=this.nestingRegexp.exec(t);){let i=[];r={...a},r=r.replace&&!Oe(r.replace)?r.replace:r,r.applyPostProcessor=!1,delete r.defaultValue;const s=/{.*}/.test(l[1])?l[1].lastIndexOf("}")+1:l[1].indexOf(this.formatSeparator);if(s!==-1&&(i=l[1].slice(s).split(this.formatSeparator).map(c=>c.trim()).filter(Boolean),l[1]=l[1].slice(0,s)),e=o(n.call(this,l[1].trim(),r),r),e&&l[0]===t&&!Oe(e))return e;Oe(e)||(e=So(e)),e||(this.logger.warn(`missed to resolve ${l[1]} for nesting ${t}`),e=""),i.length&&(e=i.reduce((c,h)=>this.format(c,h,a.lng,{...a,interpolationkey:l[1].trim()}),e.trim())),t=t.replace(l[0],e),this.regexp.lastIndex=0}return t}}const zl=u=>{let t=u.toLowerCase().trim();const o={};if(u.indexOf("(")>-1){const a=u.split("(");t=a[0].toLowerCase().trim();const l=a[1].substring(0,a[1].length-1);t==="currency"&&l.indexOf(":")<0?o.currency||(o.currency=l.trim()):t==="relativetime"&&l.indexOf(":")<0?o.range||(o.range=l.trim()):l.split(";").forEach(r=>{if(r){const[n,...i]=r.split(":"),s=i.join(":").trim().replace(/^'+|'+$/g,""),c=n.trim();o[c]||(o[c]=s),s==="false"&&(o[c]=!1),s==="true"&&(o[c]=!0),isNaN(s)||(o[c]=parseInt(s,10))}})}return{formatName:t,formatOptions:o}},jo=u=>{const t={};return(o,a,l)=>{let e=l;l&&l.interpolationkey&&l.formatParams&&l.formatParams[l.interpolationkey]&&l[l.interpolationkey]&&(e={...e,[l.interpolationkey]:void 0});const r=a+JSON.stringify(e);let n=t[r];return n||(n=u(nr(a),l),t[r]=n),n(o)}},Hl=u=>(t,o,a)=>u(nr(o),a)(t);class Gl{constructor(t={}){this.logger=nt.create("formatter"),this.options=t,this.init(t)}init(t,o={interpolation:{}}){this.formatSeparator=o.interpolation.formatSeparator||",";const a=o.cacheInBuiltFormats?jo:Hl;this.formats={number:a((l,e)=>{const r=new Intl.NumberFormat(l,{...e});return n=>r.format(n)}),currency:a((l,e)=>{const r=new Intl.NumberFormat(l,{...e,style:"currency"});return n=>r.format(n)}),datetime:a((l,e)=>{const r=new Intl.DateTimeFormat(l,{...e});return n=>r.format(n)}),relativetime:a((l,e)=>{const r=new Intl.RelativeTimeFormat(l,{...e});return n=>r.format(n,e.range||"day")}),list:a((l,e)=>{const r=new Intl.ListFormat(l,{...e});return n=>r.format(n)})}}add(t,o){this.formats[t.toLowerCase().trim()]=o}addCached(t,o){this.formats[t.toLowerCase().trim()]=jo(o)}format(t,o,a,l={}){const e=o.split(this.formatSeparator);if(e.length>1&&e[0].indexOf("(")>1&&e[0].indexOf(")")<0&&e.find(n=>n.indexOf(")")>-1)){const n=e.findIndex(i=>i.indexOf(")")>-1);e[0]=[e[0],...e.splice(1,n)].join(this.formatSeparator)}return e.reduce((n,i)=>{const{formatName:s,formatOptions:c}=zl(i);if(this.formats[s]){let h=n;try{const d=l?.formatParams?.[l.interpolationkey]||{},m=d.locale||d.lng||l.locale||l.lng||a;h=this.formats[s](n,m,{...c,...l,...d})}catch(d){this.logger.warn(d)}return h}else this.logger.warn(`there was no format function for ${s}`);return n},t)}}const Ql=(u,t)=>{u.pending[t]!==void 0&&(delete u.pending[t],u.pendingCount--)};class Yl extends $r{constructor(t,o,a,l={}){super(),this.backend=t,this.store=o,this.services=a,this.languageUtils=a.languageUtils,this.options=l,this.logger=nt.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=l.maxParallelReads||10,this.readingCalls=0,this.maxRetries=l.maxRetries>=0?l.maxRetries:5,this.retryTimeout=l.retryTimeout>=1?l.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(a,l.backend,l)}queueLoad(t,o,a,l){const e={},r={},n={},i={};return t.forEach(s=>{let c=!0;o.forEach(h=>{const d=`${s}|${h}`;!a.reload&&this.store.hasResourceBundle(s,h)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?r[d]===void 0&&(r[d]=!0):(this.state[d]=1,c=!1,r[d]===void 0&&(r[d]=!0),e[d]===void 0&&(e[d]=!0),i[h]===void 0&&(i[h]=!0)))}),c||(n[s]=!0)}),(Object.keys(e).length||Object.keys(r).length)&&this.queue.push({pending:r,pendingCount:Object.keys(r).length,loaded:{},errors:[],callback:l}),{toLoad:Object.keys(e),pending:Object.keys(r),toLoadLanguages:Object.keys(n),toLoadNamespaces:Object.keys(i)}}loaded(t,o,a){const l=t.split("|"),e=l[0],r=l[1];o&&this.emit("failedLoading",e,r,o),!o&&a&&this.store.addResourceBundle(e,r,a,void 0,void 0,{skipCopy:!0}),this.state[t]=o?-1:2,o&&a&&(this.state[t]=0);const n={};this.queue.forEach(i=>{Ml(i.loaded,[e],r),Ql(i,t),o&&i.errors.push(o),i.pendingCount===0&&!i.done&&(Object.keys(i.loaded).forEach(s=>{n[s]||(n[s]={});const c=i.loaded[s];c.length&&c.forEach(h=>{n[s][h]===void 0&&(n[s][h]=!0)})}),i.done=!0,i.errors.length?i.callback(i.errors):i.callback())}),this.emit("loaded",n),this.queue=this.queue.filter(i=>!i.done)}read(t,o,a,l=0,e=this.retryTimeout,r){if(!t.length)return r(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:o,fcName:a,tried:l,wait:e,callback:r});return}this.readingCalls++;const n=(s,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(s&&c&&l<this.maxRetries){setTimeout(()=>{this.read.call(this,t,o,a,l+1,e*2,r)},e);return}r(s,c)},i=this.backend[a].bind(this.backend);if(i.length===2){try{const s=i(t,o);s&&typeof s.then=="function"?s.then(c=>n(null,c)).catch(n):n(null,s)}catch(s){n(s)}return}return i(t,o,n)}prepareLoading(t,o,a={},l){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),l&&l();Oe(t)&&(t=this.languageUtils.toResolveHierarchy(t)),Oe(o)&&(o=[o]);const e=this.queueLoad(t,o,a,l);if(!e.toLoad.length)return e.pending.length||l(),null;e.toLoad.forEach(r=>{this.loadOne(r)})}load(t,o,a){this.prepareLoading(t,o,{},a)}reload(t,o,a){this.prepareLoading(t,o,{reload:!0},a)}loadOne(t,o=""){const a=t.split("|"),l=a[0],e=a[1];this.read(l,e,"read",void 0,void 0,(r,n)=>{r&&this.logger.warn(`${o}loading namespace ${e} for language ${l} failed`,r),!r&&n&&this.logger.log(`${o}loaded namespace ${e} for language ${l}`,n),this.loaded(t,r,n)})}saveMissing(t,o,a,l,e,r={},n=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(o)){this.logger.warn(`did not save key "${a}" as the namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(a==null||a==="")){if(this.backend?.create){const i={...r,isUpdate:e},s=this.backend.create.bind(this.backend);if(s.length<6)try{let c;s.length===5?c=s(t,o,a,l,i):c=s(t,o,a,l),c&&typeof c.then=="function"?c.then(h=>n(null,h)).catch(n):n(null,c)}catch(c){n(c)}else s(t,o,a,l,n,i)}!t||!t[0]||this.store.addResource(t[0],o,a,l)}}}const Zr=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:u=>{let t={};if(typeof u[1]=="object"&&(t=u[1]),Oe(u[1])&&(t.defaultValue=u[1]),Oe(u[2])&&(t.tDescription=u[2]),typeof u[2]=="object"||typeof u[3]=="object"){const o=u[3]||u[2];Object.keys(o).forEach(a=>{t[a]=o[a]})}return t},interpolation:{escapeValue:!0,format:u=>u,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),No=u=>(Oe(u.ns)&&(u.ns=[u.ns]),Oe(u.fallbackLng)&&(u.fallbackLng=[u.fallbackLng]),Oe(u.fallbackNS)&&(u.fallbackNS=[u.fallbackNS]),u.supportedLngs?.indexOf?.("cimode")<0&&(u.supportedLngs=u.supportedLngs.concat(["cimode"])),typeof u.initImmediate=="boolean"&&(u.initAsync=u.initImmediate),u),ur=()=>{},Jl=u=>{Object.getOwnPropertyNames(Object.getPrototypeOf(u)).forEach(o=>{typeof u[o]=="function"&&(u[o]=u[o].bind(u))})},Xl=u=>!!(u?.modules?.backend?.name?.indexOf("Locize")>0||u?.modules?.backend?.constructor?.name?.indexOf("Locize")>0||u?.options?.backend?.backends&&u.options.backend.backends.some(t=>t?.name?.indexOf("Locize")>0||t?.constructor?.name?.indexOf("Locize")>0));class er extends $r{constructor(t={},o){if(super(),this.options=No(t),this.services={},this.logger=nt,this.modules={external:[]},Jl(this),o&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,o),this;setTimeout(()=>{this.init(t,o)},0)}}init(t={},o){this.isInitializing=!0,typeof t=="function"&&(o=t,t={}),t.defaultNS==null&&t.ns&&(Oe(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const a=Zr();this.options={...a,...this.options,...No(t)},this.options.interpolation={...a.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=a.overloadTranslationOptionHandler),this.options.showSupportNotice!==!1&&!Xl(this)&&typeof console<"u"&&typeof console.info<"u"&&console.info("ðŸŒ i18next is maintained with support from locize.com â€” consider powering your project with managed localization (AI, CDN, integrations): https://locize.com ðŸ’™");const l=s=>s?typeof s=="function"?new s:s:null;if(!this.options.isClone){this.modules.logger?nt.init(l(this.modules.logger),this.options):nt.init(null,this.options);let s;this.modules.formatter?s=this.modules.formatter:s=Gl;const c=new ko(this.options);this.store=new Io(this.options.resources,this.options);const h=this.services;h.logger=nt,h.resourceStore=this.store,h.languageUtils=c,h.pluralResolver=new Vl(c,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==a.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),s&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(h.formatter=l(s),h.formatter.init&&h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new Co(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new Yl(l(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",(m,...f)=>{this.emit(m,...f)}),this.modules.languageDetector&&(h.languageDetector=l(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=l(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new Fr(this.services,this.options),this.translator.on("*",(m,...f)=>{this.emit(m,...f)}),this.modules.external.forEach(m=>{m.init&&m.init(this)})}if(this.format=this.options.interpolation.format,o||(o=ur),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const s=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);s.length>0&&s[0]!=="dev"&&(this.options.lng=s[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(s=>{this[s]=(...c)=>this.store[s](...c)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(s=>{this[s]=(...c)=>(this.store[s](...c),this)});const n=Gt(),i=()=>{const s=(c,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),n.resolve(h),o(c,h)};if(this.languages&&!this.isInitialized)return s(null,this.t.bind(this));this.changeLanguage(this.options.lng,s)};return this.options.resources||!this.options.initAsync?i():setTimeout(i,0),n}loadResources(t,o=ur){let a=o;const l=Oe(t)?t:this.language;if(typeof t=="function"&&(a=t),!this.options.resources||this.options.partialBundledLanguages){if(l?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return a();const e=[],r=n=>{if(!n||n==="cimode")return;this.services.languageUtils.toResolveHierarchy(n).forEach(s=>{s!=="cimode"&&e.indexOf(s)<0&&e.push(s)})};l?r(l):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(i=>r(i)),this.options.preload?.forEach?.(n=>r(n)),this.services.backendConnector.load(e,this.options.ns,n=>{!n&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),a(n)})}else a(null)}reloadResources(t,o,a){const l=Gt();return typeof t=="function"&&(a=t,t=void 0),typeof o=="function"&&(a=o,o=void 0),t||(t=this.languages),o||(o=this.options.ns),a||(a=ur),this.services.backendConnector.reload(t,o,e=>{l.resolve(),a(e)}),l}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&Gs.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let o=0;o<this.languages.length;o++){const a=this.languages[o];if(!(["cimode","dev"].indexOf(a)>-1)&&this.store.hasLanguageSomeTranslations(a)){this.resolvedLanguage=a;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,o){this.isLanguageChangingTo=t;const a=Gt();this.emit("languageChanging",t);const l=n=>{this.language=n,this.languages=this.services.languageUtils.toResolveHierarchy(n),this.resolvedLanguage=void 0,this.setResolvedLanguage(n)},e=(n,i)=>{i?this.isLanguageChangingTo===t&&(l(i),this.translator.changeLanguage(i),this.isLanguageChangingTo=void 0,this.emit("languageChanged",i),this.logger.log("languageChanged",i)):this.isLanguageChangingTo=void 0,a.resolve((...s)=>this.t(...s)),o&&o(n,(...s)=>this.t(...s))},r=n=>{!t&&!n&&this.services.languageDetector&&(n=[]);const i=Oe(n)?n:n&&n[0],s=this.store.hasLanguageSomeTranslations(i)?i:this.services.languageUtils.getBestMatchFromCodes(Oe(n)?[n]:n);s&&(this.language||l(s),this.translator.language||this.translator.changeLanguage(s),this.services.languageDetector?.cacheUserLanguage?.(s)),this.loadResources(s,c=>{e(c,s)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?r(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(r):this.services.languageDetector.detect(r):r(t),a}getFixedT(t,o,a){const l=(e,r,...n)=>{let i;typeof r!="object"?i=this.options.overloadTranslationOptionHandler([e,r].concat(n)):i={...r},i.lng=i.lng||l.lng,i.lngs=i.lngs||l.lngs,i.ns=i.ns||l.ns,i.keyPrefix!==""&&(i.keyPrefix=i.keyPrefix||a||l.keyPrefix);const s=this.options.keySeparator||".";let c;return i.keyPrefix&&Array.isArray(e)?c=e.map(h=>(typeof h=="function"&&(h=an(h,{...this.options,...r})),`${i.keyPrefix}${s}${h}`)):(typeof e=="function"&&(e=an(e,{...this.options,...r})),c=i.keyPrefix?`${i.keyPrefix}${s}${e}`:e),this.t(c,i)};return Oe(t)?l.lng=t:l.lngs=t,l.ns=o,l.keyPrefix=a,l}t(...t){return this.translator?.translate(...t)}exists(...t){return this.translator?.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,o={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const a=o.lng||this.resolvedLanguage||this.languages[0],l=this.options?this.options.fallbackLng:!1,e=this.languages[this.languages.length-1];if(a.toLowerCase()==="cimode")return!0;const r=(n,i)=>{const s=this.services.backendConnector.state[`${n}|${i}`];return s===-1||s===0||s===2};if(o.precheck){const n=o.precheck(this,r);if(n!==void 0)return n}return!!(this.hasResourceBundle(a,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||r(a,t)&&(!l||r(e,t)))}loadNamespaces(t,o){const a=Gt();return this.options.ns?(Oe(t)&&(t=[t]),t.forEach(l=>{this.options.ns.indexOf(l)<0&&this.options.ns.push(l)}),this.loadResources(l=>{a.resolve(),o&&o(l)}),a):(o&&o(),Promise.resolve())}loadLanguages(t,o){const a=Gt();Oe(t)&&(t=[t]);const l=this.options.preload||[],e=t.filter(r=>l.indexOf(r)<0&&this.services.languageUtils.isSupportedCode(r));return e.length?(this.options.preload=l.concat(e),this.loadResources(r=>{a.resolve(),o&&o(r)}),a):(o&&o(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";try{const l=new Intl.Locale(t);if(l&&l.getTextInfo){const e=l.getTextInfo();if(e&&e.direction)return e.direction}}catch{}const o=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],a=this.services?.languageUtils||new ko(Zr());return t.toLowerCase().indexOf("-latn")>1?"ltr":o.indexOf(a.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},o){const a=new er(t,o);return a.createInstance=er.createInstance,a}cloneInstance(t={},o=ur){const a=t.forkResourceStore;a&&delete t.forkResourceStore;const l={...this.options,...t,isClone:!0},e=new er(l);if((t.debug!==void 0||t.prefix!==void 0)&&(e.logger=e.logger.clone(t)),["store","services","language"].forEach(n=>{e[n]=this[n]}),e.services={...this.services},e.services.utils={hasLoadedNamespace:e.hasLoadedNamespace.bind(e)},a){const n=Object.keys(this.store.data).reduce((i,s)=>(i[s]={...this.store.data[s]},i[s]=Object.keys(i[s]).reduce((c,h)=>(c[h]={...i[s][h]},c),i[s]),i),{});e.store=new Io(n,l),e.services.resourceStore=e.store}if(t.interpolation){const i={...Zr().interpolation,...this.options.interpolation,...t.interpolation},s={...l,interpolation:i};e.services.interpolator=new Co(s)}return e.translator=new Fr(e.services,l),e.translator.on("*",(n,...i)=>{e.emit(n,...i)}),e.init(l,o),e.translator.options=l,e.translator.backendConnector.services.utils={hasLoadedNamespace:e.hasLoadedNamespace.bind(e)},e}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const He=er.createInstance();He.createInstance;He.dir;He.init;He.loadResources;He.reloadResources;He.use;He.changeLanguage;He.getFixedT;He.t;He.exists;He.setDefaultNamespace;He.hasLoadedNamespace;He.loadNamespaces;He.loadLanguages;const Zl=(u,t,o,a)=>{const l=[o,{code:t,...a||{}}];if(u?.services?.logger?.forward)return u.services.logger.forward(l,"warn","react-i18next::",!0);Pt(l[0])&&(l[0]=`react-i18next:: ${l[0]}`),u?.services?.logger?.warn?u.services.logger.warn(...l):console?.warn&&console.warn(...l)},Mo={},Ys=(u,t,o,a)=>{Pt(o)&&Mo[o]||(Pt(o)&&(Mo[o]=new Date),Zl(u,t,o,a))},Js=(u,t)=>()=>{if(u.isInitialized)t();else{const o=()=>{setTimeout(()=>{u.off("initialized",o)},0),t()};u.on("initialized",o)}},ln=(u,t,o)=>{u.loadNamespaces(t,Js(u,o))},Lo=(u,t,o,a)=>{if(Pt(o)&&(o=[o]),u.options.preload&&u.options.preload.indexOf(t)>-1)return ln(u,o,a);o.forEach(l=>{u.options.ns.indexOf(l)<0&&u.options.ns.push(l)}),u.loadLanguages(t,Js(u,a))},eu=(u,t,o={})=>!t.languages||!t.languages.length?(Ys(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(u,{lng:o.lng,precheck:(a,l)=>{if(o.bindI18n&&o.bindI18n.indexOf("languageChanging")>-1&&a.services.backendConnector.backend&&a.isLanguageChangingTo&&!l(a.isLanguageChangingTo,u))return!1}}),Pt=u=>typeof u=="string",tu=u=>typeof u=="object"&&u!==null,ru=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,nu={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"Â©","&#169;":"Â©","&reg;":"Â®","&#174;":"Â®","&hellip;":"â€¦","&#8230;":"â€¦","&#x2F;":"/","&#47;":"/"},iu=u=>nu[u],ou=u=>u.replace(ru,iu);let un={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:ou,transDefaultProps:void 0};const su=(u={})=>{un={...un,...u}},au=()=>un;let Xs;const lu=u=>{Xs=u},uu=()=>Xs,Lf={type:"3rdParty",init(u){su(u.options.react),lu(u)}},cu=Le.createContext();class fu{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(o=>{this.usedNamespaces[o]||(this.usedNamespaces[o]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const hu=(u,t)=>Pt(t)?t:tu(t)&&Pt(t.defaultValue)?t.defaultValue:Array.isArray(u)?u[u.length-1]:u,pu={t:hu,ready:!1},du=()=>()=>{},gu=(u,t={})=>{const{i18n:o}=t,{i18n:a,defaultNS:l}=Le.useContext(cu)||{},e=o||a||uu();e&&!e.reportNamespaces&&(e.reportNamespaces=new fu),e||Ys(e,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const r=Le.useMemo(()=>({...au(),...e?.options?.react,...t}),[e,t]),{useSuspense:n,keyPrefix:i}=r,s=l||e?.options?.defaultNS,c=Pt(s)?[s]:s||["translation"],h=Le.useMemo(()=>c,c);e?.reportNamespaces?.addUsedNamespaces?.(h);const d=Le.useRef(0),m=Le.useCallback(R=>{if(!e)return du;const{bindI18n:P,bindI18nStore:M}=r,k=()=>{d.current+=1,R()};return P&&e.on(P,k),M&&e.store.on(M,k),()=>{P&&P.split(" ").forEach(B=>e.off(B,k)),M&&M.split(" ").forEach(B=>e.store.off(B,k))}},[e,r]),f=Le.useRef(),y=Le.useCallback(()=>{if(!e)return pu;const R=!!(e.isInitialized||e.initializedStoreOnce)&&h.every(F=>eu(F,e,r)),P=t.lng||e.language,M=d.current,k=f.current;if(k&&k.ready===R&&k.lng===P&&k.keyPrefix===i&&k.revision===M)return k;const U={t:e.getFixedT(P,r.nsMode==="fallback"?h:h[0],i),ready:R,lng:P,keyPrefix:i,revision:M};return f.current=U,U},[e,h,i,r,t.lng]),[b,S]=Le.useState(0),{t:g,ready:w}=Cl.useSyncExternalStore(m,y,y);Le.useEffect(()=>{if(e&&!w&&!n){const R=()=>S(P=>P+1);t.lng?Lo(e,t.lng,h,R):ln(e,h,R)}},[e,t.lng,h,w,n,b]);const x=e||{},v=Le.useRef(null),A=Le.useRef(),E=R=>{const P=Object.getOwnPropertyDescriptors(R);P.__original&&delete P.__original;const M=Object.create(Object.getPrototypeOf(R),P);if(!Object.prototype.hasOwnProperty.call(M,"__original"))try{Object.defineProperty(M,"__original",{value:R,writable:!1,enumerable:!1,configurable:!1})}catch{}return M},O=Le.useMemo(()=>{const R=x,P=R?.language;let M=R;R&&(v.current&&v.current.__original===R?A.current!==P?(M=E(R),v.current=M,A.current=P):M=v.current:(M=E(R),v.current=M,A.current=P));const k=[g,M,w];return k.t=g,k.i18n=M,k.ready=w,k},[g,x,w,x.resolvedLanguage,x.language,x.languages]);if(e&&n&&!w)throw new Promise(R=>{const P=()=>R();t.lng?Lo(e,t.lng,h,P):ln(e,h,P)});return O};var ao=Object.defineProperty,yu=Object.getOwnPropertyDescriptor,mu=Object.getOwnPropertyNames,bu=Object.prototype.hasOwnProperty,Ge=(u,t)=>()=>(u&&(t=u(u=0)),t),de=(u,t)=>()=>(t||u((t={exports:{}}).exports,t),t.exports),Dt=(u,t)=>{for(var o in t)ao(u,o,{get:t[o],enumerable:!0})},vu=(u,t,o,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of mu(t))!bu.call(u,l)&&l!==o&&ao(u,l,{get:()=>t[l],enumerable:!(a=yu(t,l))||a.enumerable});return u},Re=u=>vu(ao({},"__esModule",{value:!0}),u),le=Ge(()=>{}),Ce={};Dt(Ce,{_debugEnd:()=>qn,_debugProcess:()=>$n,_events:()=>ii,_eventsCount:()=>oi,_exiting:()=>kn,_fatalExceptions:()=>Fn,_getActiveHandles:()=>oa,_getActiveRequests:()=>ia,_kill:()=>Rn,_linkedBinding:()=>ra,_maxListeners:()=>ni,_preload_modules:()=>ti,_rawDebug:()=>An,_startProfilerIdleNotifier:()=>Kn,_stopProfilerIdleNotifier:()=>Vn,_tickCallback:()=>Wn,abort:()=>Qn,addListener:()=>si,allowedNodeEnvironmentFlags:()=>Un,arch:()=>fn,argv:()=>dn,argv0:()=>ei,assert:()=>sa,binding:()=>vn,browser:()=>xn,chdir:()=>Sn,config:()=>Pn,cpuUsage:()=>Qt,cwd:()=>_n,debugPort:()=>Zn,default:()=>uo,dlopen:()=>na,domain:()=>On,emit:()=>fi,emitWarning:()=>bn,env:()=>pn,execArgv:()=>gn,execPath:()=>Xn,exit:()=>Mn,features:()=>Bn,hasUncaughtExceptionCaptureCallback:()=>aa,hrtime:()=>hr,kill:()=>Nn,listeners:()=>ua,memoryUsage:()=>jn,moduleLoadList:()=>In,nextTick:()=>ea,off:()=>li,on:()=>at,once:()=>ai,openStdin:()=>Ln,pid:()=>Yn,platform:()=>hn,ppid:()=>Jn,prependListener:()=>hi,prependOnceListener:()=>pi,reallyExit:()=>Tn,release:()=>En,removeAllListeners:()=>ci,removeListener:()=>ui,resourceUsage:()=>Cn,setSourceMapsEnabled:()=>ri,setUncaughtExceptionCaptureCallback:()=>Dn,stderr:()=>Hn,stdin:()=>Gn,stdout:()=>zn,title:()=>cn,umask:()=>wn,uptime:()=>la,version:()=>yn,versions:()=>mn});function lo(u){throw new Error("Node.js process "+u+" is not supported by JSPM core outside of Node.js")}function wu(){!Ot||!At||(Ot=!1,At.length?it=At.concat(it):tr=-1,it.length&&Zs())}function Zs(){if(!Ot){var u=setTimeout(wu,0);Ot=!0;for(var t=it.length;t;){for(At=it,it=[];++tr<t;)At&&At[tr].run();tr=-1,t=it.length}At=null,Ot=!1,clearTimeout(u)}}function ea(u){var t=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];it.push(new ta(u,t)),it.length===1&&!Ot&&setTimeout(Zs,0)}function ta(u,t){this.fun=u,this.array=t}function We(){}function ra(u){lo("_linkedBinding")}function na(u){lo("dlopen")}function ia(){return[]}function oa(){return[]}function sa(u,t){if(!u)throw new Error(t||"assertion error")}function aa(){return!1}function la(){return ut.now()/1e3}function hr(u){var t=Math.floor((Date.now()-ut.now())*.001),o=ut.now()*.001,a=Math.floor(o)+t,l=Math.floor(o%1*1e9);return u&&(a=a-u[0],l=l-u[1],l<0&&(a--,l+=pr)),[a,l]}function at(){return uo}function ua(u){return[]}var it,Ot,At,tr,cn,fn,hn,pn,dn,gn,yn,mn,bn,vn,wn,_n,Sn,En,xn,An,In,On,kn,Pn,Tn,Rn,Qt,Cn,jn,Nn,Mn,Ln,Un,Bn,Fn,Dn,Wn,$n,qn,Kn,Vn,zn,Hn,Gn,Qn,Yn,Jn,Xn,Zn,ei,ti,ri,ut,en,pr,ni,ii,oi,si,ai,li,ui,ci,fi,hi,pi,uo,_u=Ge(()=>{le(),ce(),ue(),it=[],Ot=!1,tr=-1,ta.prototype.run=function(){this.fun.apply(null,this.array)},cn="browser",fn="x64",hn="browser",pn={PATH:"/usr/bin",LANG:typeof navigator<"u"?navigator.language+".UTF-8":void 0,PWD:"/",HOME:"/home",TMP:"/tmp"},dn=["/usr/bin/node"],gn=[],yn="v16.8.0",mn={},bn=function(u,t){console.warn((t?t+": ":"")+u)},vn=function(u){lo("binding")},wn=function(u){return 0},_n=function(){return"/"},Sn=function(u){},En={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},xn=!0,An=We,In=[],On={},kn=!1,Pn={},Tn=We,Rn=We,Qt=function(){return{}},Cn=Qt,jn=Qt,Nn=We,Mn=We,Ln=We,Un={},Bn={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Fn=We,Dn=We,Wn=We,$n=We,qn=We,Kn=We,Vn=We,zn=void 0,Hn=void 0,Gn=void 0,Qn=We,Yn=2,Jn=1,Xn="/bin/usr/node",Zn=9229,ei="node",ti=[],ri=We,ut={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},ut.now===void 0&&(en=Date.now(),ut.timing&&ut.timing.navigationStart&&(en=ut.timing.navigationStart),ut.now=()=>Date.now()-en),pr=1e9,hr.bigint=function(u){var t=hr(u);return typeof BigInt>"u"?t[0]*pr+t[1]:BigInt(t[0]*pr)+BigInt(t[1])},ni=10,ii={},oi=0,si=at,ai=at,li=at,ui=at,ci=at,fi=We,hi=at,pi=at,uo={version:yn,versions:mn,arch:fn,platform:hn,browser:xn,release:En,_rawDebug:An,moduleLoadList:In,binding:vn,_linkedBinding:ra,_events:ii,_eventsCount:oi,_maxListeners:ni,on:at,addListener:si,once:ai,off:li,removeListener:ui,removeAllListeners:ci,emit:fi,prependListener:hi,prependOnceListener:pi,listeners:ua,domain:On,_exiting:kn,config:Pn,dlopen:na,uptime:la,_getActiveRequests:ia,_getActiveHandles:oa,reallyExit:Tn,_kill:Rn,cpuUsage:Qt,resourceUsage:Cn,memoryUsage:jn,kill:Nn,exit:Mn,openStdin:Ln,allowedNodeEnvironmentFlags:Un,assert:sa,features:Bn,_fatalExceptions:Fn,setUncaughtExceptionCaptureCallback:Dn,hasUncaughtExceptionCaptureCallback:aa,emitWarning:bn,nextTick:ea,_tickCallback:Wn,_debugProcess:$n,_debugEnd:qn,_startProfilerIdleNotifier:Kn,_stopProfilerIdleNotifier:Vn,stdout:zn,stdin:Gn,stderr:Hn,abort:Qn,umask:wn,chdir:Sn,cwd:_n,env:pn,title:cn,argv:dn,execArgv:gn,pid:Yn,ppid:Jn,execPath:Xn,debugPort:Zn,hrtime:hr,argv0:ei,_preload_modules:ti,setSourceMapsEnabled:ri}}),ue=Ge(()=>{_u()});function Su(){if(di)return Ut;di=!0,Ut.byteLength=n,Ut.toByteArray=s,Ut.fromByteArray=d;for(var u=[],t=[],o=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,e=a.length;l<e;++l)u[l]=a[l],t[a.charCodeAt(l)]=l;t[45]=62,t[95]=63;function r(m){var f=m.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=m.indexOf("=");y===-1&&(y=f);var b=y===f?0:4-y%4;return[y,b]}function n(m){var f=r(m),y=f[0],b=f[1];return(y+b)*3/4-b}function i(m,f,y){return(f+y)*3/4-y}function s(m){var f,y=r(m),b=y[0],S=y[1],g=new o(i(m,b,S)),w=0,x=S>0?b-4:b,v;for(v=0;v<x;v+=4)f=t[m.charCodeAt(v)]<<18|t[m.charCodeAt(v+1)]<<12|t[m.charCodeAt(v+2)]<<6|t[m.charCodeAt(v+3)],g[w++]=f>>16&255,g[w++]=f>>8&255,g[w++]=f&255;return S===2&&(f=t[m.charCodeAt(v)]<<2|t[m.charCodeAt(v+1)]>>4,g[w++]=f&255),S===1&&(f=t[m.charCodeAt(v)]<<10|t[m.charCodeAt(v+1)]<<4|t[m.charCodeAt(v+2)]>>2,g[w++]=f>>8&255,g[w++]=f&255),g}function c(m){return u[m>>18&63]+u[m>>12&63]+u[m>>6&63]+u[m&63]}function h(m,f,y){for(var b,S=[],g=f;g<y;g+=3)b=(m[g]<<16&16711680)+(m[g+1]<<8&65280)+(m[g+2]&255),S.push(c(b));return S.join("")}function d(m){for(var f,y=m.length,b=y%3,S=[],g=16383,w=0,x=y-b;w<x;w+=g)S.push(h(m,w,w+g>x?x:w+g));return b===1?(f=m[y-1],S.push(u[f>>2]+u[f<<4&63]+"==")):b===2&&(f=(m[y-2]<<8)+m[y-1],S.push(u[f>>10]+u[f>>4&63]+u[f<<2&63]+"=")),S.join("")}return Ut}function Eu(){return gi?Yt:(gi=!0,Yt.read=function(u,t,o,a,l){var e,r,n=l*8-a-1,i=(1<<n)-1,s=i>>1,c=-7,h=o?l-1:0,d=o?-1:1,m=u[t+h];for(h+=d,e=m&(1<<-c)-1,m>>=-c,c+=n;c>0;e=e*256+u[t+h],h+=d,c-=8);for(r=e&(1<<-c)-1,e>>=-c,c+=a;c>0;r=r*256+u[t+h],h+=d,c-=8);if(e===0)e=1-s;else{if(e===i)return r?NaN:(m?-1:1)*(1/0);r=r+Math.pow(2,a),e=e-s}return(m?-1:1)*r*Math.pow(2,e-a)},Yt.write=function(u,t,o,a,l,e){var r,n,i,s=e*8-l-1,c=(1<<s)-1,h=c>>1,d=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=a?0:e-1,f=a?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(n=isNaN(t)?1:0,r=c):(r=Math.floor(Math.log(t)/Math.LN2),t*(i=Math.pow(2,-r))<1&&(r--,i*=2),r+h>=1?t+=d/i:t+=d*Math.pow(2,1-h),t*i>=2&&(r++,i/=2),r+h>=c?(n=0,r=c):r+h>=1?(n=(t*i-1)*Math.pow(2,l),r=r+h):(n=t*Math.pow(2,h-1)*Math.pow(2,l),r=0));l>=8;u[o+m]=n&255,m+=f,n/=256,l-=8);for(r=r<<l|n,s+=l;s>0;u[o+m]=r&255,m+=f,r/=256,s-=8);u[o+m-f]|=y*128},Yt)}function xu(){if(yi)return bt;yi=!0;let u=Su(),t=Eu(),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;bt.Buffer=r,bt.SlowBuffer=S,bt.INSPECT_MAX_BYTES=50;let a=2147483647;bt.kMaxLength=a,r.TYPED_ARRAY_SUPPORT=l(),!r.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{let p=new Uint8Array(1),_={foo:function(){return 42}};return Object.setPrototypeOf(_,Uint8Array.prototype),Object.setPrototypeOf(p,_),p.foo()===42}catch{return!1}}Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}});function e(p){if(p>a)throw new RangeError('The value "'+p+'" is invalid for option "size"');let _=new Uint8Array(p);return Object.setPrototypeOf(_,r.prototype),_}function r(p,_,I){if(typeof p=="number"){if(typeof _=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c(p)}return n(p,_,I)}r.poolSize=8192;function n(p,_,I){if(typeof p=="string")return h(p,_);if(ArrayBuffer.isView(p))return m(p);if(p==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);if(q(p,ArrayBuffer)||p&&q(p.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(q(p,SharedArrayBuffer)||p&&q(p.buffer,SharedArrayBuffer)))return f(p,_,I);if(typeof p=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let D=p.valueOf&&p.valueOf();if(D!=null&&D!==p)return r.from(D,_,I);let Z=y(p);if(Z)return Z;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof p[Symbol.toPrimitive]=="function")return r.from(p[Symbol.toPrimitive]("string"),_,I);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p)}r.from=function(p,_,I){return n(p,_,I)},Object.setPrototypeOf(r.prototype,Uint8Array.prototype),Object.setPrototypeOf(r,Uint8Array);function i(p){if(typeof p!="number")throw new TypeError('"size" argument must be of type number');if(p<0)throw new RangeError('The value "'+p+'" is invalid for option "size"')}function s(p,_,I){return i(p),p<=0?e(p):_!==void 0?typeof I=="string"?e(p).fill(_,I):e(p).fill(_):e(p)}r.alloc=function(p,_,I){return s(p,_,I)};function c(p){return i(p),e(p<0?0:b(p)|0)}r.allocUnsafe=function(p){return c(p)},r.allocUnsafeSlow=function(p){return c(p)};function h(p,_){if((typeof _!="string"||_==="")&&(_="utf8"),!r.isEncoding(_))throw new TypeError("Unknown encoding: "+_);let I=g(p,_)|0,D=e(I),Z=D.write(p,_);return Z!==I&&(D=D.slice(0,Z)),D}function d(p){let _=p.length<0?0:b(p.length)|0,I=e(_);for(let D=0;D<_;D+=1)I[D]=p[D]&255;return I}function m(p){if(q(p,Uint8Array)){let _=new Uint8Array(p);return f(_.buffer,_.byteOffset,_.byteLength)}return d(p)}function f(p,_,I){if(_<0||p.byteLength<_)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<_+(I||0))throw new RangeError('"length" is outside of buffer bounds');let D;return _===void 0&&I===void 0?D=new Uint8Array(p):I===void 0?D=new Uint8Array(p,_):D=new Uint8Array(p,_,I),Object.setPrototypeOf(D,r.prototype),D}function y(p){if(r.isBuffer(p)){let _=b(p.length)|0,I=e(_);return I.length===0||p.copy(I,0,0,_),I}if(p.length!==void 0)return typeof p.length!="number"||ge(p.length)?e(0):d(p);if(p.type==="Buffer"&&Array.isArray(p.data))return d(p.data)}function b(p){if(p>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return p|0}function S(p){return+p!=p&&(p=0),r.alloc(+p)}r.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==r.prototype},r.compare=function(p,_){if(q(p,Uint8Array)&&(p=r.from(p,p.offset,p.byteLength)),q(_,Uint8Array)&&(_=r.from(_,_.offset,_.byteLength)),!r.isBuffer(p)||!r.isBuffer(_))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===_)return 0;let I=p.length,D=_.length;for(let Z=0,fe=Math.min(I,D);Z<fe;++Z)if(p[Z]!==_[Z]){I=p[Z],D=_[Z];break}return I<D?-1:D<I?1:0},r.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(p,_){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return r.alloc(0);let I;if(_===void 0)for(_=0,I=0;I<p.length;++I)_+=p[I].length;let D=r.allocUnsafe(_),Z=0;for(I=0;I<p.length;++I){let fe=p[I];if(q(fe,Uint8Array))Z+fe.length>D.length?(r.isBuffer(fe)||(fe=r.from(fe)),fe.copy(D,Z)):Uint8Array.prototype.set.call(D,fe,Z);else if(r.isBuffer(fe))fe.copy(D,Z);else throw new TypeError('"list" argument must be an Array of Buffers');Z+=fe.length}return D};function g(p,_){if(r.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||q(p,ArrayBuffer))return p.byteLength;if(typeof p!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof p);let I=p.length,D=arguments.length>2&&arguments[2]===!0;if(!D&&I===0)return 0;let Z=!1;for(;;)switch(_){case"ascii":case"latin1":case"binary":return I;case"utf8":case"utf-8":return $(p).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I*2;case"hex":return I>>>1;case"base64":return pe(p).length;default:if(Z)return D?-1:$(p).length;_=(""+_).toLowerCase(),Z=!0}}r.byteLength=g;function w(p,_,I){let D=!1;if((_===void 0||_<0)&&(_=0),_>this.length||((I===void 0||I>this.length)&&(I=this.length),I<=0)||(I>>>=0,_>>>=0,I<=_))return"";for(p||(p="utf8");;)switch(p){case"hex":return K(this,_,I);case"utf8":case"utf-8":return B(this,_,I);case"ascii":return oe(this,_,I);case"latin1":case"binary":return H(this,_,I);case"base64":return k(this,_,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,_,I);default:if(D)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase(),D=!0}}r.prototype._isBuffer=!0;function x(p,_,I){let D=p[_];p[_]=p[I],p[I]=D}r.prototype.swap16=function(){let p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let _=0;_<p;_+=2)x(this,_,_+1);return this},r.prototype.swap32=function(){let p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let _=0;_<p;_+=4)x(this,_,_+3),x(this,_+1,_+2);return this},r.prototype.swap64=function(){let p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let _=0;_<p;_+=8)x(this,_,_+7),x(this,_+1,_+6),x(this,_+2,_+5),x(this,_+3,_+4);return this},r.prototype.toString=function(){let p=this.length;return p===0?"":arguments.length===0?B(this,0,p):w.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(p){if(!r.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:r.compare(this,p)===0},r.prototype.inspect=function(){let p="",_=bt.INSPECT_MAX_BYTES;return p=this.toString("hex",0,_).replace(/(.{2})/g,"$1 ").trim(),this.length>_&&(p+=" ... "),"<Buffer "+p+">"},o&&(r.prototype[o]=r.prototype.inspect),r.prototype.compare=function(p,_,I,D,Z){if(q(p,Uint8Array)&&(p=r.from(p,p.offset,p.byteLength)),!r.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(_===void 0&&(_=0),I===void 0&&(I=p?p.length:0),D===void 0&&(D=0),Z===void 0&&(Z=this.length),_<0||I>p.length||D<0||Z>this.length)throw new RangeError("out of range index");if(D>=Z&&_>=I)return 0;if(D>=Z)return-1;if(_>=I)return 1;if(_>>>=0,I>>>=0,D>>>=0,Z>>>=0,this===p)return 0;let fe=Z-D,Se=I-_,z=Math.min(fe,Se),ie=this.slice(D,Z),Ae=p.slice(_,I);for(let Ie=0;Ie<z;++Ie)if(ie[Ie]!==Ae[Ie]){fe=ie[Ie],Se=Ae[Ie];break}return fe<Se?-1:Se<fe?1:0};function v(p,_,I,D,Z){if(p.length===0)return-1;if(typeof I=="string"?(D=I,I=0):I>2147483647?I=2147483647:I<-2147483648&&(I=-2147483648),I=+I,ge(I)&&(I=Z?0:p.length-1),I<0&&(I=p.length+I),I>=p.length){if(Z)return-1;I=p.length-1}else if(I<0)if(Z)I=0;else return-1;if(typeof _=="string"&&(_=r.from(_,D)),r.isBuffer(_))return _.length===0?-1:A(p,_,I,D,Z);if(typeof _=="number")return _=_&255,typeof Uint8Array.prototype.indexOf=="function"?Z?Uint8Array.prototype.indexOf.call(p,_,I):Uint8Array.prototype.lastIndexOf.call(p,_,I):A(p,[_],I,D,Z);throw new TypeError("val must be string, number or Buffer")}function A(p,_,I,D,Z){let fe=1,Se=p.length,z=_.length;if(D!==void 0&&(D=String(D).toLowerCase(),D==="ucs2"||D==="ucs-2"||D==="utf16le"||D==="utf-16le")){if(p.length<2||_.length<2)return-1;fe=2,Se/=2,z/=2,I/=2}function ie(Ie,ke){return fe===1?Ie[ke]:Ie.readUInt16BE(ke*fe)}let Ae;if(Z){let Ie=-1;for(Ae=I;Ae<Se;Ae++)if(ie(p,Ae)===ie(_,Ie===-1?0:Ae-Ie)){if(Ie===-1&&(Ie=Ae),Ae-Ie+1===z)return Ie*fe}else Ie!==-1&&(Ae-=Ae-Ie),Ie=-1}else for(I+z>Se&&(I=Se-z),Ae=I;Ae>=0;Ae--){let Ie=!0;for(let ke=0;ke<z;ke++)if(ie(p,Ae+ke)!==ie(_,ke)){Ie=!1;break}if(Ie)return Ae}return-1}r.prototype.includes=function(p,_,I){return this.indexOf(p,_,I)!==-1},r.prototype.indexOf=function(p,_,I){return v(this,p,_,I,!0)},r.prototype.lastIndexOf=function(p,_,I){return v(this,p,_,I,!1)};function E(p,_,I,D){I=Number(I)||0;let Z=p.length-I;D?(D=Number(D),D>Z&&(D=Z)):D=Z;let fe=_.length;D>fe/2&&(D=fe/2);let Se;for(Se=0;Se<D;++Se){let z=parseInt(_.substr(Se*2,2),16);if(ge(z))return Se;p[I+Se]=z}return Se}function O(p,_,I,D){return be($(_,p.length-I),p,I,D)}function R(p,_,I,D){return be(ee(_),p,I,D)}function P(p,_,I,D){return be(pe(_),p,I,D)}function M(p,_,I,D){return be(he(_,p.length-I),p,I,D)}r.prototype.write=function(p,_,I,D){if(_===void 0)D="utf8",I=this.length,_=0;else if(I===void 0&&typeof _=="string")D=_,I=this.length,_=0;else if(isFinite(_))_=_>>>0,isFinite(I)?(I=I>>>0,D===void 0&&(D="utf8")):(D=I,I=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let Z=this.length-_;if((I===void 0||I>Z)&&(I=Z),p.length>0&&(I<0||_<0)||_>this.length)throw new RangeError("Attempt to write outside buffer bounds");D||(D="utf8");let fe=!1;for(;;)switch(D){case"hex":return E(this,p,_,I);case"utf8":case"utf-8":return O(this,p,_,I);case"ascii":case"latin1":case"binary":return R(this,p,_,I);case"base64":return P(this,p,_,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,p,_,I);default:if(fe)throw new TypeError("Unknown encoding: "+D);D=(""+D).toLowerCase(),fe=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function k(p,_,I){return _===0&&I===p.length?u.fromByteArray(p):u.fromByteArray(p.slice(_,I))}function B(p,_,I){I=Math.min(p.length,I);let D=[],Z=_;for(;Z<I;){let fe=p[Z],Se=null,z=fe>239?4:fe>223?3:fe>191?2:1;if(Z+z<=I){let ie,Ae,Ie,ke;switch(z){case 1:fe<128&&(Se=fe);break;case 2:ie=p[Z+1],(ie&192)===128&&(ke=(fe&31)<<6|ie&63,ke>127&&(Se=ke));break;case 3:ie=p[Z+1],Ae=p[Z+2],(ie&192)===128&&(Ae&192)===128&&(ke=(fe&15)<<12|(ie&63)<<6|Ae&63,ke>2047&&(ke<55296||ke>57343)&&(Se=ke));break;case 4:ie=p[Z+1],Ae=p[Z+2],Ie=p[Z+3],(ie&192)===128&&(Ae&192)===128&&(Ie&192)===128&&(ke=(fe&15)<<18|(ie&63)<<12|(Ae&63)<<6|Ie&63,ke>65535&&ke<1114112&&(Se=ke))}}Se===null?(Se=65533,z=1):Se>65535&&(Se-=65536,D.push(Se>>>10&1023|55296),Se=56320|Se&1023),D.push(Se),Z+=z}return F(D)}let U=4096;function F(p){let _=p.length;if(_<=U)return String.fromCharCode.apply(String,p);let I="",D=0;for(;D<_;)I+=String.fromCharCode.apply(String,p.slice(D,D+=U));return I}function oe(p,_,I){let D="";I=Math.min(p.length,I);for(let Z=_;Z<I;++Z)D+=String.fromCharCode(p[Z]&127);return D}function H(p,_,I){let D="";I=Math.min(p.length,I);for(let Z=_;Z<I;++Z)D+=String.fromCharCode(p[Z]);return D}function K(p,_,I){let D=p.length;(!_||_<0)&&(_=0),(!I||I<0||I>D)&&(I=D);let Z="";for(let fe=_;fe<I;++fe)Z+=ve[p[fe]];return Z}function re(p,_,I){let D=p.slice(_,I),Z="";for(let fe=0;fe<D.length-1;fe+=2)Z+=String.fromCharCode(D[fe]+D[fe+1]*256);return Z}r.prototype.slice=function(p,_){let I=this.length;p=~~p,_=_===void 0?I:~~_,p<0?(p+=I,p<0&&(p=0)):p>I&&(p=I),_<0?(_+=I,_<0&&(_=0)):_>I&&(_=I),_<p&&(_=p);let D=this.subarray(p,_);return Object.setPrototypeOf(D,r.prototype),D};function W(p,_,I){if(p%1!==0||p<0)throw new RangeError("offset is not uint");if(p+_>I)throw new RangeError("Trying to access beyond buffer length")}r.prototype.readUintLE=r.prototype.readUIntLE=function(p,_,I){p=p>>>0,_=_>>>0,I||W(p,_,this.length);let D=this[p],Z=1,fe=0;for(;++fe<_&&(Z*=256);)D+=this[p+fe]*Z;return D},r.prototype.readUintBE=r.prototype.readUIntBE=function(p,_,I){p=p>>>0,_=_>>>0,I||W(p,_,this.length);let D=this[p+--_],Z=1;for(;_>0&&(Z*=256);)D+=this[p+--_]*Z;return D},r.prototype.readUint8=r.prototype.readUInt8=function(p,_){return p=p>>>0,_||W(p,1,this.length),this[p]},r.prototype.readUint16LE=r.prototype.readUInt16LE=function(p,_){return p=p>>>0,_||W(p,2,this.length),this[p]|this[p+1]<<8},r.prototype.readUint16BE=r.prototype.readUInt16BE=function(p,_){return p=p>>>0,_||W(p,2,this.length),this[p]<<8|this[p+1]},r.prototype.readUint32LE=r.prototype.readUInt32LE=function(p,_){return p=p>>>0,_||W(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},r.prototype.readUint32BE=r.prototype.readUInt32BE=function(p,_){return p=p>>>0,_||W(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},r.prototype.readBigUInt64LE=ae(function(p){p=p>>>0,X(p,"offset");let _=this[p],I=this[p+7];(_===void 0||I===void 0)&&me(p,this.length-8);let D=_+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24,Z=this[++p]+this[++p]*2**8+this[++p]*2**16+I*2**24;return BigInt(D)+(BigInt(Z)<<BigInt(32))}),r.prototype.readBigUInt64BE=ae(function(p){p=p>>>0,X(p,"offset");let _=this[p],I=this[p+7];(_===void 0||I===void 0)&&me(p,this.length-8);let D=_*2**24+this[++p]*2**16+this[++p]*2**8+this[++p],Z=this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+I;return(BigInt(D)<<BigInt(32))+BigInt(Z)}),r.prototype.readIntLE=function(p,_,I){p=p>>>0,_=_>>>0,I||W(p,_,this.length);let D=this[p],Z=1,fe=0;for(;++fe<_&&(Z*=256);)D+=this[p+fe]*Z;return Z*=128,D>=Z&&(D-=Math.pow(2,8*_)),D},r.prototype.readIntBE=function(p,_,I){p=p>>>0,_=_>>>0,I||W(p,_,this.length);let D=_,Z=1,fe=this[p+--D];for(;D>0&&(Z*=256);)fe+=this[p+--D]*Z;return Z*=128,fe>=Z&&(fe-=Math.pow(2,8*_)),fe},r.prototype.readInt8=function(p,_){return p=p>>>0,_||W(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},r.prototype.readInt16LE=function(p,_){p=p>>>0,_||W(p,2,this.length);let I=this[p]|this[p+1]<<8;return I&32768?I|4294901760:I},r.prototype.readInt16BE=function(p,_){p=p>>>0,_||W(p,2,this.length);let I=this[p+1]|this[p]<<8;return I&32768?I|4294901760:I},r.prototype.readInt32LE=function(p,_){return p=p>>>0,_||W(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},r.prototype.readInt32BE=function(p,_){return p=p>>>0,_||W(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},r.prototype.readBigInt64LE=ae(function(p){p=p>>>0,X(p,"offset");let _=this[p],I=this[p+7];(_===void 0||I===void 0)&&me(p,this.length-8);let D=this[p+4]+this[p+5]*2**8+this[p+6]*2**16+(I<<24);return(BigInt(D)<<BigInt(32))+BigInt(_+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24)}),r.prototype.readBigInt64BE=ae(function(p){p=p>>>0,X(p,"offset");let _=this[p],I=this[p+7];(_===void 0||I===void 0)&&me(p,this.length-8);let D=(_<<24)+this[++p]*2**16+this[++p]*2**8+this[++p];return(BigInt(D)<<BigInt(32))+BigInt(this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+I)}),r.prototype.readFloatLE=function(p,_){return p=p>>>0,_||W(p,4,this.length),t.read(this,p,!0,23,4)},r.prototype.readFloatBE=function(p,_){return p=p>>>0,_||W(p,4,this.length),t.read(this,p,!1,23,4)},r.prototype.readDoubleLE=function(p,_){return p=p>>>0,_||W(p,8,this.length),t.read(this,p,!0,52,8)},r.prototype.readDoubleBE=function(p,_){return p=p>>>0,_||W(p,8,this.length),t.read(this,p,!1,52,8)};function J(p,_,I,D,Z,fe){if(!r.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(_>Z||_<fe)throw new RangeError('"value" argument is out of bounds');if(I+D>p.length)throw new RangeError("Index out of range")}r.prototype.writeUintLE=r.prototype.writeUIntLE=function(p,_,I,D){if(p=+p,_=_>>>0,I=I>>>0,!D){let Se=Math.pow(2,8*I)-1;J(this,p,_,I,Se,0)}let Z=1,fe=0;for(this[_]=p&255;++fe<I&&(Z*=256);)this[_+fe]=p/Z&255;return _+I},r.prototype.writeUintBE=r.prototype.writeUIntBE=function(p,_,I,D){if(p=+p,_=_>>>0,I=I>>>0,!D){let Se=Math.pow(2,8*I)-1;J(this,p,_,I,Se,0)}let Z=I-1,fe=1;for(this[_+Z]=p&255;--Z>=0&&(fe*=256);)this[_+Z]=p/fe&255;return _+I},r.prototype.writeUint8=r.prototype.writeUInt8=function(p,_,I){return p=+p,_=_>>>0,I||J(this,p,_,1,255,0),this[_]=p&255,_+1},r.prototype.writeUint16LE=r.prototype.writeUInt16LE=function(p,_,I){return p=+p,_=_>>>0,I||J(this,p,_,2,65535,0),this[_]=p&255,this[_+1]=p>>>8,_+2},r.prototype.writeUint16BE=r.prototype.writeUInt16BE=function(p,_,I){return p=+p,_=_>>>0,I||J(this,p,_,2,65535,0),this[_]=p>>>8,this[_+1]=p&255,_+2},r.prototype.writeUint32LE=r.prototype.writeUInt32LE=function(p,_,I){return p=+p,_=_>>>0,I||J(this,p,_,4,4294967295,0),this[_+3]=p>>>24,this[_+2]=p>>>16,this[_+1]=p>>>8,this[_]=p&255,_+4},r.prototype.writeUint32BE=r.prototype.writeUInt32BE=function(p,_,I){return p=+p,_=_>>>0,I||J(this,p,_,4,4294967295,0),this[_]=p>>>24,this[_+1]=p>>>16,this[_+2]=p>>>8,this[_+3]=p&255,_+4};function C(p,_,I,D,Z){Q(_,D,Z,p,I,7);let fe=Number(_&BigInt(4294967295));p[I++]=fe,fe=fe>>8,p[I++]=fe,fe=fe>>8,p[I++]=fe,fe=fe>>8,p[I++]=fe;let Se=Number(_>>BigInt(32)&BigInt(4294967295));return p[I++]=Se,Se=Se>>8,p[I++]=Se,Se=Se>>8,p[I++]=Se,Se=Se>>8,p[I++]=Se,I}function Y(p,_,I,D,Z){Q(_,D,Z,p,I,7);let fe=Number(_&BigInt(4294967295));p[I+7]=fe,fe=fe>>8,p[I+6]=fe,fe=fe>>8,p[I+5]=fe,fe=fe>>8,p[I+4]=fe;let Se=Number(_>>BigInt(32)&BigInt(4294967295));return p[I+3]=Se,Se=Se>>8,p[I+2]=Se,Se=Se>>8,p[I+1]=Se,Se=Se>>8,p[I]=Se,I+8}r.prototype.writeBigUInt64LE=ae(function(p,_=0){return C(this,p,_,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeBigUInt64BE=ae(function(p,_=0){return Y(this,p,_,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeIntLE=function(p,_,I,D){if(p=+p,_=_>>>0,!D){let z=Math.pow(2,8*I-1);J(this,p,_,I,z-1,-z)}let Z=0,fe=1,Se=0;for(this[_]=p&255;++Z<I&&(fe*=256);)p<0&&Se===0&&this[_+Z-1]!==0&&(Se=1),this[_+Z]=(p/fe>>0)-Se&255;return _+I},r.prototype.writeIntBE=function(p,_,I,D){if(p=+p,_=_>>>0,!D){let z=Math.pow(2,8*I-1);J(this,p,_,I,z-1,-z)}let Z=I-1,fe=1,Se=0;for(this[_+Z]=p&255;--Z>=0&&(fe*=256);)p<0&&Se===0&&this[_+Z+1]!==0&&(Se=1),this[_+Z]=(p/fe>>0)-Se&255;return _+I},r.prototype.writeInt8=function(p,_,I){return p=+p,_=_>>>0,I||J(this,p,_,1,127,-128),p<0&&(p=255+p+1),this[_]=p&255,_+1},r.prototype.writeInt16LE=function(p,_,I){return p=+p,_=_>>>0,I||J(this,p,_,2,32767,-32768),this[_]=p&255,this[_+1]=p>>>8,_+2},r.prototype.writeInt16BE=function(p,_,I){return p=+p,_=_>>>0,I||J(this,p,_,2,32767,-32768),this[_]=p>>>8,this[_+1]=p&255,_+2},r.prototype.writeInt32LE=function(p,_,I){return p=+p,_=_>>>0,I||J(this,p,_,4,2147483647,-2147483648),this[_]=p&255,this[_+1]=p>>>8,this[_+2]=p>>>16,this[_+3]=p>>>24,_+4},r.prototype.writeInt32BE=function(p,_,I){return p=+p,_=_>>>0,I||J(this,p,_,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[_]=p>>>24,this[_+1]=p>>>16,this[_+2]=p>>>8,this[_+3]=p&255,_+4},r.prototype.writeBigInt64LE=ae(function(p,_=0){return C(this,p,_,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),r.prototype.writeBigInt64BE=ae(function(p,_=0){return Y(this,p,_,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ye(p,_,I,D,Z,fe){if(I+D>p.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("Index out of range")}function te(p,_,I,D,Z){return _=+_,I=I>>>0,Z||ye(p,_,I,4),t.write(p,_,I,D,23,4),I+4}r.prototype.writeFloatLE=function(p,_,I){return te(this,p,_,!0,I)},r.prototype.writeFloatBE=function(p,_,I){return te(this,p,_,!1,I)};function we(p,_,I,D,Z){return _=+_,I=I>>>0,Z||ye(p,_,I,8),t.write(p,_,I,D,52,8),I+8}r.prototype.writeDoubleLE=function(p,_,I){return we(this,p,_,!0,I)},r.prototype.writeDoubleBE=function(p,_,I){return we(this,p,_,!1,I)},r.prototype.copy=function(p,_,I,D){if(!r.isBuffer(p))throw new TypeError("argument should be a Buffer");if(I||(I=0),!D&&D!==0&&(D=this.length),_>=p.length&&(_=p.length),_||(_=0),D>0&&D<I&&(D=I),D===I||p.length===0||this.length===0)return 0;if(_<0)throw new RangeError("targetStart out of bounds");if(I<0||I>=this.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("sourceEnd out of bounds");D>this.length&&(D=this.length),p.length-_<D-I&&(D=p.length-_+I);let Z=D-I;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(_,I,D):Uint8Array.prototype.set.call(p,this.subarray(I,D),_),Z},r.prototype.fill=function(p,_,I,D){if(typeof p=="string"){if(typeof _=="string"?(D=_,_=0,I=this.length):typeof I=="string"&&(D=I,I=this.length),D!==void 0&&typeof D!="string")throw new TypeError("encoding must be a string");if(typeof D=="string"&&!r.isEncoding(D))throw new TypeError("Unknown encoding: "+D);if(p.length===1){let fe=p.charCodeAt(0);(D==="utf8"&&fe<128||D==="latin1")&&(p=fe)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(_<0||this.length<_||this.length<I)throw new RangeError("Out of range index");if(I<=_)return this;_=_>>>0,I=I===void 0?this.length:I>>>0,p||(p=0);let Z;if(typeof p=="number")for(Z=_;Z<I;++Z)this[Z]=p;else{let fe=r.isBuffer(p)?p:r.from(p,D),Se=fe.length;if(Se===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(Z=0;Z<I-_;++Z)this[Z+_]=fe[Z%Se]}return this};let G={};function L(p,_,I){G[p]=class extends I{constructor(){super(),Object.defineProperty(this,"message",{value:_.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${p}]`,this.stack,delete this.name}get code(){return p}set code(D){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:D,writable:!0})}toString(){return`${this.name} [${p}]: ${this.message}`}}}L("ERR_BUFFER_OUT_OF_BOUNDS",function(p){return p?`${p} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),L("ERR_INVALID_ARG_TYPE",function(p,_){return`The "${p}" argument must be of type number. Received type ${typeof _}`},TypeError),L("ERR_OUT_OF_RANGE",function(p,_,I){let D=`The value of "${p}" is out of range.`,Z=I;return Number.isInteger(I)&&Math.abs(I)>2**32?Z=ne(String(I)):typeof I=="bigint"&&(Z=String(I),(I>BigInt(2)**BigInt(32)||I<-(BigInt(2)**BigInt(32)))&&(Z=ne(Z)),Z+="n"),D+=` It must be ${_}. Received ${Z}`,D},RangeError);function ne(p){let _="",I=p.length,D=p[0]==="-"?1:0;for(;I>=D+4;I-=3)_=`_${p.slice(I-3,I)}${_}`;return`${p.slice(0,I)}${_}`}function V(p,_,I){X(_,"offset"),(p[_]===void 0||p[_+I]===void 0)&&me(_,p.length-(I+1))}function Q(p,_,I,D,Z,fe){if(p>I||p<_){let Se=typeof _=="bigint"?"n":"",z;throw _===0||_===BigInt(0)?z=`>= 0${Se} and < 2${Se} ** ${(fe+1)*8}${Se}`:z=`>= -(2${Se} ** ${(fe+1)*8-1}${Se}) and < 2 ** ${(fe+1)*8-1}${Se}`,new G.ERR_OUT_OF_RANGE("value",z,p)}V(D,Z,fe)}function X(p,_){if(typeof p!="number")throw new G.ERR_INVALID_ARG_TYPE(_,"number",p)}function me(p,_,I){throw Math.floor(p)!==p?(X(p,I),new G.ERR_OUT_OF_RANGE("offset","an integer",p)):_<0?new G.ERR_BUFFER_OUT_OF_BOUNDS:new G.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${_}`,p)}let se=/[^+/0-9A-Za-z-_]/g;function j(p){if(p=p.split("=")[0],p=p.trim().replace(se,""),p.length<2)return"";for(;p.length%4!==0;)p=p+"=";return p}function $(p,_){_=_||1/0;let I,D=p.length,Z=null,fe=[];for(let Se=0;Se<D;++Se){if(I=p.charCodeAt(Se),I>55295&&I<57344){if(!Z){if(I>56319){(_-=3)>-1&&fe.push(239,191,189);continue}else if(Se+1===D){(_-=3)>-1&&fe.push(239,191,189);continue}Z=I;continue}if(I<56320){(_-=3)>-1&&fe.push(239,191,189),Z=I;continue}I=(Z-55296<<10|I-56320)+65536}else Z&&(_-=3)>-1&&fe.push(239,191,189);if(Z=null,I<128){if((_-=1)<0)break;fe.push(I)}else if(I<2048){if((_-=2)<0)break;fe.push(I>>6|192,I&63|128)}else if(I<65536){if((_-=3)<0)break;fe.push(I>>12|224,I>>6&63|128,I&63|128)}else if(I<1114112){if((_-=4)<0)break;fe.push(I>>18|240,I>>12&63|128,I>>6&63|128,I&63|128)}else throw new Error("Invalid code point")}return fe}function ee(p){let _=[];for(let I=0;I<p.length;++I)_.push(p.charCodeAt(I)&255);return _}function he(p,_){let I,D,Z,fe=[];for(let Se=0;Se<p.length&&!((_-=2)<0);++Se)I=p.charCodeAt(Se),D=I>>8,Z=I%256,fe.push(Z),fe.push(D);return fe}function pe(p){return u.toByteArray(j(p))}function be(p,_,I,D){let Z;for(Z=0;Z<D&&!(Z+I>=_.length||Z>=p.length);++Z)_[Z+I]=p[Z];return Z}function q(p,_){return p instanceof _||p!=null&&p.constructor!=null&&p.constructor.name!=null&&p.constructor.name===_.name}function ge(p){return p!==p}let ve=(function(){let p="0123456789abcdef",_=new Array(256);for(let I=0;I<16;++I){let D=I*16;for(let Z=0;Z<16;++Z)_[D+Z]=p[I]+p[Z]}return _})();function ae(p){return typeof BigInt>"u"?Pe:p}function Pe(){throw new Error("BigInt not supported")}return bt}var Ut,di,Yt,gi,bt,yi,Au=Ge(()=>{le(),ce(),ue(),Ut={},di=!1,Yt={},gi=!1,bt={},yi=!1}),Ue={};Dt(Ue,{Buffer:()=>Dr,INSPECT_MAX_BYTES:()=>ca,default:()=>lt,kMaxLength:()=>fa});var lt,Dr,ca,fa,Be=Ge(()=>{le(),ce(),ue(),Au(),lt=xu(),lt.Buffer,lt.SlowBuffer,lt.INSPECT_MAX_BYTES,lt.kMaxLength,Dr=lt.Buffer,ca=lt.INSPECT_MAX_BYTES,fa=lt.kMaxLength}),ce=Ge(()=>{Be()}),Ne=de((u,t)=>{le(),ce(),ue();var o=class extends Error{constructor(a){if(!Array.isArray(a))throw new TypeError(`Expected input to be an Array, got ${typeof a}`);let l="";for(let e=0;e<a.length;e++)l+=`    ${a[e].stack}
`;super(l),this.name="AggregateError",this.errors=a}};t.exports={AggregateError:o,ArrayIsArray(a){return Array.isArray(a)},ArrayPrototypeIncludes(a,l){return a.includes(l)},ArrayPrototypeIndexOf(a,l){return a.indexOf(l)},ArrayPrototypeJoin(a,l){return a.join(l)},ArrayPrototypeMap(a,l){return a.map(l)},ArrayPrototypePop(a,l){return a.pop(l)},ArrayPrototypePush(a,l){return a.push(l)},ArrayPrototypeSlice(a,l,e){return a.slice(l,e)},Error,FunctionPrototypeCall(a,l,...e){return a.call(l,...e)},FunctionPrototypeSymbolHasInstance(a,l){return Function.prototype[Symbol.hasInstance].call(a,l)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(a,l){return Object.defineProperties(a,l)},ObjectDefineProperty(a,l,e){return Object.defineProperty(a,l,e)},ObjectGetOwnPropertyDescriptor(a,l){return Object.getOwnPropertyDescriptor(a,l)},ObjectKeys(a){return Object.keys(a)},ObjectSetPrototypeOf(a,l){return Object.setPrototypeOf(a,l)},Promise,PromisePrototypeCatch(a,l){return a.catch(l)},PromisePrototypeThen(a,l,e){return a.then(l,e)},PromiseReject(a){return Promise.reject(a)},PromiseResolve(a){return Promise.resolve(a)},ReflectApply:Reflect.apply,RegExpPrototypeTest(a,l){return a.test(l)},SafeSet:Set,String,StringPrototypeSlice(a,l,e){return a.slice(l,e)},StringPrototypeToLowerCase(a){return a.toLowerCase()},StringPrototypeToUpperCase(a){return a.toUpperCase()},StringPrototypeTrim(a){return a.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(a,l,e){return a.set(l,e)},Boolean,Uint8Array}}),ha=de((u,t)=>{le(),ce(),ue(),t.exports={format(o,...a){return o.replace(/%([sdifj])/g,function(...[l,e]){let r=a.shift();return e==="f"?r.toFixed(6):e==="j"?JSON.stringify(r):e==="s"&&typeof r=="object"?`${r.constructor!==Object?r.constructor.name:""} {}`.trim():r.toString()})},inspect(o){switch(typeof o){case"string":if(o.includes("'"))if(o.includes('"')){if(!o.includes("`")&&!o.includes("${"))return`\`${o}\``}else return`"${o}"`;return`'${o}'`;case"number":return isNaN(o)?"NaN":Object.is(o,-0)?String(o):o;case"bigint":return`${String(o)}n`;case"boolean":case"undefined":return String(o);case"object":return"{}"}}}}),Ve=de((u,t)=>{le(),ce(),ue();var{format:o,inspect:a}=ha(),{AggregateError:l}=Ne(),e=globalThis.AggregateError||l,r=Symbol("kIsNodeError"),n=["string","function","number","object","Function","Object","boolean","bigint","symbol"],i=/^([A-Z][a-z0-9]*)+$/,s="__node_internal_",c={};function h(g,w){if(!g)throw new c.ERR_INTERNAL_ASSERTION(w)}function d(g){let w="",x=g.length,v=g[0]==="-"?1:0;for(;x>=v+4;x-=3)w=`_${g.slice(x-3,x)}${w}`;return`${g.slice(0,x)}${w}`}function m(g,w,x){if(typeof w=="function")return h(w.length<=x.length,`Code: ${g}; The provided arguments length (${x.length}) does not match the required ones (${w.length}).`),w(...x);let v=(w.match(/%[dfijoOs]/g)||[]).length;return h(v===x.length,`Code: ${g}; The provided arguments length (${x.length}) does not match the required ones (${v}).`),x.length===0?w:o(w,...x)}function f(g,w,x){x||(x=Error);class v extends x{constructor(...E){super(m(g,w,E))}toString(){return`${this.name} [${g}]: ${this.message}`}}Object.defineProperties(v.prototype,{name:{value:x.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${g}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),v.prototype.code=g,v.prototype[r]=!0,c[g]=v}function y(g){let w=s+g.name;return Object.defineProperty(g,"name",{value:w}),g}function b(g,w){if(g&&w&&g!==w){if(Array.isArray(w.errors))return w.errors.push(g),w;let x=new e([w,g],w.message);return x.code=w.code,x}return g||w}var S=class extends Error{constructor(g="The operation was aborted",w=void 0){if(w!==void 0&&typeof w!="object")throw new c.ERR_INVALID_ARG_TYPE("options","Object",w);super(g,w),this.code="ABORT_ERR",this.name="AbortError"}};f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",(g,w,x)=>{h(typeof g=="string","'name' must be a string"),Array.isArray(w)||(w=[w]);let v="The ";g.endsWith(" argument")?v+=`${g} `:v+=`"${g}" ${g.includes(".")?"property":"argument"} `,v+="must be ";let A=[],E=[],O=[];for(let P of w)h(typeof P=="string","All expected entries have to be of type string"),n.includes(P)?A.push(P.toLowerCase()):i.test(P)?E.push(P):(h(P!=="object",'The value "object" should be written as "Object"'),O.push(P));if(E.length>0){let P=A.indexOf("object");P!==-1&&(A.splice(A,P,1),E.push("Object"))}if(A.length>0){switch(A.length){case 1:v+=`of type ${A[0]}`;break;case 2:v+=`one of type ${A[0]} or ${A[1]}`;break;default:{let P=A.pop();v+=`one of type ${A.join(", ")}, or ${P}`}}(E.length>0||O.length>0)&&(v+=" or ")}if(E.length>0){switch(E.length){case 1:v+=`an instance of ${E[0]}`;break;case 2:v+=`an instance of ${E[0]} or ${E[1]}`;break;default:{let P=E.pop();v+=`an instance of ${E.join(", ")}, or ${P}`}}O.length>0&&(v+=" or ")}switch(O.length){case 0:break;case 1:O[0].toLowerCase()!==O[0]&&(v+="an "),v+=`${O[0]}`;break;case 2:v+=`one of ${O[0]} or ${O[1]}`;break;default:{let P=O.pop();v+=`one of ${O.join(", ")}, or ${P}`}}if(x==null)v+=`. Received ${x}`;else if(typeof x=="function"&&x.name)v+=`. Received function ${x.name}`;else if(typeof x=="object"){var R;if((R=x.constructor)!==null&&R!==void 0&&R.name)v+=`. Received an instance of ${x.constructor.name}`;else{let P=a(x,{depth:-1});v+=`. Received ${P}`}}else{let P=a(x,{colors:!1});P.length>25&&(P=`${P.slice(0,25)}...`),v+=`. Received type ${typeof x} (${P})`}return v},TypeError),f("ERR_INVALID_ARG_VALUE",(g,w,x="is invalid")=>{let v=a(w);return v.length>128&&(v=v.slice(0,128)+"..."),`The ${g.includes(".")?"property":"argument"} '${g}' ${x}. Received ${v}`},TypeError),f("ERR_INVALID_RETURN_VALUE",(g,w,x)=>{var v;let A=x!=null&&(v=x.constructor)!==null&&v!==void 0&&v.name?`instance of ${x.constructor.name}`:`type ${typeof x}`;return`Expected ${g} to be returned from the "${w}" function but got ${A}.`},TypeError),f("ERR_MISSING_ARGS",(...g)=>{h(g.length>0,"At least one arg needs to be specified");let w,x=g.length;switch(g=(Array.isArray(g)?g:[g]).map(v=>`"${v}"`).join(" or "),x){case 1:w+=`The ${g[0]} argument`;break;case 2:w+=`The ${g[0]} and ${g[1]} arguments`;break;default:{let v=g.pop();w+=`The ${g.join(", ")}, and ${v} arguments`}break}return`${w} must be specified`},TypeError),f("ERR_OUT_OF_RANGE",(g,w,x)=>{h(w,'Missing "range" argument');let v;if(Number.isInteger(x)&&Math.abs(x)>2**32)v=d(String(x));else if(typeof x=="bigint"){v=String(x);let A=BigInt(2)**BigInt(32);(x>A||x<-A)&&(v=d(v)),v+="n"}else v=a(x);return`The value of "${g}" is out of range. It must be ${w}. Received ${v}`},RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),t.exports={AbortError:S,aggregateTwoErrors:y(b),hideStackFrames:y,codes:c}}),ir=de((u,t)=>{le(),ce(),ue();var{AbortController:o,AbortSignal:a}=typeof self<"u"?self:typeof window<"u"?window:void 0;t.exports=o,t.exports.AbortSignal=a,t.exports.default=o}),_t={};Dt(_t,{EventEmitter:()=>pa,default:()=>Bt,defaultMaxListeners:()=>da,init:()=>ga,listenerCount:()=>ya,on:()=>ma,once:()=>ba});function Iu(){if(mi)return Jt;mi=!0;var u=typeof Reflect=="object"?Reflect:null,t=u&&typeof u.apply=="function"?u.apply:function(x,v,A){return Function.prototype.apply.call(x,v,A)},o;u&&typeof u.ownKeys=="function"?o=u.ownKeys:Object.getOwnPropertySymbols?o=function(x){return Object.getOwnPropertyNames(x).concat(Object.getOwnPropertySymbols(x))}:o=function(x){return Object.getOwnPropertyNames(x)};function a(x){console&&console.warn&&console.warn(x)}var l=Number.isNaN||function(x){return x!==x};function e(){e.init.call(this)}Jt=e,Jt.once=S,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var r=10;function n(x){if(typeof x!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(x){if(typeof x!="number"||x<0||l(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");r=x}}),e.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(x){if(typeof x!="number"||x<0||l(x))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+x+".");return this._maxListeners=x,this};function i(x){return x._maxListeners===void 0?e.defaultMaxListeners:x._maxListeners}e.prototype.getMaxListeners=function(){return i(this)},e.prototype.emit=function(x){for(var v=[],A=1;A<arguments.length;A++)v.push(arguments[A]);var E=x==="error",O=this._events;if(O!==void 0)E=E&&O.error===void 0;else if(!E)return!1;if(E){var R;if(v.length>0&&(R=v[0]),R instanceof Error)throw R;var P=new Error("Unhandled error."+(R?" ("+R.message+")":""));throw P.context=R,P}var M=O[x];if(M===void 0)return!1;if(typeof M=="function")t(M,this,v);else for(var k=M.length,B=f(M,k),A=0;A<k;++A)t(B[A],this,v);return!0};function s(x,v,A,E){var O,R,P;if(n(A),R=x._events,R===void 0?(R=x._events=Object.create(null),x._eventsCount=0):(R.newListener!==void 0&&(x.emit("newListener",v,A.listener?A.listener:A),R=x._events),P=R[v]),P===void 0)P=R[v]=A,++x._eventsCount;else if(typeof P=="function"?P=R[v]=E?[A,P]:[P,A]:E?P.unshift(A):P.push(A),O=i(x),O>0&&P.length>O&&!P.warned){P.warned=!0;var M=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(v)+" listeners added. Use emitter.setMaxListeners() to increase limit");M.name="MaxListenersExceededWarning",M.emitter=x,M.type=v,M.count=P.length,a(M)}return x}e.prototype.addListener=function(x,v){return s(this,x,v,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(x,v){return s(this,x,v,!0)};function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(x,v,A){var E={fired:!1,wrapFn:void 0,target:x,type:v,listener:A},O=c.bind(E);return O.listener=A,E.wrapFn=O,O}e.prototype.once=function(x,v){return n(v),this.on(x,h(this,x,v)),this},e.prototype.prependOnceListener=function(x,v){return n(v),this.prependListener(x,h(this,x,v)),this},e.prototype.removeListener=function(x,v){var A,E,O,R,P;if(n(v),E=this._events,E===void 0)return this;if(A=E[x],A===void 0)return this;if(A===v||A.listener===v)--this._eventsCount===0?this._events=Object.create(null):(delete E[x],E.removeListener&&this.emit("removeListener",x,A.listener||v));else if(typeof A!="function"){for(O=-1,R=A.length-1;R>=0;R--)if(A[R]===v||A[R].listener===v){P=A[R].listener,O=R;break}if(O<0)return this;O===0?A.shift():y(A,O),A.length===1&&(E[x]=A[0]),E.removeListener!==void 0&&this.emit("removeListener",x,P||v)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(x){var v,A,E;if(A=this._events,A===void 0)return this;if(A.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):A[x]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete A[x]),this;if(arguments.length===0){var O=Object.keys(A),R;for(E=0;E<O.length;++E)R=O[E],R!=="removeListener"&&this.removeAllListeners(R);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(v=A[x],typeof v=="function")this.removeListener(x,v);else if(v!==void 0)for(E=v.length-1;E>=0;E--)this.removeListener(x,v[E]);return this};function d(x,v,A){var E=x._events;if(E===void 0)return[];var O=E[v];return O===void 0?[]:typeof O=="function"?A?[O.listener||O]:[O]:A?b(O):f(O,O.length)}e.prototype.listeners=function(x){return d(this,x,!0)},e.prototype.rawListeners=function(x){return d(this,x,!1)},e.listenerCount=function(x,v){return typeof x.listenerCount=="function"?x.listenerCount(v):m.call(x,v)},e.prototype.listenerCount=m;function m(x){var v=this._events;if(v!==void 0){var A=v[x];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}e.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]};function f(x,v){for(var A=new Array(v),E=0;E<v;++E)A[E]=x[E];return A}function y(x,v){for(;v+1<x.length;v++)x[v]=x[v+1];x.pop()}function b(x){for(var v=new Array(x.length),A=0;A<v.length;++A)v[A]=x[A].listener||x[A];return v}function S(x,v){return new Promise(function(A,E){function O(P){x.removeListener(v,R),E(P)}function R(){typeof x.removeListener=="function"&&x.removeListener("error",O),A([].slice.call(arguments))}w(x,v,R,{once:!0}),v!=="error"&&g(x,O,{once:!0})})}function g(x,v,A){typeof x.on=="function"&&w(x,"error",v,A)}function w(x,v,A,E){if(typeof x.on=="function")E.once?x.once(v,A):x.on(v,A);else if(typeof x.addEventListener=="function")x.addEventListener(v,function O(R){E.once&&x.removeEventListener(v,O),A(R)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof x)}return Jt}var Jt,mi,Bt,pa,da,ga,ya,ma,ba,Tt=Ge(()=>{le(),ce(),ue(),Jt={},mi=!1,Bt=Iu(),Bt.once,Bt.once=function(u,t){return new Promise((o,a)=>{function l(...r){e!==void 0&&u.removeListener("error",e),o(r)}let e;t!=="error"&&(e=r=>{u.removeListener(name,l),a(r)},u.once("error",e)),u.once(t,l)})},Bt.on=function(u,t){let o=[],a=[],l=null,e=!1,r={async next(){let s=o.shift();if(s)return createIterResult(s,!1);if(l){let c=Promise.reject(l);return l=null,c}return e?createIterResult(void 0,!0):new Promise((c,h)=>a.push({resolve:c,reject:h}))},async return(){u.removeListener(t,n),u.removeListener("error",i),e=!0;for(let s of a)s.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(s){l=s,u.removeListener(t,n),u.removeListener("error",i)},[Symbol.asyncIterator](){return this}};return u.on(t,n),u.on("error",i),r;function n(...s){let c=a.shift();c?c.resolve(createIterResult(s,!1)):o.push(s)}function i(s){e=!0;let c=a.shift();c?c.reject(s):l=s,r.return()}},{EventEmitter:pa,defaultMaxListeners:da,init:ga,listenerCount:ya,on:ma,once:ba}=Bt}),ze=de((u,t)=>{le(),ce(),ue();var o=(Be(),Re(Ue)),{format:a,inspect:l}=ha(),{codes:{ERR_INVALID_ARG_TYPE:e}}=Ve(),{kResistStopPropagation:r,AggregateError:n,SymbolDispose:i}=Ne(),s=globalThis.AbortSignal||ir().AbortSignal,c=globalThis.AbortController||ir().AbortController,h=Object.getPrototypeOf(async function(){}).constructor,d=globalThis.Blob||o.Blob,m=typeof d<"u"?function(b){return b instanceof d}:function(b){return!1},f=(b,S)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new e(S,"AbortSignal",b)},y=(b,S)=>{if(typeof b!="function")throw new e(S,"Function",b)};t.exports={AggregateError:n,kEmptyObject:Object.freeze({}),once(b){let S=!1;return function(...g){S||(S=!0,b.apply(this,g))}},createDeferredPromise:function(){let b,S;return{promise:new Promise((g,w)=>{b=g,S=w}),resolve:b,reject:S}},promisify(b){return new Promise((S,g)=>{b((w,...x)=>w?g(w):S(...x))})},debuglog(){return function(){}},format:a,inspect:l,types:{isAsyncFunction(b){return b instanceof h},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:m,deprecate(b,S){return b},addAbortListener:(Tt(),Re(_t)).addAbortListener||function(b,S){if(b===void 0)throw new e("signal","AbortSignal",b);f(b,"signal"),y(S,"listener");let g;return b.aborted?queueMicrotask(()=>S()):(b.addEventListener("abort",S,{__proto__:null,once:!0,[r]:!0}),g=()=>{b.removeEventListener("abort",S)}),{__proto__:null,[i](){var w;(w=g)===null||w===void 0||w()}}},AbortSignalAny:s.any||function(b){if(b.length===1)return b[0];let S=new c,g=()=>S.abort();return b.forEach(w=>{f(w,"signals"),w.addEventListener("abort",g,{once:!0})}),S.signal.addEventListener("abort",()=>{b.forEach(w=>w.removeEventListener("abort",g))},{once:!0}),S.signal}},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),or=de((u,t)=>{le(),ce(),ue();var{ArrayIsArray:o,ArrayPrototypeIncludes:a,ArrayPrototypeJoin:l,ArrayPrototypeMap:e,NumberIsInteger:r,NumberIsNaN:n,NumberMAX_SAFE_INTEGER:i,NumberMIN_SAFE_INTEGER:s,NumberParseInt:c,ObjectPrototypeHasOwnProperty:h,RegExpPrototypeExec:d,String:m,StringPrototypeToUpperCase:f,StringPrototypeTrim:y}=Ne(),{hideStackFrames:b,codes:{ERR_SOCKET_BAD_PORT:S,ERR_INVALID_ARG_TYPE:g,ERR_INVALID_ARG_VALUE:w,ERR_OUT_OF_RANGE:x,ERR_UNKNOWN_SIGNAL:v}}=Ve(),{normalizeEncoding:A}=ze(),{isAsyncFunction:E,isArrayBufferView:O}=ze().types,R={};function P(q){return q===(q|0)}function M(q){return q===q>>>0}var k=/^[0-7]+$/,B="must be a 32-bit unsigned integer or an octal string";function U(q,ge,ve){if(typeof q>"u"&&(q=ve),typeof q=="string"){if(d(k,q)===null)throw new w(ge,q,B);q=c(q,8)}return H(q,ge),q}var F=b((q,ge,ve=s,ae=i)=>{if(typeof q!="number")throw new g(ge,"number",q);if(!r(q))throw new x(ge,"an integer",q);if(q<ve||q>ae)throw new x(ge,`>= ${ve} && <= ${ae}`,q)}),oe=b((q,ge,ve=-2147483648,ae=2147483647)=>{if(typeof q!="number")throw new g(ge,"number",q);if(!r(q))throw new x(ge,"an integer",q);if(q<ve||q>ae)throw new x(ge,`>= ${ve} && <= ${ae}`,q)}),H=b((q,ge,ve=!1)=>{if(typeof q!="number")throw new g(ge,"number",q);if(!r(q))throw new x(ge,"an integer",q);let ae=ve?1:0,Pe=4294967295;if(q<ae||q>Pe)throw new x(ge,`>= ${ae} && <= ${Pe}`,q)});function K(q,ge){if(typeof q!="string")throw new g(ge,"string",q)}function re(q,ge,ve=void 0,ae){if(typeof q!="number")throw new g(ge,"number",q);if(ve!=null&&q<ve||ae!=null&&q>ae||(ve!=null||ae!=null)&&n(q))throw new x(ge,`${ve!=null?`>= ${ve}`:""}${ve!=null&&ae!=null?" && ":""}${ae!=null?`<= ${ae}`:""}`,q)}var W=b((q,ge,ve)=>{if(!a(ve,q)){let ae="must be one of: "+l(e(ve,Pe=>typeof Pe=="string"?`'${Pe}'`:m(Pe)),", ");throw new w(ge,q,ae)}});function J(q,ge){if(typeof q!="boolean")throw new g(ge,"boolean",q)}function C(q,ge,ve){return q==null||!h(q,ge)?ve:q[ge]}var Y=b((q,ge,ve=null)=>{let ae=C(ve,"allowArray",!1),Pe=C(ve,"allowFunction",!1);if(!C(ve,"nullable",!1)&&q===null||!ae&&o(q)||typeof q!="object"&&(!Pe||typeof q!="function"))throw new g(ge,"Object",q)}),ye=b((q,ge)=>{if(q!=null&&typeof q!="object"&&typeof q!="function")throw new g(ge,"a dictionary",q)}),te=b((q,ge,ve=0)=>{if(!o(q))throw new g(ge,"Array",q);if(q.length<ve){let ae=`must be longer than ${ve}`;throw new w(ge,q,ae)}});function we(q,ge){te(q,ge);for(let ve=0;ve<q.length;ve++)K(q[ve],`${ge}[${ve}]`)}function G(q,ge){te(q,ge);for(let ve=0;ve<q.length;ve++)J(q[ve],`${ge}[${ve}]`)}function L(q,ge){te(q,ge);for(let ve=0;ve<q.length;ve++){let ae=q[ve],Pe=`${ge}[${ve}]`;if(ae==null)throw new g(Pe,"AbortSignal",ae);me(ae,Pe)}}function ne(q,ge="signal"){if(K(q,ge),R[q]===void 0)throw R[f(q)]!==void 0?new v(q+" (signals must use all capital letters)"):new v(q)}var V=b((q,ge="buffer")=>{if(!O(q))throw new g(ge,["Buffer","TypedArray","DataView"],q)});function Q(q,ge){let ve=A(ge),ae=q.length;if(ve==="hex"&&ae%2!==0)throw new w("encoding",ge,`is invalid for data of length ${ae}`)}function X(q,ge="Port",ve=!0){if(typeof q!="number"&&typeof q!="string"||typeof q=="string"&&y(q).length===0||+q!==+q>>>0||q>65535||q===0&&!ve)throw new S(ge,q,ve);return q|0}var me=b((q,ge)=>{if(q!==void 0&&(q===null||typeof q!="object"||!("aborted"in q)))throw new g(ge,"AbortSignal",q)}),se=b((q,ge)=>{if(typeof q!="function")throw new g(ge,"Function",q)}),j=b((q,ge)=>{if(typeof q!="function"||E(q))throw new g(ge,"Function",q)}),$=b((q,ge)=>{if(q!==void 0)throw new g(ge,"undefined",q)});function ee(q,ge,ve){if(!a(ve,q))throw new g(ge,`('${l(ve,"|")}')`,q)}var he=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function pe(q,ge){if(typeof q>"u"||!d(he,q))throw new w(ge,q,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function be(q){if(typeof q=="string")return pe(q,"hints"),q;if(o(q)){let ge=q.length,ve="";if(ge===0)return ve;for(let ae=0;ae<ge;ae++){let Pe=q[ae];pe(Pe,"hints"),ve+=Pe,ae!==ge-1&&(ve+=", ")}return ve}throw new w("hints",q,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}t.exports={isInt32:P,isUint32:M,parseFileMode:U,validateArray:te,validateStringArray:we,validateBooleanArray:G,validateAbortSignalArray:L,validateBoolean:J,validateBuffer:V,validateDictionary:ye,validateEncoding:Q,validateFunction:se,validateInt32:oe,validateInteger:F,validateNumber:re,validateObject:Y,validateOneOf:W,validatePlainFunction:j,validatePort:X,validateSignalName:ne,validateString:K,validateUint32:H,validateUndefined:$,validateUnion:ee,validateAbortSignal:me,validateLinkHeaderValue:be}}),Rt=de((u,t)=>{le(),ce(),ue();var o=t.exports={},a,l;function e(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=e}catch{a=e}try{typeof clearTimeout=="function"?l=clearTimeout:l=r}catch{l=r}})();function n(S){if(a===setTimeout)return setTimeout(S,0);if((a===e||!a)&&setTimeout)return a=setTimeout,setTimeout(S,0);try{return a(S,0)}catch{try{return a.call(null,S,0)}catch{return a.call(this,S,0)}}}function i(S){if(l===clearTimeout)return clearTimeout(S);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(S);try{return l(S)}catch{try{return l.call(null,S)}catch{return l.call(this,S)}}}var s=[],c=!1,h,d=-1;function m(){!c||!h||(c=!1,h.length?s=h.concat(s):d=-1,s.length&&f())}function f(){if(!c){var S=n(m);c=!0;for(var g=s.length;g;){for(h=s,s=[];++d<g;)h&&h[d].run();d=-1,g=s.length}h=null,c=!1,i(S)}}o.nextTick=function(S){var g=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)g[w-1]=arguments[w];s.push(new y(S,g)),s.length===1&&!c&&n(f)};function y(S,g){this.fun=S,this.array=g}y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={};function b(){}o.on=b,o.addListener=b,o.once=b,o.off=b,o.removeListener=b,o.removeAllListeners=b,o.emit=b,o.prependListener=b,o.prependOnceListener=b,o.listeners=function(S){return[]},o.binding=function(S){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(S){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}),pt=de((u,t)=>{le(),ce(),ue();var{SymbolAsyncIterator:o,SymbolIterator:a,SymbolFor:l}=Ne(),e=l("nodejs.stream.destroyed"),r=l("nodejs.stream.errored"),n=l("nodejs.stream.readable"),i=l("nodejs.stream.writable"),s=l("nodejs.stream.disturbed"),c=l("nodejs.webstream.isClosedPromise"),h=l("nodejs.webstream.controllerErrorFunction");function d(C,Y=!1){var ye;return!!(C&&typeof C.pipe=="function"&&typeof C.on=="function"&&(!Y||typeof C.pause=="function"&&typeof C.resume=="function")&&(!C._writableState||((ye=C._readableState)===null||ye===void 0?void 0:ye.readable)!==!1)&&(!C._writableState||C._readableState))}function m(C){var Y;return!!(C&&typeof C.write=="function"&&typeof C.on=="function"&&(!C._readableState||((Y=C._writableState)===null||Y===void 0?void 0:Y.writable)!==!1))}function f(C){return!!(C&&typeof C.pipe=="function"&&C._readableState&&typeof C.on=="function"&&typeof C.write=="function")}function y(C){return C&&(C._readableState||C._writableState||typeof C.write=="function"&&typeof C.on=="function"||typeof C.pipe=="function"&&typeof C.on=="function")}function b(C){return!!(C&&!y(C)&&typeof C.pipeThrough=="function"&&typeof C.getReader=="function"&&typeof C.cancel=="function")}function S(C){return!!(C&&!y(C)&&typeof C.getWriter=="function"&&typeof C.abort=="function")}function g(C){return!!(C&&!y(C)&&typeof C.readable=="object"&&typeof C.writable=="object")}function w(C){return b(C)||S(C)||g(C)}function x(C,Y){return C==null?!1:Y===!0?typeof C[o]=="function":Y===!1?typeof C[a]=="function":typeof C[o]=="function"||typeof C[a]=="function"}function v(C){if(!y(C))return null;let Y=C._writableState,ye=C._readableState,te=Y||ye;return!!(C.destroyed||C[e]||te!=null&&te.destroyed)}function A(C){if(!m(C))return null;if(C.writableEnded===!0)return!0;let Y=C._writableState;return Y!=null&&Y.errored?!1:typeof Y?.ended!="boolean"?null:Y.ended}function E(C,Y){if(!m(C))return null;if(C.writableFinished===!0)return!0;let ye=C._writableState;return ye!=null&&ye.errored?!1:typeof ye?.finished!="boolean"?null:!!(ye.finished||Y===!1&&ye.ended===!0&&ye.length===0)}function O(C){if(!d(C))return null;if(C.readableEnded===!0)return!0;let Y=C._readableState;return!Y||Y.errored?!1:typeof Y?.ended!="boolean"?null:Y.ended}function R(C,Y){if(!d(C))return null;let ye=C._readableState;return ye!=null&&ye.errored?!1:typeof ye?.endEmitted!="boolean"?null:!!(ye.endEmitted||Y===!1&&ye.ended===!0&&ye.length===0)}function P(C){return C&&C[n]!=null?C[n]:typeof C?.readable!="boolean"?null:v(C)?!1:d(C)&&C.readable&&!R(C)}function M(C){return C&&C[i]!=null?C[i]:typeof C?.writable!="boolean"?null:v(C)?!1:m(C)&&C.writable&&!A(C)}function k(C,Y){return y(C)?v(C)?!0:!(Y?.readable!==!1&&P(C)||Y?.writable!==!1&&M(C)):null}function B(C){var Y,ye;return y(C)?C.writableErrored?C.writableErrored:(Y=(ye=C._writableState)===null||ye===void 0?void 0:ye.errored)!==null&&Y!==void 0?Y:null:null}function U(C){var Y,ye;return y(C)?C.readableErrored?C.readableErrored:(Y=(ye=C._readableState)===null||ye===void 0?void 0:ye.errored)!==null&&Y!==void 0?Y:null:null}function F(C){if(!y(C))return null;if(typeof C.closed=="boolean")return C.closed;let Y=C._writableState,ye=C._readableState;return typeof Y?.closed=="boolean"||typeof ye?.closed=="boolean"?Y?.closed||ye?.closed:typeof C._closed=="boolean"&&oe(C)?C._closed:null}function oe(C){return typeof C._closed=="boolean"&&typeof C._defaultKeepAlive=="boolean"&&typeof C._removedConnection=="boolean"&&typeof C._removedContLen=="boolean"}function H(C){return typeof C._sent100=="boolean"&&oe(C)}function K(C){var Y;return typeof C._consuming=="boolean"&&typeof C._dumped=="boolean"&&((Y=C.req)===null||Y===void 0?void 0:Y.upgradeOrConnect)===void 0}function re(C){if(!y(C))return null;let Y=C._writableState,ye=C._readableState,te=Y||ye;return!te&&H(C)||!!(te&&te.autoDestroy&&te.emitClose&&te.closed===!1)}function W(C){var Y;return!!(C&&((Y=C[s])!==null&&Y!==void 0?Y:C.readableDidRead||C.readableAborted))}function J(C){var Y,ye,te,we,G,L,ne,V,Q,X;return!!(C&&((Y=(ye=(te=(we=(G=(L=C[r])!==null&&L!==void 0?L:C.readableErrored)!==null&&G!==void 0?G:C.writableErrored)!==null&&we!==void 0?we:(ne=C._readableState)===null||ne===void 0?void 0:ne.errorEmitted)!==null&&te!==void 0?te:(V=C._writableState)===null||V===void 0?void 0:V.errorEmitted)!==null&&ye!==void 0?ye:(Q=C._readableState)===null||Q===void 0?void 0:Q.errored)!==null&&Y!==void 0?Y:!((X=C._writableState)===null||X===void 0)&&X.errored))}t.exports={isDestroyed:v,kIsDestroyed:e,isDisturbed:W,kIsDisturbed:s,isErrored:J,kIsErrored:r,isReadable:P,kIsReadable:n,kIsClosedPromise:c,kControllerErrorFunction:h,kIsWritable:i,isClosed:F,isDuplexNodeStream:f,isFinished:k,isIterable:x,isReadableNodeStream:d,isReadableStream:b,isReadableEnded:O,isReadableFinished:R,isReadableErrored:U,isNodeStream:y,isWebStream:w,isWritable:M,isWritableNodeStream:m,isWritableStream:S,isWritableEnded:A,isWritableFinished:E,isWritableErrored:B,isServerRequest:K,isServerResponse:H,willEmitClose:re,isTransformStream:g}}),St=de((u,t)=>{le(),ce(),ue();var o=Rt(),{AbortError:a,codes:l}=Ve(),{ERR_INVALID_ARG_TYPE:e,ERR_STREAM_PREMATURE_CLOSE:r}=l,{kEmptyObject:n,once:i}=ze(),{validateAbortSignal:s,validateFunction:c,validateObject:h,validateBoolean:d}=or(),{Promise:m,PromisePrototypeThen:f,SymbolDispose:y}=Ne(),{isClosed:b,isReadable:S,isReadableNodeStream:g,isReadableStream:w,isReadableFinished:x,isReadableErrored:v,isWritable:A,isWritableNodeStream:E,isWritableStream:O,isWritableFinished:R,isWritableErrored:P,isNodeStream:M,willEmitClose:k,kIsClosedPromise:B}=pt(),U;function F(W){return W.setHeader&&typeof W.abort=="function"}var oe=()=>{};function H(W,J,C){var Y,ye;if(arguments.length===2?(C=J,J=n):J==null?J=n:h(J,"options"),c(C,"callback"),s(J.signal,"options.signal"),C=i(C),w(W)||O(W))return K(W,J,C);if(!M(W))throw new e("stream",["ReadableStream","WritableStream","Stream"],W);let te=(Y=J.readable)!==null&&Y!==void 0?Y:g(W),we=(ye=J.writable)!==null&&ye!==void 0?ye:E(W),G=W._writableState,L=W._readableState,ne=()=>{W.writable||X()},V=k(W)&&g(W)===te&&E(W)===we,Q=R(W,!1),X=()=>{Q=!0,W.destroyed&&(V=!1),!(V&&(!W.readable||te))&&(!te||me)&&C.call(W)},me=x(W,!1),se=()=>{me=!0,W.destroyed&&(V=!1),!(V&&(!W.writable||we))&&(!we||Q)&&C.call(W)},j=q=>{C.call(W,q)},$=b(W),ee=()=>{$=!0;let q=P(W)||v(W);if(q&&typeof q!="boolean")return C.call(W,q);if(te&&!me&&g(W,!0)&&!x(W,!1))return C.call(W,new r);if(we&&!Q&&!R(W,!1))return C.call(W,new r);C.call(W)},he=()=>{$=!0;let q=P(W)||v(W);if(q&&typeof q!="boolean")return C.call(W,q);C.call(W)},pe=()=>{W.req.on("finish",X)};F(W)?(W.on("complete",X),V||W.on("abort",ee),W.req?pe():W.on("request",pe)):we&&!G&&(W.on("end",ne),W.on("close",ne)),!V&&typeof W.aborted=="boolean"&&W.on("aborted",ee),W.on("end",se),W.on("finish",X),J.error!==!1&&W.on("error",j),W.on("close",ee),$?o.nextTick(ee):G!=null&&G.errorEmitted||L!=null&&L.errorEmitted?V||o.nextTick(he):(!te&&(!V||S(W))&&(Q||A(W)===!1)||!we&&(!V||A(W))&&(me||S(W)===!1)||L&&W.req&&W.aborted)&&o.nextTick(he);let be=()=>{C=oe,W.removeListener("aborted",ee),W.removeListener("complete",X),W.removeListener("abort",ee),W.removeListener("request",pe),W.req&&W.req.removeListener("finish",X),W.removeListener("end",ne),W.removeListener("close",ne),W.removeListener("finish",X),W.removeListener("end",se),W.removeListener("error",j),W.removeListener("close",ee)};if(J.signal&&!$){let q=()=>{let ge=C;be(),ge.call(W,new a(void 0,{cause:J.signal.reason}))};if(J.signal.aborted)o.nextTick(q);else{U=U||ze().addAbortListener;let ge=U(J.signal,q),ve=C;C=i((...ae)=>{ge[y](),ve.apply(W,ae)})}}return be}function K(W,J,C){let Y=!1,ye=oe;if(J.signal)if(ye=()=>{Y=!0,C.call(W,new a(void 0,{cause:J.signal.reason}))},J.signal.aborted)o.nextTick(ye);else{U=U||ze().addAbortListener;let we=U(J.signal,ye),G=C;C=i((...L)=>{we[y](),G.apply(W,L)})}let te=(...we)=>{Y||o.nextTick(()=>C.apply(W,we))};return f(W[B].promise,te,te),oe}function re(W,J){var C;let Y=!1;return J===null&&(J=n),(C=J)!==null&&C!==void 0&&C.cleanup&&(d(J.cleanup,"cleanup"),Y=J.cleanup),new m((ye,te)=>{let we=H(W,J,G=>{Y&&we(),G?te(G):ye()})})}t.exports=H,t.exports.finished=re}),Wt=de((u,t)=>{le(),ce(),ue();var o=Rt(),{aggregateTwoErrors:a,codes:{ERR_MULTIPLE_CALLBACK:l},AbortError:e}=Ve(),{Symbol:r}=Ne(),{kIsDestroyed:n,isDestroyed:i,isFinished:s,isServerRequest:c}=pt(),h=r("kDestroy"),d=r("kConstruct");function m(k,B,U){k&&(k.stack,B&&!B.errored&&(B.errored=k),U&&!U.errored&&(U.errored=k))}function f(k,B){let U=this._readableState,F=this._writableState,oe=F||U;return F!=null&&F.destroyed||U!=null&&U.destroyed?(typeof B=="function"&&B(),this):(m(k,F,U),F&&(F.destroyed=!0),U&&(U.destroyed=!0),oe.constructed?y(this,k,B):this.once(h,function(H){y(this,a(H,k),B)}),this)}function y(k,B,U){let F=!1;function oe(H){if(F)return;F=!0;let K=k._readableState,re=k._writableState;m(H,re,K),re&&(re.closed=!0),K&&(K.closed=!0),typeof U=="function"&&U(H),H?o.nextTick(b,k,H):o.nextTick(S,k)}try{k._destroy(B||null,oe)}catch(H){oe(H)}}function b(k,B){g(k,B),S(k)}function S(k){let B=k._readableState,U=k._writableState;U&&(U.closeEmitted=!0),B&&(B.closeEmitted=!0),(U!=null&&U.emitClose||B!=null&&B.emitClose)&&k.emit("close")}function g(k,B){let U=k._readableState,F=k._writableState;F!=null&&F.errorEmitted||U!=null&&U.errorEmitted||(F&&(F.errorEmitted=!0),U&&(U.errorEmitted=!0),k.emit("error",B))}function w(){let k=this._readableState,B=this._writableState;k&&(k.constructed=!0,k.closed=!1,k.closeEmitted=!1,k.destroyed=!1,k.errored=null,k.errorEmitted=!1,k.reading=!1,k.ended=k.readable===!1,k.endEmitted=k.readable===!1),B&&(B.constructed=!0,B.destroyed=!1,B.closed=!1,B.closeEmitted=!1,B.errored=null,B.errorEmitted=!1,B.finalCalled=!1,B.prefinished=!1,B.ended=B.writable===!1,B.ending=B.writable===!1,B.finished=B.writable===!1)}function x(k,B,U){let F=k._readableState,oe=k._writableState;if(oe!=null&&oe.destroyed||F!=null&&F.destroyed)return this;F!=null&&F.autoDestroy||oe!=null&&oe.autoDestroy?k.destroy(B):B&&(B.stack,oe&&!oe.errored&&(oe.errored=B),F&&!F.errored&&(F.errored=B),U?o.nextTick(g,k,B):g(k,B))}function v(k,B){if(typeof k._construct!="function")return;let U=k._readableState,F=k._writableState;U&&(U.constructed=!1),F&&(F.constructed=!1),k.once(d,B),!(k.listenerCount(d)>1)&&o.nextTick(A,k)}function A(k){let B=!1;function U(F){if(B){x(k,F??new l);return}B=!0;let oe=k._readableState,H=k._writableState,K=H||oe;oe&&(oe.constructed=!0),H&&(H.constructed=!0),K.destroyed?k.emit(h,F):F?x(k,F,!0):o.nextTick(E,k)}try{k._construct(F=>{o.nextTick(U,F)})}catch(F){o.nextTick(U,F)}}function E(k){k.emit(d)}function O(k){return k?.setHeader&&typeof k.abort=="function"}function R(k){k.emit("close")}function P(k,B){k.emit("error",B),o.nextTick(R,k)}function M(k,B){!k||i(k)||(!B&&!s(k)&&(B=new e),c(k)?(k.socket=null,k.destroy(B)):O(k)?k.abort():O(k.req)?k.req.abort():typeof k.destroy=="function"?k.destroy(B):typeof k.close=="function"?k.close():B?o.nextTick(P,k,B):o.nextTick(R,k),k.destroyed||(k[n]=!0))}t.exports={construct:v,destroyer:M,destroy:f,undestroy:w,errorOrDestroy:x}}),co=de((u,t)=>{le(),ce(),ue();var{ArrayIsArray:o,ObjectSetPrototypeOf:a}=Ne(),{EventEmitter:l}=(Tt(),Re(_t));function e(n){l.call(this,n)}a(e.prototype,l.prototype),a(e,l),e.prototype.pipe=function(n,i){let s=this;function c(S){n.writable&&n.write(S)===!1&&s.pause&&s.pause()}s.on("data",c);function h(){s.readable&&s.resume&&s.resume()}n.on("drain",h),!n._isStdio&&(!i||i.end!==!1)&&(s.on("end",m),s.on("close",f));let d=!1;function m(){d||(d=!0,n.end())}function f(){d||(d=!0,typeof n.destroy=="function"&&n.destroy())}function y(S){b(),l.listenerCount(this,"error")===0&&this.emit("error",S)}r(s,"error",y),r(n,"error",y);function b(){s.removeListener("data",c),n.removeListener("drain",h),s.removeListener("end",m),s.removeListener("close",f),s.removeListener("error",y),n.removeListener("error",y),s.removeListener("end",b),s.removeListener("close",b),n.removeListener("close",b)}return s.on("end",b),s.on("close",b),n.on("close",b),n.emit("pipe",s),n};function r(n,i,s){if(typeof n.prependListener=="function")return n.prependListener(i,s);!n._events||!n._events[i]?n.on(i,s):o(n._events[i])?n._events[i].unshift(s):n._events[i]=[s,n._events[i]]}t.exports={Stream:e,prependListener:r}}),qr=de((u,t)=>{le(),ce(),ue();var{SymbolDispose:o}=Ne(),{AbortError:a,codes:l}=Ve(),{isNodeStream:e,isWebStream:r,kControllerErrorFunction:n}=pt(),i=St(),{ERR_INVALID_ARG_TYPE:s}=l,c,h=(d,m)=>{if(typeof d!="object"||!("aborted"in d))throw new s(m,"AbortSignal",d)};t.exports.addAbortSignal=function(d,m){if(h(d,"signal"),!e(m)&&!r(m))throw new s("stream",["ReadableStream","WritableStream","Stream"],m);return t.exports.addAbortSignalNoValidate(d,m)},t.exports.addAbortSignalNoValidate=function(d,m){if(typeof d!="object"||!("aborted"in d))return m;let f=e(m)?()=>{m.destroy(new a(void 0,{cause:d.reason}))}:()=>{m[n](new a(void 0,{cause:d.reason}))};if(d.aborted)f();else{c=c||ze().addAbortListener;let y=c(d,f);i(m,y[o])}return m}}),Ou=de((u,t)=>{le(),ce(),ue();var{StringPrototypeSlice:o,SymbolIterator:a,TypedArrayPrototypeSet:l,Uint8Array:e}=Ne(),{Buffer:r}=(Be(),Re(Ue)),{inspect:n}=ze();t.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(i){let s={data:i,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length}unshift(i){let s={data:i,next:this.head};this.length===0&&(this.tail=s),this.head=s,++this.length}shift(){if(this.length===0)return;let i=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,i}clear(){this.head=this.tail=null,this.length=0}join(i){if(this.length===0)return"";let s=this.head,c=""+s.data;for(;(s=s.next)!==null;)c+=i+s.data;return c}concat(i){if(this.length===0)return r.alloc(0);let s=r.allocUnsafe(i>>>0),c=this.head,h=0;for(;c;)l(s,c.data,h),h+=c.data.length,c=c.next;return s}consume(i,s){let c=this.head.data;if(i<c.length){let h=c.slice(0,i);return this.head.data=c.slice(i),h}return i===c.length?this.shift():s?this._getString(i):this._getBuffer(i)}first(){return this.head.data}*[a](){for(let i=this.head;i;i=i.next)yield i.data}_getString(i){let s="",c=this.head,h=0;do{let d=c.data;if(i>d.length)s+=d,i-=d.length;else{i===d.length?(s+=d,++h,c.next?this.head=c.next:this.head=this.tail=null):(s+=o(d,0,i),this.head=c,c.data=o(d,i));break}++h}while((c=c.next)!==null);return this.length-=h,s}_getBuffer(i){let s=r.allocUnsafe(i),c=i,h=this.head,d=0;do{let m=h.data;if(i>m.length)l(s,m,c-i),i-=m.length;else{i===m.length?(l(s,m,c-i),++d,h.next?this.head=h.next:this.head=this.tail=null):(l(s,new e(m.buffer,m.byteOffset,i),c-i),this.head=h,h.data=m.slice(i));break}++d}while((h=h.next)!==null);return this.length-=d,s}[Symbol.for("nodejs.util.inspect.custom")](i,s){return n(this,{...s,depth:0,customInspect:!1})}}}),Kr=de((u,t)=>{le(),ce(),ue();var{MathFloor:o,NumberIsInteger:a}=Ne(),{validateInteger:l}=or(),{ERR_INVALID_ARG_VALUE:e}=Ve().codes,r=16*1024,n=16;function i(d,m,f){return d.highWaterMark!=null?d.highWaterMark:m?d[f]:null}function s(d){return d?n:r}function c(d,m){l(m,"value",0),d?n=m:r=m}function h(d,m,f,y){let b=i(m,y,f);if(b!=null){if(!a(b)||b<0){let S=y?`options.${f}`:"options.highWaterMark";throw new e(S,b)}return o(b)}return s(d.objectMode)}t.exports={getHighWaterMark:h,getDefaultHighWaterMark:s,setDefaultHighWaterMark:c}}),ku=de((u,t)=>{le(),ce(),ue();var o=(Be(),Re(Ue)),a=o.Buffer;function l(r,n){for(var i in r)n[i]=r[i]}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=o:(l(o,u),u.Buffer=e);function e(r,n,i){return a(r,n,i)}e.prototype=Object.create(a.prototype),l(a,e),e.from=function(r,n,i){if(typeof r=="number")throw new TypeError("Argument must not be a number");return a(r,n,i)},e.alloc=function(r,n,i){if(typeof r!="number")throw new TypeError("Argument must be a number");var s=a(r);return n!==void 0?typeof i=="string"?s.fill(n,i):s.fill(n):s.fill(0),s},e.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return a(r)},e.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(r)}}),Pu=de(u=>{le(),ce(),ue();var t=ku().Buffer,o=t.isEncoding||function(g){switch(g=""+g,g&&g.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(g){if(!g)return"utf8";for(var w;;)switch(g){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return g;default:if(w)return;g=(""+g).toLowerCase(),w=!0}}function l(g){var w=a(g);if(typeof w!="string"&&(t.isEncoding===o||!o(g)))throw new Error("Unknown encoding: "+g);return w||g}u.StringDecoder=e;function e(g){this.encoding=l(g);var w;switch(this.encoding){case"utf16le":this.text=d,this.end=m,w=4;break;case"utf8":this.fillLast=s,w=4;break;case"base64":this.text=f,this.end=y,w=3;break;default:this.write=b,this.end=S;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(w)}e.prototype.write=function(g){if(g.length===0)return"";var w,x;if(this.lastNeed){if(w=this.fillLast(g),w===void 0)return"";x=this.lastNeed,this.lastNeed=0}else x=0;return x<g.length?w?w+this.text(g,x):this.text(g,x):w||""},e.prototype.end=h,e.prototype.text=c,e.prototype.fillLast=function(g){if(this.lastNeed<=g.length)return g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,g.length),this.lastNeed-=g.length};function r(g){return g<=127?0:g>>5===6?2:g>>4===14?3:g>>3===30?4:g>>6===2?-1:-2}function n(g,w,x){var v=w.length-1;if(v<x)return 0;var A=r(w[v]);return A>=0?(A>0&&(g.lastNeed=A-1),A):--v<x||A===-2?0:(A=r(w[v]),A>=0?(A>0&&(g.lastNeed=A-2),A):--v<x||A===-2?0:(A=r(w[v]),A>=0?(A>0&&(A===2?A=0:g.lastNeed=A-3),A):0))}function i(g,w,x){if((w[0]&192)!==128)return g.lastNeed=0,"ï¿½";if(g.lastNeed>1&&w.length>1){if((w[1]&192)!==128)return g.lastNeed=1,"ï¿½";if(g.lastNeed>2&&w.length>2&&(w[2]&192)!==128)return g.lastNeed=2,"ï¿½"}}function s(g){var w=this.lastTotal-this.lastNeed,x=i(this,g);if(x!==void 0)return x;if(this.lastNeed<=g.length)return g.copy(this.lastChar,w,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,w,0,g.length),this.lastNeed-=g.length}function c(g,w){var x=n(this,g,w);if(!this.lastNeed)return g.toString("utf8",w);this.lastTotal=x;var v=g.length-(x-this.lastNeed);return g.copy(this.lastChar,0,v),g.toString("utf8",w,v)}function h(g){var w=g&&g.length?this.write(g):"";return this.lastNeed?w+"ï¿½":w}function d(g,w){if((g.length-w)%2===0){var x=g.toString("utf16le",w);if(x){var v=x.charCodeAt(x.length-1);if(v>=55296&&v<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],x.slice(0,-1)}return x}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",w,g.length-1)}function m(g){var w=g&&g.length?this.write(g):"";if(this.lastNeed){var x=this.lastTotal-this.lastNeed;return w+this.lastChar.toString("utf16le",0,x)}return w}function f(g,w){var x=(g.length-w)%3;return x===0?g.toString("base64",w):(this.lastNeed=3-x,this.lastTotal=3,x===1?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",w,g.length-x))}function y(g){var w=g&&g.length?this.write(g):"";return this.lastNeed?w+this.lastChar.toString("base64",0,3-this.lastNeed):w}function b(g){return g.toString(this.encoding)}function S(g){return g&&g.length?this.write(g):""}}),va=de((u,t)=>{le(),ce(),ue();var o=Rt(),{PromisePrototypeThen:a,SymbolAsyncIterator:l,SymbolIterator:e}=Ne(),{Buffer:r}=(Be(),Re(Ue)),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_NULL_VALUES:i}=Ve().codes;function s(c,h,d){let m;if(typeof h=="string"||h instanceof r)return new c({objectMode:!0,...d,read(){this.push(h),this.push(null)}});let f;if(h&&h[l])f=!0,m=h[l]();else if(h&&h[e])f=!1,m=h[e]();else throw new n("iterable",["Iterable"],h);let y=new c({objectMode:!0,highWaterMark:1,...d}),b=!1;y._read=function(){b||(b=!0,g())},y._destroy=function(w,x){a(S(w),()=>o.nextTick(x,w),v=>o.nextTick(x,v||w))};async function S(w){let x=w!=null,v=typeof m.throw=="function";if(x&&v){let{value:A,done:E}=await m.throw(w);if(await A,E)return}if(typeof m.return=="function"){let{value:A}=await m.return();await A}}async function g(){for(;;){try{let{value:w,done:x}=f?await m.next():m.next();if(x)y.push(null);else{let v=w&&typeof w.then=="function"?await w:w;if(v===null)throw b=!1,new i;if(y.push(v))continue;b=!1}}catch(w){y.destroy(w)}break}}return y}t.exports=s}),Vr=de((u,t)=>{le(),ce(),ue();var o=Rt(),{ArrayPrototypeIndexOf:a,NumberIsInteger:l,NumberIsNaN:e,NumberParseInt:r,ObjectDefineProperties:n,ObjectKeys:i,ObjectSetPrototypeOf:s,Promise:c,SafeSet:h,SymbolAsyncDispose:d,SymbolAsyncIterator:m,Symbol:f}=Ne();t.exports=ae,ae.ReadableState=ve;var{EventEmitter:y}=(Tt(),Re(_t)),{Stream:b,prependListener:S}=co(),{Buffer:g}=(Be(),Re(Ue)),{addAbortSignal:w}=qr(),x=St(),v=ze().debuglog("stream",T=>{v=T}),A=Ou(),E=Wt(),{getHighWaterMark:O,getDefaultHighWaterMark:R}=Kr(),{aggregateTwoErrors:P,codes:{ERR_INVALID_ARG_TYPE:M,ERR_METHOD_NOT_IMPLEMENTED:k,ERR_OUT_OF_RANGE:B,ERR_STREAM_PUSH_AFTER_EOF:U,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:F},AbortError:oe}=Ve(),{validateObject:H}=or(),K=f("kPaused"),{StringDecoder:re}=Pu(),W=va();s(ae.prototype,b.prototype),s(ae,b);var J=()=>{},{errorOrDestroy:C}=E,Y=1,ye=2,te=4,we=8,G=16,L=32,ne=64,V=128,Q=256,X=512,me=1024,se=2048,j=4096,$=8192,ee=16384,he=32768,pe=65536,be=1<<17,q=1<<18;function ge(T){return{enumerable:!1,get(){return(this.state&T)!==0},set(N){N?this.state|=T:this.state&=~T}}}n(ve.prototype,{objectMode:ge(Y),ended:ge(ye),endEmitted:ge(te),reading:ge(we),constructed:ge(G),sync:ge(L),needReadable:ge(ne),emittedReadable:ge(V),readableListening:ge(Q),resumeScheduled:ge(X),errorEmitted:ge(me),emitClose:ge(se),autoDestroy:ge(j),destroyed:ge($),closed:ge(ee),closeEmitted:ge(he),multiAwaitDrain:ge(pe),readingMore:ge(be),dataEmitted:ge(q)});function ve(T,N,_e){typeof _e!="boolean"&&(_e=N instanceof ft()),this.state=se|j|G|L,T&&T.objectMode&&(this.state|=Y),_e&&T&&T.readableObjectMode&&(this.state|=Y),this.highWaterMark=T?O(this,T,"readableHighWaterMark",_e):R(!1),this.buffer=new A,this.length=0,this.pipes=[],this.flowing=null,this[K]=null,T&&T.emitClose===!1&&(this.state&=~se),T&&T.autoDestroy===!1&&(this.state&=~j),this.errored=null,this.defaultEncoding=T&&T.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,T&&T.encoding&&(this.decoder=new re(T.encoding),this.encoding=T.encoding)}function ae(T){if(!(this instanceof ae))return new ae(T);let N=this instanceof ft();this._readableState=new ve(T,this,N),T&&(typeof T.read=="function"&&(this._read=T.read),typeof T.destroy=="function"&&(this._destroy=T.destroy),typeof T.construct=="function"&&(this._construct=T.construct),T.signal&&!N&&w(T.signal,this)),b.call(this,T),E.construct(this,()=>{this._readableState.needReadable&&z(this,this._readableState)})}ae.prototype.destroy=E.destroy,ae.prototype._undestroy=E.undestroy,ae.prototype._destroy=function(T,N){N(T)},ae.prototype[y.captureRejectionSymbol]=function(T){this.destroy(T)},ae.prototype[d]=function(){let T;return this.destroyed||(T=this.readableEnded?null:new oe,this.destroy(T)),new c((N,_e)=>x(this,Ee=>Ee&&Ee!==T?_e(Ee):N(null)))},ae.prototype.push=function(T,N){return Pe(this,T,N,!1)},ae.prototype.unshift=function(T,N){return Pe(this,T,N,!0)};function Pe(T,N,_e,Ee){v("readableAddChunk",N);let xe=T._readableState,Me;if((xe.state&Y)===0&&(typeof N=="string"?(_e=_e||xe.defaultEncoding,xe.encoding!==_e&&(Ee&&xe.encoding?N=g.from(N,_e).toString(xe.encoding):(N=g.from(N,_e),_e=""))):N instanceof g?_e="":b._isUint8Array(N)?(N=b._uint8ArrayToBuffer(N),_e=""):N!=null&&(Me=new M("chunk",["string","Buffer","Uint8Array"],N))),Me)C(T,Me);else if(N===null)xe.state&=~we,Z(T,xe);else if((xe.state&Y)!==0||N&&N.length>0)if(Ee)if((xe.state&te)!==0)C(T,new F);else{if(xe.destroyed||xe.errored)return!1;p(T,xe,N,!0)}else if(xe.ended)C(T,new U);else{if(xe.destroyed||xe.errored)return!1;xe.state&=~we,xe.decoder&&!_e?(N=xe.decoder.write(N),xe.objectMode||N.length!==0?p(T,xe,N,!1):z(T,xe)):p(T,xe,N,!1)}else Ee||(xe.state&=~we,z(T,xe));return!xe.ended&&(xe.length<xe.highWaterMark||xe.length===0)}function p(T,N,_e,Ee){N.flowing&&N.length===0&&!N.sync&&T.listenerCount("data")>0?((N.state&pe)!==0?N.awaitDrainWriters.clear():N.awaitDrainWriters=null,N.dataEmitted=!0,T.emit("data",_e)):(N.length+=N.objectMode?1:_e.length,Ee?N.buffer.unshift(_e):N.buffer.push(_e),(N.state&ne)!==0&&fe(T)),z(T,N)}ae.prototype.isPaused=function(){let T=this._readableState;return T[K]===!0||T.flowing===!1},ae.prototype.setEncoding=function(T){let N=new re(T);this._readableState.decoder=N,this._readableState.encoding=this._readableState.decoder.encoding;let _e=this._readableState.buffer,Ee="";for(let xe of _e)Ee+=N.write(xe);return _e.clear(),Ee!==""&&_e.push(Ee),this._readableState.length=Ee.length,this};var _=1073741824;function I(T){if(T>_)throw new B("size","<= 1GiB",T);return T--,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T++,T}function D(T,N){return T<=0||N.length===0&&N.ended?0:(N.state&Y)!==0?1:e(T)?N.flowing&&N.length?N.buffer.first().length:N.length:T<=N.length?T:N.ended?N.length:0}ae.prototype.read=function(T){v("read",T),T===void 0?T=NaN:l(T)||(T=r(T,10));let N=this._readableState,_e=T;if(T>N.highWaterMark&&(N.highWaterMark=I(T)),T!==0&&(N.state&=~V),T===0&&N.needReadable&&((N.highWaterMark!==0?N.length>=N.highWaterMark:N.length>0)||N.ended))return v("read: emitReadable",N.length,N.ended),N.length===0&&N.ended?et(this):fe(this),null;if(T=D(T,N),T===0&&N.ended)return N.length===0&&et(this),null;let Ee=(N.state&ne)!==0;if(v("need readable",Ee),(N.length===0||N.length-T<N.highWaterMark)&&(Ee=!0,v("length less than watermark",Ee)),N.ended||N.reading||N.destroyed||N.errored||!N.constructed)Ee=!1,v("reading, ended or constructing",Ee);else if(Ee){v("do read"),N.state|=we|L,N.length===0&&(N.state|=ne);try{this._read(N.highWaterMark)}catch(Me){C(this,Me)}N.state&=~L,N.reading||(T=D(_e,N))}let xe;return T>0?xe=jt(T,N):xe=null,xe===null?(N.needReadable=N.length<=N.highWaterMark,T=0):(N.length-=T,N.multiAwaitDrain?N.awaitDrainWriters.clear():N.awaitDrainWriters=null),N.length===0&&(N.ended||(N.needReadable=!0),_e!==T&&N.ended&&et(this)),xe!==null&&!N.errorEmitted&&!N.closeEmitted&&(N.dataEmitted=!0,this.emit("data",xe)),xe};function Z(T,N){if(v("onEofChunk"),!N.ended){if(N.decoder){let _e=N.decoder.end();_e&&_e.length&&(N.buffer.push(_e),N.length+=N.objectMode?1:_e.length)}N.ended=!0,N.sync?fe(T):(N.needReadable=!1,N.emittedReadable=!0,Se(T))}}function fe(T){let N=T._readableState;v("emitReadable",N.needReadable,N.emittedReadable),N.needReadable=!1,N.emittedReadable||(v("emitReadable",N.flowing),N.emittedReadable=!0,o.nextTick(Se,T))}function Se(T){let N=T._readableState;v("emitReadable_",N.destroyed,N.length,N.ended),!N.destroyed&&!N.errored&&(N.length||N.ended)&&(T.emit("readable"),N.emittedReadable=!1),N.needReadable=!N.flowing&&!N.ended&&N.length<=N.highWaterMark,Xe(T)}function z(T,N){!N.readingMore&&N.constructed&&(N.readingMore=!0,o.nextTick(ie,T,N))}function ie(T,N){for(;!N.reading&&!N.ended&&(N.length<N.highWaterMark||N.flowing&&N.length===0);){let _e=N.length;if(v("maybeReadMore read 0"),T.read(0),_e===N.length)break}N.readingMore=!1}ae.prototype._read=function(T){throw new k("_read()")},ae.prototype.pipe=function(T,N){let _e=this,Ee=this._readableState;Ee.pipes.length===1&&(Ee.multiAwaitDrain||(Ee.multiAwaitDrain=!0,Ee.awaitDrainWriters=new h(Ee.awaitDrainWriters?[Ee.awaitDrainWriters]:[]))),Ee.pipes.push(T),v("pipe count=%d opts=%j",Ee.pipes.length,N);let xe=(!N||N.end!==!1)&&T!==o.stdout&&T!==o.stderr?Ke:xt;Ee.endEmitted?o.nextTick(xe):_e.once("end",xe),T.on("unpipe",Me);function Me(rt,st){v("onunpipe"),rt===_e&&st&&st.hasUnpiped===!1&&(st.hasUnpiped=!0,zt())}function Ke(){v("onend"),T.end()}let Ye,Vt=!1;function zt(){v("cleanup"),T.removeListener("close",tt),T.removeListener("finish",yt),Ye&&T.removeListener("drain",Ye),T.removeListener("error",Et),T.removeListener("unpipe",Me),_e.removeListener("end",Ke),_e.removeListener("end",xt),_e.removeListener("data",lr),Vt=!0,Ye&&Ee.awaitDrainWriters&&(!T._writableState||T._writableState.needDrain)&&Ye()}function Ht(){Vt||(Ee.pipes.length===1&&Ee.pipes[0]===T?(v("false write response, pause",0),Ee.awaitDrainWriters=T,Ee.multiAwaitDrain=!1):Ee.pipes.length>1&&Ee.pipes.includes(T)&&(v("false write response, pause",Ee.awaitDrainWriters.size),Ee.awaitDrainWriters.add(T)),_e.pause()),Ye||(Ye=Ae(_e,T),T.on("drain",Ye))}_e.on("data",lr);function lr(rt){v("ondata");let st=T.write(rt);v("dest.write",st),st===!1&&Ht()}function Et(rt){if(v("onerror",rt),xt(),T.removeListener("error",Et),T.listenerCount("error")===0){let st=T._writableState||T._readableState;st&&!st.errorEmitted?C(T,rt):T.emit("error",rt)}}S(T,"error",Et);function tt(){T.removeListener("finish",yt),xt()}T.once("close",tt);function yt(){v("onfinish"),T.removeListener("close",tt),xt()}T.once("finish",yt);function xt(){v("unpipe"),_e.unpipe(T)}return T.emit("pipe",_e),T.writableNeedDrain===!0?Ht():Ee.flowing||(v("pipe resume"),_e.resume()),T};function Ae(T,N){return function(){let _e=T._readableState;_e.awaitDrainWriters===N?(v("pipeOnDrain",1),_e.awaitDrainWriters=null):_e.multiAwaitDrain&&(v("pipeOnDrain",_e.awaitDrainWriters.size),_e.awaitDrainWriters.delete(N)),(!_e.awaitDrainWriters||_e.awaitDrainWriters.size===0)&&T.listenerCount("data")&&T.resume()}}ae.prototype.unpipe=function(T){let N=this._readableState,_e={hasUnpiped:!1};if(N.pipes.length===0)return this;if(!T){let xe=N.pipes;N.pipes=[],this.pause();for(let Me=0;Me<xe.length;Me++)xe[Me].emit("unpipe",this,{hasUnpiped:!1});return this}let Ee=a(N.pipes,T);return Ee===-1?this:(N.pipes.splice(Ee,1),N.pipes.length===0&&this.pause(),T.emit("unpipe",this,_e),this)},ae.prototype.on=function(T,N){let _e=b.prototype.on.call(this,T,N),Ee=this._readableState;return T==="data"?(Ee.readableListening=this.listenerCount("readable")>0,Ee.flowing!==!1&&this.resume()):T==="readable"&&!Ee.endEmitted&&!Ee.readableListening&&(Ee.readableListening=Ee.needReadable=!0,Ee.flowing=!1,Ee.emittedReadable=!1,v("on readable",Ee.length,Ee.reading),Ee.length?fe(this):Ee.reading||o.nextTick(ke,this)),_e},ae.prototype.addListener=ae.prototype.on,ae.prototype.removeListener=function(T,N){let _e=b.prototype.removeListener.call(this,T,N);return T==="readable"&&o.nextTick(Ie,this),_e},ae.prototype.off=ae.prototype.removeListener,ae.prototype.removeAllListeners=function(T){let N=b.prototype.removeAllListeners.apply(this,arguments);return(T==="readable"||T===void 0)&&o.nextTick(Ie,this),N};function Ie(T){let N=T._readableState;N.readableListening=T.listenerCount("readable")>0,N.resumeScheduled&&N[K]===!1?N.flowing=!0:T.listenerCount("data")>0?T.resume():N.readableListening||(N.flowing=null)}function ke(T){v("readable nexttick read 0"),T.read(0)}ae.prototype.resume=function(){let T=this._readableState;return T.flowing||(v("resume"),T.flowing=!T.readableListening,Te(this,T)),T[K]=!1,this};function Te(T,N){N.resumeScheduled||(N.resumeScheduled=!0,o.nextTick(Je,T,N))}function Je(T,N){v("resume",N.reading),N.reading||T.read(0),N.resumeScheduled=!1,T.emit("resume"),Xe(T),N.flowing&&!N.reading&&T.read(0)}ae.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[K]=!0,this};function Xe(T){let N=T._readableState;for(v("flow",N.flowing);N.flowing&&T.read()!==null;);}ae.prototype.wrap=function(T){let N=!1;T.on("data",Ee=>{!this.push(Ee)&&T.pause&&(N=!0,T.pause())}),T.on("end",()=>{this.push(null)}),T.on("error",Ee=>{C(this,Ee)}),T.on("close",()=>{this.destroy()}),T.on("destroy",()=>{this.destroy()}),this._read=()=>{N&&T.resume&&(N=!1,T.resume())};let _e=i(T);for(let Ee=1;Ee<_e.length;Ee++){let xe=_e[Ee];this[xe]===void 0&&typeof T[xe]=="function"&&(this[xe]=T[xe].bind(T))}return this},ae.prototype[m]=function(){return De(this)},ae.prototype.iterator=function(T){return T!==void 0&&H(T,"options"),De(this,T)};function De(T,N){typeof T.read!="function"&&(T=ae.wrap(T,{objectMode:!0}));let _e=Ze(T,N);return _e.stream=T,_e}async function*Ze(T,N){let _e=J;function Ee(Ke){this===T?(_e(),_e=J):_e=Ke}T.on("readable",Ee);let xe,Me=x(T,{writable:!1},Ke=>{xe=Ke?P(xe,Ke):null,_e(),_e=J});try{for(;;){let Ke=T.destroyed?null:T.read();if(Ke!==null)yield Ke;else{if(xe)throw xe;if(xe===null)return;await new c(Ee)}}}catch(Ke){throw xe=P(xe,Ke),xe}finally{(xe||N?.destroyOnReturn!==!1)&&(xe===void 0||T._readableState.autoDestroy)?E.destroyer(T,null):(T.off("readable",Ee),Me())}}n(ae.prototype,{readable:{__proto__:null,get(){let T=this._readableState;return!!T&&T.readable!==!1&&!T.destroyed&&!T.errorEmitted&&!T.endEmitted},set(T){this._readableState&&(this._readableState.readable=!!T)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(T){this._readableState&&(this._readableState.flowing=T)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(T){this._readableState&&(this._readableState.destroyed=T)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),n(ve.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[K]!==!1},set(T){this[K]=!!T}}}),ae._fromList=jt;function jt(T,N){if(N.length===0)return null;let _e;return N.objectMode?_e=N.buffer.shift():!T||T>=N.length?(N.decoder?_e=N.buffer.join(""):N.buffer.length===1?_e=N.buffer.first():_e=N.buffer.concat(N.length),N.buffer.clear()):_e=N.buffer.consume(T,N.decoder),_e}function et(T){let N=T._readableState;v("endReadable",N.endEmitted),N.endEmitted||(N.ended=!0,o.nextTick(Qe,N,T))}function Qe(T,N){if(v("endReadableNT",T.endEmitted,T.length),!T.errored&&!T.closeEmitted&&!T.endEmitted&&T.length===0){if(T.endEmitted=!0,N.emit("end"),N.writable&&N.allowHalfOpen===!1)o.nextTick(ar,N);else if(T.autoDestroy){let _e=N._writableState;(!_e||_e.autoDestroy&&(_e.finished||_e.writable===!1))&&N.destroy()}}}function ar(T){T.writable&&!T.writableEnded&&!T.destroyed&&T.end()}ae.from=function(T,N){return W(ae,T,N)};var Nt;function Kt(){return Nt===void 0&&(Nt={}),Nt}ae.fromWeb=function(T,N){return Kt().newStreamReadableFromReadableStream(T,N)},ae.toWeb=function(T,N){return Kt().newReadableStreamFromStreamReadable(T,N)},ae.wrap=function(T,N){var _e,Ee;return new ae({objectMode:(_e=(Ee=T.readableObjectMode)!==null&&Ee!==void 0?Ee:T.objectMode)!==null&&_e!==void 0?_e:!0,...N,destroy(xe,Me){E.destroyer(T,xe),Me(xe)}}).wrap(T)}}),fo=de((u,t)=>{le(),ce(),ue();var o=Rt(),{ArrayPrototypeSlice:a,Error:l,FunctionPrototypeSymbolHasInstance:e,ObjectDefineProperty:r,ObjectDefineProperties:n,ObjectSetPrototypeOf:i,StringPrototypeToLowerCase:s,Symbol:c,SymbolHasInstance:h}=Ne();t.exports=H,H.WritableState=F;var{EventEmitter:d}=(Tt(),Re(_t)),m=co().Stream,{Buffer:f}=(Be(),Re(Ue)),y=Wt(),{addAbortSignal:b}=qr(),{getHighWaterMark:S,getDefaultHighWaterMark:g}=Kr(),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:x,ERR_MULTIPLE_CALLBACK:v,ERR_STREAM_CANNOT_PIPE:A,ERR_STREAM_DESTROYED:E,ERR_STREAM_ALREADY_FINISHED:O,ERR_STREAM_NULL_VALUES:R,ERR_STREAM_WRITE_AFTER_END:P,ERR_UNKNOWN_ENCODING:M}=Ve().codes,{errorOrDestroy:k}=y;i(H.prototype,m.prototype),i(H,m);function B(){}var U=c("kOnFinished");function F(j,$,ee){typeof ee!="boolean"&&(ee=$ instanceof ft()),this.objectMode=!!(j&&j.objectMode),ee&&(this.objectMode=this.objectMode||!!(j&&j.writableObjectMode)),this.highWaterMark=j?S(this,j,"writableHighWaterMark",ee):g(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let he=!!(j&&j.decodeStrings===!1);this.decodeStrings=!he,this.defaultEncoding=j&&j.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=C.bind(void 0,$),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,oe(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!j||j.emitClose!==!1,this.autoDestroy=!j||j.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[U]=[]}function oe(j){j.buffered=[],j.bufferedIndex=0,j.allBuffers=!0,j.allNoop=!0}F.prototype.getBuffer=function(){return a(this.buffered,this.bufferedIndex)},r(F.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function H(j){let $=this instanceof ft();if(!$&&!e(H,this))return new H(j);this._writableState=new F(j,this,$),j&&(typeof j.write=="function"&&(this._write=j.write),typeof j.writev=="function"&&(this._writev=j.writev),typeof j.destroy=="function"&&(this._destroy=j.destroy),typeof j.final=="function"&&(this._final=j.final),typeof j.construct=="function"&&(this._construct=j.construct),j.signal&&b(j.signal,this)),m.call(this,j),y.construct(this,()=>{let ee=this._writableState;ee.writing||we(this,ee),V(this,ee)})}r(H,h,{__proto__:null,value:function(j){return e(this,j)?!0:this!==H?!1:j&&j._writableState instanceof F}}),H.prototype.pipe=function(){k(this,new A)};function K(j,$,ee,he){let pe=j._writableState;if(typeof ee=="function")he=ee,ee=pe.defaultEncoding;else{if(!ee)ee=pe.defaultEncoding;else if(ee!=="buffer"&&!f.isEncoding(ee))throw new M(ee);typeof he!="function"&&(he=B)}if($===null)throw new R;if(!pe.objectMode)if(typeof $=="string")pe.decodeStrings!==!1&&($=f.from($,ee),ee="buffer");else if($ instanceof f)ee="buffer";else if(m._isUint8Array($))$=m._uint8ArrayToBuffer($),ee="buffer";else throw new w("chunk",["string","Buffer","Uint8Array"],$);let be;return pe.ending?be=new P:pe.destroyed&&(be=new E("write")),be?(o.nextTick(he,be),k(j,be,!0),be):(pe.pendingcb++,re(j,pe,$,ee,he))}H.prototype.write=function(j,$,ee){return K(this,j,$,ee)===!0},H.prototype.cork=function(){this._writableState.corked++},H.prototype.uncork=function(){let j=this._writableState;j.corked&&(j.corked--,j.writing||we(this,j))},H.prototype.setDefaultEncoding=function(j){if(typeof j=="string"&&(j=s(j)),!f.isEncoding(j))throw new M(j);return this._writableState.defaultEncoding=j,this};function re(j,$,ee,he,pe){let be=$.objectMode?1:ee.length;$.length+=be;let q=$.length<$.highWaterMark;return q||($.needDrain=!0),$.writing||$.corked||$.errored||!$.constructed?($.buffered.push({chunk:ee,encoding:he,callback:pe}),$.allBuffers&&he!=="buffer"&&($.allBuffers=!1),$.allNoop&&pe!==B&&($.allNoop=!1)):($.writelen=be,$.writecb=pe,$.writing=!0,$.sync=!0,j._write(ee,he,$.onwrite),$.sync=!1),q&&!$.errored&&!$.destroyed}function W(j,$,ee,he,pe,be,q){$.writelen=he,$.writecb=q,$.writing=!0,$.sync=!0,$.destroyed?$.onwrite(new E("write")):ee?j._writev(pe,$.onwrite):j._write(pe,be,$.onwrite),$.sync=!1}function J(j,$,ee,he){--$.pendingcb,he(ee),te($),k(j,ee)}function C(j,$){let ee=j._writableState,he=ee.sync,pe=ee.writecb;if(typeof pe!="function"){k(j,new v);return}ee.writing=!1,ee.writecb=null,ee.length-=ee.writelen,ee.writelen=0,$?($.stack,ee.errored||(ee.errored=$),j._readableState&&!j._readableState.errored&&(j._readableState.errored=$),he?o.nextTick(J,j,ee,$,pe):J(j,ee,$,pe)):(ee.buffered.length>ee.bufferedIndex&&we(j,ee),he?ee.afterWriteTickInfo!==null&&ee.afterWriteTickInfo.cb===pe?ee.afterWriteTickInfo.count++:(ee.afterWriteTickInfo={count:1,cb:pe,stream:j,state:ee},o.nextTick(Y,ee.afterWriteTickInfo)):ye(j,ee,1,pe))}function Y({stream:j,state:$,count:ee,cb:he}){return $.afterWriteTickInfo=null,ye(j,$,ee,he)}function ye(j,$,ee,he){for(!$.ending&&!j.destroyed&&$.length===0&&$.needDrain&&($.needDrain=!1,j.emit("drain"));ee-- >0;)$.pendingcb--,he();$.destroyed&&te($),V(j,$)}function te(j){if(j.writing)return;for(let pe=j.bufferedIndex;pe<j.buffered.length;++pe){var $;let{chunk:be,callback:q}=j.buffered[pe],ge=j.objectMode?1:be.length;j.length-=ge,q(($=j.errored)!==null&&$!==void 0?$:new E("write"))}let ee=j[U].splice(0);for(let pe=0;pe<ee.length;pe++){var he;ee[pe]((he=j.errored)!==null&&he!==void 0?he:new E("end"))}oe(j)}function we(j,$){if($.corked||$.bufferProcessing||$.destroyed||!$.constructed)return;let{buffered:ee,bufferedIndex:he,objectMode:pe}=$,be=ee.length-he;if(!be)return;let q=he;if($.bufferProcessing=!0,be>1&&j._writev){$.pendingcb-=be-1;let ge=$.allNoop?B:ae=>{for(let Pe=q;Pe<ee.length;++Pe)ee[Pe].callback(ae)},ve=$.allNoop&&q===0?ee:a(ee,q);ve.allBuffers=$.allBuffers,W(j,$,!0,$.length,ve,"",ge),oe($)}else{do{let{chunk:ge,encoding:ve,callback:ae}=ee[q];ee[q++]=null;let Pe=pe?1:ge.length;W(j,$,!1,Pe,ge,ve,ae)}while(q<ee.length&&!$.writing);q===ee.length?oe($):q>256?(ee.splice(0,q),$.bufferedIndex=0):$.bufferedIndex=q}$.bufferProcessing=!1}H.prototype._write=function(j,$,ee){if(this._writev)this._writev([{chunk:j,encoding:$}],ee);else throw new x("_write()")},H.prototype._writev=null,H.prototype.end=function(j,$,ee){let he=this._writableState;typeof j=="function"?(ee=j,j=null,$=null):typeof $=="function"&&(ee=$,$=null);let pe;if(j!=null){let be=K(this,j,$);be instanceof l&&(pe=be)}return he.corked&&(he.corked=1,this.uncork()),pe||(!he.errored&&!he.ending?(he.ending=!0,V(this,he,!0),he.ended=!0):he.finished?pe=new O("end"):he.destroyed&&(pe=new E("end"))),typeof ee=="function"&&(pe||he.finished?o.nextTick(ee,pe):he[U].push(ee)),this};function G(j){return j.ending&&!j.destroyed&&j.constructed&&j.length===0&&!j.errored&&j.buffered.length===0&&!j.finished&&!j.writing&&!j.errorEmitted&&!j.closeEmitted}function L(j,$){let ee=!1;function he(pe){if(ee){k(j,pe??v());return}if(ee=!0,$.pendingcb--,pe){let be=$[U].splice(0);for(let q=0;q<be.length;q++)be[q](pe);k(j,pe,$.sync)}else G($)&&($.prefinished=!0,j.emit("prefinish"),$.pendingcb++,o.nextTick(Q,j,$))}$.sync=!0,$.pendingcb++;try{j._final(he)}catch(pe){he(pe)}$.sync=!1}function ne(j,$){!$.prefinished&&!$.finalCalled&&(typeof j._final=="function"&&!$.destroyed?($.finalCalled=!0,L(j,$)):($.prefinished=!0,j.emit("prefinish")))}function V(j,$,ee){G($)&&(ne(j,$),$.pendingcb===0&&(ee?($.pendingcb++,o.nextTick((he,pe)=>{G(pe)?Q(he,pe):pe.pendingcb--},j,$)):G($)&&($.pendingcb++,Q(j,$))))}function Q(j,$){$.pendingcb--,$.finished=!0;let ee=$[U].splice(0);for(let he=0;he<ee.length;he++)ee[he]();if(j.emit("finish"),$.autoDestroy){let he=j._readableState;(!he||he.autoDestroy&&(he.endEmitted||he.readable===!1))&&j.destroy()}}n(H.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(j){this._writableState&&(this._writableState.destroyed=j)}},writable:{__proto__:null,get(){let j=this._writableState;return!!j&&j.writable!==!1&&!j.destroyed&&!j.errored&&!j.ending&&!j.ended},set(j){this._writableState&&(this._writableState.writable=!!j)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let j=this._writableState;return j?!j.destroyed&&!j.ending&&j.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var X=y.destroy;H.prototype.destroy=function(j,$){let ee=this._writableState;return!ee.destroyed&&(ee.bufferedIndex<ee.buffered.length||ee[U].length)&&o.nextTick(te,ee),X.call(this,j,$),this},H.prototype._undestroy=y.undestroy,H.prototype._destroy=function(j,$){$(j)},H.prototype[d.captureRejectionSymbol]=function(j){this.destroy(j)};var me;function se(){return me===void 0&&(me={}),me}H.fromWeb=function(j,$){return se().newStreamWritableFromWritableStream(j,$)},H.toWeb=function(j){return se().newWritableStreamFromStreamWritable(j)}}),Tu=de((u,t)=>{le(),ce(),ue();var o=Rt(),a=(Be(),Re(Ue)),{isReadable:l,isWritable:e,isIterable:r,isNodeStream:n,isReadableNodeStream:i,isWritableNodeStream:s,isDuplexNodeStream:c,isReadableStream:h,isWritableStream:d}=pt(),m=St(),{AbortError:f,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:b}}=Ve(),{destroyer:S}=Wt(),g=ft(),w=Vr(),x=fo(),{createDeferredPromise:v}=ze(),A=va(),E=globalThis.Blob||a.Blob,O=typeof E<"u"?function(U){return U instanceof E}:function(U){return!1},R=globalThis.AbortController||ir().AbortController,{FunctionPrototypeCall:P}=Ne(),M=class extends g{constructor(U){super(U),U?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),U?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};t.exports=function U(F,oe){if(c(F))return F;if(i(F))return B({readable:F});if(s(F))return B({writable:F});if(n(F))return B({writable:!1,readable:!1});if(h(F))return B({readable:w.fromWeb(F)});if(d(F))return B({writable:x.fromWeb(F)});if(typeof F=="function"){let{value:K,write:re,final:W,destroy:J}=k(F);if(r(K))return A(M,K,{objectMode:!0,write:re,final:W,destroy:J});let C=K?.then;if(typeof C=="function"){let Y,ye=P(C,K,te=>{if(te!=null)throw new b("nully","body",te)},te=>{S(Y,te)});return Y=new M({objectMode:!0,readable:!1,write:re,final(te){W(async()=>{try{await ye,o.nextTick(te,null)}catch(we){o.nextTick(te,we)}})},destroy:J})}throw new b("Iterable, AsyncIterable or AsyncFunction",oe,K)}if(O(F))return U(F.arrayBuffer());if(r(F))return A(M,F,{objectMode:!0,writable:!1});if(h(F?.readable)&&d(F?.writable))return M.fromWeb(F);if(typeof F?.writable=="object"||typeof F?.readable=="object"){let K=F!=null&&F.readable?i(F?.readable)?F?.readable:U(F.readable):void 0,re=F!=null&&F.writable?s(F?.writable)?F?.writable:U(F.writable):void 0;return B({readable:K,writable:re})}let H=F?.then;if(typeof H=="function"){let K;return P(H,F,re=>{re!=null&&K.push(re),K.push(null)},re=>{S(K,re)}),K=new M({objectMode:!0,writable:!1,read(){}})}throw new y(oe,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],F)};function k(U){let{promise:F,resolve:oe}=v(),H=new R,K=H.signal;return{value:U((async function*(){for(;;){let re=F;F=null;let{chunk:W,done:J,cb:C}=await re;if(o.nextTick(C),J)return;if(K.aborted)throw new f(void 0,{cause:K.reason});({promise:F,resolve:oe}=v()),yield W}})(),{signal:K}),write(re,W,J){let C=oe;oe=null,C({chunk:re,done:!1,cb:J})},final(re){let W=oe;oe=null,W({done:!0,cb:re})},destroy(re,W){H.abort(),W(re)}}}function B(U){let F=U.readable&&typeof U.readable.read!="function"?w.wrap(U.readable):U.readable,oe=U.writable,H=!!l(F),K=!!e(oe),re,W,J,C,Y;function ye(te){let we=C;C=null,we?we(te):te&&Y.destroy(te)}return Y=new M({readableObjectMode:!!(F!=null&&F.readableObjectMode),writableObjectMode:!!(oe!=null&&oe.writableObjectMode),readable:H,writable:K}),K&&(m(oe,te=>{K=!1,te&&S(F,te),ye(te)}),Y._write=function(te,we,G){oe.write(te,we)?G():re=G},Y._final=function(te){oe.end(),W=te},oe.on("drain",function(){if(re){let te=re;re=null,te()}}),oe.on("finish",function(){if(W){let te=W;W=null,te()}})),H&&(m(F,te=>{H=!1,te&&S(F,te),ye(te)}),F.on("readable",function(){if(J){let te=J;J=null,te()}}),F.on("end",function(){Y.push(null)}),Y._read=function(){for(;;){let te=F.read();if(te===null){J=Y._read;return}if(!Y.push(te))return}}),Y._destroy=function(te,we){!te&&C!==null&&(te=new f),J=null,re=null,W=null,C===null?we(te):(C=we,S(oe,te),S(F,te))},Y}}),ft=de((u,t)=>{le(),ce(),ue();var{ObjectDefineProperties:o,ObjectGetOwnPropertyDescriptor:a,ObjectKeys:l,ObjectSetPrototypeOf:e}=Ne();t.exports=i;var r=Vr(),n=fo();e(i.prototype,r.prototype),e(i,r);{let d=l(n.prototype);for(let m=0;m<d.length;m++){let f=d[m];i.prototype[f]||(i.prototype[f]=n.prototype[f])}}function i(d){if(!(this instanceof i))return new i(d);r.call(this,d),n.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}o(i.prototype,{writable:{__proto__:null,...a(n.prototype,"writable")},writableHighWaterMark:{__proto__:null,...a(n.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...a(n.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...a(n.prototype,"writableBuffer")},writableLength:{__proto__:null,...a(n.prototype,"writableLength")},writableFinished:{__proto__:null,...a(n.prototype,"writableFinished")},writableCorked:{__proto__:null,...a(n.prototype,"writableCorked")},writableEnded:{__proto__:null,...a(n.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...a(n.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});var s;function c(){return s===void 0&&(s={}),s}i.fromWeb=function(d,m){return c().newStreamDuplexFromReadableWritablePair(d,m)},i.toWeb=function(d){return c().newReadableWritablePairFromDuplex(d)};var h;i.from=function(d){return h||(h=Tu()),h(d,"body")}}),wa=de((u,t)=>{le(),ce(),ue();var{ObjectSetPrototypeOf:o,Symbol:a}=Ne();t.exports=i;var{ERR_METHOD_NOT_IMPLEMENTED:l}=Ve().codes,e=ft(),{getHighWaterMark:r}=Kr();o(i.prototype,e.prototype),o(i,e);var n=a("kCallback");function i(h){if(!(this instanceof i))return new i(h);let d=h?r(this,h,"readableHighWaterMark",!0):null;d===0&&(h={...h,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:h.writableHighWaterMark||0}),e.call(this,h),this._readableState.sync=!1,this[n]=null,h&&(typeof h.transform=="function"&&(this._transform=h.transform),typeof h.flush=="function"&&(this._flush=h.flush)),this.on("prefinish",c)}function s(h){typeof this._flush=="function"&&!this.destroyed?this._flush((d,m)=>{if(d){h?h(d):this.destroy(d);return}m!=null&&this.push(m),this.push(null),h&&h()}):(this.push(null),h&&h())}function c(){this._final!==s&&s.call(this)}i.prototype._final=s,i.prototype._transform=function(h,d,m){throw new l("_transform()")},i.prototype._write=function(h,d,m){let f=this._readableState,y=this._writableState,b=f.length;this._transform(h,d,(S,g)=>{if(S){m(S);return}g!=null&&this.push(g),y.ended||b===f.length||f.length<f.highWaterMark?m():this[n]=m})},i.prototype._read=function(){if(this[n]){let h=this[n];this[n]=null,h()}}}),_a=de((u,t)=>{le(),ce(),ue();var{ObjectSetPrototypeOf:o}=Ne();t.exports=l;var a=wa();o(l.prototype,a.prototype),o(l,a);function l(e){if(!(this instanceof l))return new l(e);a.call(this,e)}l.prototype._transform=function(e,r,n){n(null,e)}}),ho=de((u,t)=>{le(),ce(),ue();var o=Rt(),{ArrayIsArray:a,Promise:l,SymbolAsyncIterator:e,SymbolDispose:r}=Ne(),n=St(),{once:i}=ze(),s=Wt(),c=ft(),{aggregateTwoErrors:h,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:m,ERR_MISSING_ARGS:f,ERR_STREAM_DESTROYED:y,ERR_STREAM_PREMATURE_CLOSE:b},AbortError:S}=Ve(),{validateFunction:g,validateAbortSignal:w}=or(),{isIterable:x,isReadable:v,isReadableNodeStream:A,isNodeStream:E,isTransformStream:O,isWebStream:R,isReadableStream:P,isReadableFinished:M}=pt(),k=globalThis.AbortController||ir().AbortController,B,U,F;function oe(te,we,G){let L=!1;te.on("close",()=>{L=!0});let ne=n(te,{readable:we,writable:G},V=>{L=!V});return{destroy:V=>{L||(L=!0,s.destroyer(te,V||new y("pipe")))},cleanup:ne}}function H(te){return g(te[te.length-1],"streams[stream.length - 1]"),te.pop()}function K(te){if(x(te))return te;if(A(te))return re(te);throw new d("val",["Readable","Iterable","AsyncIterable"],te)}async function*re(te){U||(U=Vr()),yield*U.prototype[e].call(te)}async function W(te,we,G,{end:L}){let ne,V=null,Q=se=>{if(se&&(ne=se),V){let j=V;V=null,j()}},X=()=>new l((se,j)=>{ne?j(ne):V=()=>{ne?j(ne):se()}});we.on("drain",Q);let me=n(we,{readable:!1},Q);try{we.writableNeedDrain&&await X();for await(let se of te)we.write(se)||await X();L&&(we.end(),await X()),G()}catch(se){G(ne!==se?h(ne,se):se)}finally{me(),we.off("drain",Q)}}async function J(te,we,G,{end:L}){O(we)&&(we=we.writable);let ne=we.getWriter();try{for await(let V of te)await ne.ready,ne.write(V).catch(()=>{});await ne.ready,L&&await ne.close(),G()}catch(V){try{await ne.abort(V),G(V)}catch(Q){G(Q)}}}function C(...te){return Y(te,i(H(te)))}function Y(te,we,G){if(te.length===1&&a(te[0])&&(te=te[0]),te.length<2)throw new f("streams");let L=new k,ne=L.signal,V=G?.signal,Q=[];w(V,"options.signal");function X(){pe(new S)}F=F||ze().addAbortListener;let me;V&&(me=F(V,X));let se,j,$=[],ee=0;function he(ve){pe(ve,--ee===0)}function pe(ve,ae){var Pe;if(ve&&(!se||se.code==="ERR_STREAM_PREMATURE_CLOSE")&&(se=ve),!(!se&&!ae)){for(;$.length;)$.shift()(se);(Pe=me)===null||Pe===void 0||Pe[r](),L.abort(),ae&&(se||Q.forEach(p=>p()),o.nextTick(we,se,j))}}let be;for(let ve=0;ve<te.length;ve++){let ae=te[ve],Pe=ve<te.length-1,p=ve>0,_=Pe||G?.end!==!1,I=ve===te.length-1;if(E(ae)){let D=function(Z){Z&&Z.name!=="AbortError"&&Z.code!=="ERR_STREAM_PREMATURE_CLOSE"&&he(Z)};if(_){let{destroy:Z,cleanup:fe}=oe(ae,Pe,p);$.push(Z),v(ae)&&I&&Q.push(fe)}ae.on("error",D),v(ae)&&I&&Q.push(()=>{ae.removeListener("error",D)})}if(ve===0)if(typeof ae=="function"){if(be=ae({signal:ne}),!x(be))throw new m("Iterable, AsyncIterable or Stream","source",be)}else x(ae)||A(ae)||O(ae)?be=ae:be=c.from(ae);else if(typeof ae=="function"){if(O(be)){var q;be=K((q=be)===null||q===void 0?void 0:q.readable)}else be=K(be);if(be=ae(be,{signal:ne}),Pe){if(!x(be,!0))throw new m("AsyncIterable",`transform[${ve-1}]`,be)}else{var ge;B||(B=_a());let D=new B({objectMode:!0}),Z=(ge=be)===null||ge===void 0?void 0:ge.then;if(typeof Z=="function")ee++,Z.call(be,z=>{j=z,z!=null&&D.write(z),_&&D.end(),o.nextTick(he)},z=>{D.destroy(z),o.nextTick(he,z)});else if(x(be,!0))ee++,W(be,D,he,{end:_});else if(P(be)||O(be)){let z=be.readable||be;ee++,W(z,D,he,{end:_})}else throw new m("AsyncIterable or Promise","destination",be);be=D;let{destroy:fe,cleanup:Se}=oe(be,!1,!0);$.push(fe),I&&Q.push(Se)}}else if(E(ae)){if(A(be)){ee+=2;let D=ye(be,ae,he,{end:_});v(ae)&&I&&Q.push(D)}else if(O(be)||P(be)){let D=be.readable||be;ee++,W(D,ae,he,{end:_})}else if(x(be))ee++,W(be,ae,he,{end:_});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],be);be=ae}else if(R(ae)){if(A(be))ee++,J(K(be),ae,he,{end:_});else if(P(be)||x(be))ee++,J(be,ae,he,{end:_});else if(O(be))ee++,J(be.readable,ae,he,{end:_});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],be);be=ae}else be=c.from(ae)}return(ne!=null&&ne.aborted||V!=null&&V.aborted)&&o.nextTick(X),be}function ye(te,we,G,{end:L}){let ne=!1;if(we.on("close",()=>{ne||G(new b)}),te.pipe(we,{end:!1}),L){let V=function(){ne=!0,we.end()};M(te)?o.nextTick(V):te.once("end",V)}else G();return n(te,{readable:!0,writable:!1},V=>{let Q=te._readableState;V&&V.code==="ERR_STREAM_PREMATURE_CLOSE"&&Q&&Q.ended&&!Q.errored&&!Q.errorEmitted?te.once("end",G).once("error",G):G(V)}),n(we,{readable:!1,writable:!0},G)}t.exports={pipelineImpl:Y,pipeline:C}}),Sa=de((u,t)=>{le(),ce(),ue();var{pipeline:o}=ho(),a=ft(),{destroyer:l}=Wt(),{isNodeStream:e,isReadable:r,isWritable:n,isWebStream:i,isTransformStream:s,isWritableStream:c,isReadableStream:h}=pt(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:m,ERR_MISSING_ARGS:f}}=Ve(),y=St();t.exports=function(...b){if(b.length===0)throw new f("streams");if(b.length===1)return a.from(b[0]);let S=[...b];if(typeof b[0]=="function"&&(b[0]=a.from(b[0])),typeof b[b.length-1]=="function"){let k=b.length-1;b[k]=a.from(b[k])}for(let k=0;k<b.length;++k)if(!(!e(b[k])&&!i(b[k]))){if(k<b.length-1&&!(r(b[k])||h(b[k])||s(b[k])))throw new m(`streams[${k}]`,S[k],"must be readable");if(k>0&&!(n(b[k])||c(b[k])||s(b[k])))throw new m(`streams[${k}]`,S[k],"must be writable")}let g,w,x,v,A;function E(k){let B=v;v=null,B?B(k):k?A.destroy(k):!M&&!P&&A.destroy()}let O=b[0],R=o(b,E),P=!!(n(O)||c(O)||s(O)),M=!!(r(R)||h(R)||s(R));if(A=new a({writableObjectMode:!!(O!=null&&O.writableObjectMode),readableObjectMode:!!(R!=null&&R.readableObjectMode),writable:P,readable:M}),P){if(e(O))A._write=function(B,U,F){O.write(B,U)?F():g=F},A._final=function(B){O.end(),w=B},O.on("drain",function(){if(g){let B=g;g=null,B()}});else if(i(O)){let B=(s(O)?O.writable:O).getWriter();A._write=async function(U,F,oe){try{await B.ready,B.write(U).catch(()=>{}),oe()}catch(H){oe(H)}},A._final=async function(U){try{await B.ready,B.close().catch(()=>{}),w=U}catch(F){U(F)}}}let k=s(R)?R.readable:R;y(k,()=>{if(w){let B=w;w=null,B()}})}if(M){if(e(R))R.on("readable",function(){if(x){let k=x;x=null,k()}}),R.on("end",function(){A.push(null)}),A._read=function(){for(;;){let k=R.read();if(k===null){x=A._read;return}if(!A.push(k))return}};else if(i(R)){let k=(s(R)?R.readable:R).getReader();A._read=async function(){for(;;)try{let{value:B,done:U}=await k.read();if(!A.push(B))return;if(U){A.push(null);return}}catch{return}}}}return A._destroy=function(k,B){!k&&v!==null&&(k=new d),x=null,g=null,w=null,v===null?B(k):(v=B,e(R)&&l(R,k))},A}}),Ru=de((u,t)=>{le(),ce(),ue();var o=globalThis.AbortController||ir().AbortController,{codes:{ERR_INVALID_ARG_VALUE:a,ERR_INVALID_ARG_TYPE:l,ERR_MISSING_ARGS:e,ERR_OUT_OF_RANGE:r},AbortError:n}=Ve(),{validateAbortSignal:i,validateInteger:s,validateObject:c}=or(),h=Ne().Symbol("kWeak"),d=Ne().Symbol("kResistStopPropagation"),{finished:m}=St(),f=Sa(),{addAbortSignalNoValidate:y}=qr(),{isWritable:b,isNodeStream:S}=pt(),{deprecate:g}=ze(),{ArrayPrototypePush:w,Boolean:x,MathFloor:v,Number:A,NumberIsNaN:E,Promise:O,PromiseReject:R,PromiseResolve:P,PromisePrototypeThen:M,Symbol:k}=Ne(),B=k("kEmpty"),U=k("kEof");function F(V,Q){if(Q!=null&&c(Q,"options"),Q?.signal!=null&&i(Q.signal,"options.signal"),S(V)&&!b(V))throw new a("stream",V,"must be writable");let X=f(this,V);return Q!=null&&Q.signal&&y(Q.signal,X),X}function oe(V,Q){if(typeof V!="function")throw new l("fn",["Function","AsyncFunction"],V);Q!=null&&c(Q,"options"),Q?.signal!=null&&i(Q.signal,"options.signal");let X=1;Q?.concurrency!=null&&(X=v(Q.concurrency));let me=X-1;return Q?.highWaterMark!=null&&(me=v(Q.highWaterMark)),s(X,"options.concurrency",1),s(me,"options.highWaterMark",0),me+=X,(async function*(){let se=ze().AbortSignalAny([Q?.signal].filter(x)),j=this,$=[],ee={signal:se},he,pe,be=!1,q=0;function ge(){be=!0,ve()}function ve(){q-=1,ae()}function ae(){pe&&!be&&q<X&&$.length<me&&(pe(),pe=null)}async function Pe(){try{for await(let p of j){if(be)return;if(se.aborted)throw new n;try{if(p=V(p,ee),p===B)continue;p=P(p)}catch(_){p=R(_)}q+=1,M(p,ve,ge),$.push(p),he&&(he(),he=null),!be&&($.length>=me||q>=X)&&await new O(_=>{pe=_})}$.push(U)}catch(p){let _=R(p);M(_,ve,ge),$.push(_)}finally{be=!0,he&&(he(),he=null)}}Pe();try{for(;;){for(;$.length>0;){let p=await $[0];if(p===U)return;if(se.aborted)throw new n;p!==B&&(yield p),$.shift(),ae()}await new O(p=>{he=p})}}finally{be=!0,pe&&(pe(),pe=null)}}).call(this)}function H(V=void 0){return V!=null&&c(V,"options"),V?.signal!=null&&i(V.signal,"options.signal"),(async function*(){let Q=0;for await(let me of this){var X;if(V!=null&&(X=V.signal)!==null&&X!==void 0&&X.aborted)throw new n({cause:V.signal.reason});yield[Q++,me]}}).call(this)}async function K(V,Q=void 0){for await(let X of C.call(this,V,Q))return!0;return!1}async function re(V,Q=void 0){if(typeof V!="function")throw new l("fn",["Function","AsyncFunction"],V);return!await K.call(this,async(...X)=>!await V(...X),Q)}async function W(V,Q){for await(let X of C.call(this,V,Q))return X}async function J(V,Q){if(typeof V!="function")throw new l("fn",["Function","AsyncFunction"],V);async function X(me,se){return await V(me,se),B}for await(let me of oe.call(this,X,Q));}function C(V,Q){if(typeof V!="function")throw new l("fn",["Function","AsyncFunction"],V);async function X(me,se){return await V(me,se)?me:B}return oe.call(this,X,Q)}var Y=class extends e{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function ye(V,Q,X){var me;if(typeof V!="function")throw new l("reducer",["Function","AsyncFunction"],V);X!=null&&c(X,"options"),X?.signal!=null&&i(X.signal,"options.signal");let se=arguments.length>1;if(X!=null&&(me=X.signal)!==null&&me!==void 0&&me.aborted){let pe=new n(void 0,{cause:X.signal.reason});throw this.once("error",()=>{}),await m(this.destroy(pe)),pe}let j=new o,$=j.signal;if(X!=null&&X.signal){let pe={once:!0,[h]:this,[d]:!0};X.signal.addEventListener("abort",()=>j.abort(),pe)}let ee=!1;try{for await(let pe of this){var he;if(ee=!0,X!=null&&(he=X.signal)!==null&&he!==void 0&&he.aborted)throw new n;se?Q=await V(Q,pe,{signal:$}):(Q=pe,se=!0)}if(!ee&&!se)throw new Y}finally{j.abort()}return Q}async function te(V){V!=null&&c(V,"options"),V?.signal!=null&&i(V.signal,"options.signal");let Q=[];for await(let me of this){var X;if(V!=null&&(X=V.signal)!==null&&X!==void 0&&X.aborted)throw new n(void 0,{cause:V.signal.reason});w(Q,me)}return Q}function we(V,Q){let X=oe.call(this,V,Q);return(async function*(){for await(let me of X)yield*me}).call(this)}function G(V){if(V=A(V),E(V))return 0;if(V<0)throw new r("number",">= 0",V);return V}function L(V,Q=void 0){return Q!=null&&c(Q,"options"),Q?.signal!=null&&i(Q.signal,"options.signal"),V=G(V),(async function*(){var X;if(Q!=null&&(X=Q.signal)!==null&&X!==void 0&&X.aborted)throw new n;for await(let se of this){var me;if(Q!=null&&(me=Q.signal)!==null&&me!==void 0&&me.aborted)throw new n;V--<=0&&(yield se)}}).call(this)}function ne(V,Q=void 0){return Q!=null&&c(Q,"options"),Q?.signal!=null&&i(Q.signal,"options.signal"),V=G(V),(async function*(){var X;if(Q!=null&&(X=Q.signal)!==null&&X!==void 0&&X.aborted)throw new n;for await(let se of this){var me;if(Q!=null&&(me=Q.signal)!==null&&me!==void 0&&me.aborted)throw new n;if(V-- >0&&(yield se),V<=0)return}}).call(this)}t.exports.streamReturningOperators={asIndexedPairs:g(H,"readable.asIndexedPairs will be removed in a future version."),drop:L,filter:C,flatMap:we,map:oe,take:ne,compose:F},t.exports.promiseReturningOperators={every:re,forEach:J,reduce:ye,toArray:te,some:K,find:W}}),Ea=de((u,t)=>{le(),ce(),ue();var{ArrayPrototypePop:o,Promise:a}=Ne(),{isIterable:l,isNodeStream:e,isWebStream:r}=pt(),{pipelineImpl:n}=ho(),{finished:i}=St();xa();function s(...c){return new a((h,d)=>{let m,f,y=c[c.length-1];if(y&&typeof y=="object"&&!e(y)&&!l(y)&&!r(y)){let b=o(c);m=b.signal,f=b.end}n(c,(b,S)=>{b?d(b):h(S)},{signal:m,end:f})})}t.exports={finished:i,pipeline:s}}),xa=de((u,t)=>{le(),ce(),ue();var{Buffer:o}=(Be(),Re(Ue)),{ObjectDefineProperty:a,ObjectKeys:l,ReflectApply:e}=Ne(),{promisify:{custom:r}}=ze(),{streamReturningOperators:n,promiseReturningOperators:i}=Ru(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=Ve(),c=Sa(),{setDefaultHighWaterMark:h,getDefaultHighWaterMark:d}=Kr(),{pipeline:m}=ho(),{destroyer:f}=Wt(),y=St(),b=Ea(),S=pt(),g=t.exports=co().Stream;g.isDestroyed=S.isDestroyed,g.isDisturbed=S.isDisturbed,g.isErrored=S.isErrored,g.isReadable=S.isReadable,g.isWritable=S.isWritable,g.Readable=Vr();for(let x of l(n)){let v=function(...E){if(new.target)throw s();return g.Readable.from(e(A,this,E))},A=n[x];a(v,"name",{__proto__:null,value:A.name}),a(v,"length",{__proto__:null,value:A.length}),a(g.Readable.prototype,x,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}for(let x of l(i)){let v=function(...E){if(new.target)throw s();return e(A,this,E)},A=i[x];a(v,"name",{__proto__:null,value:A.name}),a(v,"length",{__proto__:null,value:A.length}),a(g.Readable.prototype,x,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}g.Writable=fo(),g.Duplex=ft(),g.Transform=wa(),g.PassThrough=_a(),g.pipeline=m;var{addAbortSignal:w}=qr();g.addAbortSignal=w,g.finished=y,g.destroy=f,g.compose=c,g.setDefaultHighWaterMark=h,g.getDefaultHighWaterMark=d,a(g,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return b}}),a(m,r,{__proto__:null,enumerable:!0,get(){return b.pipeline}}),a(y,r,{__proto__:null,enumerable:!0,get(){return b.finished}}),g.Stream=g,g._isUint8Array=function(x){return x instanceof Uint8Array},g._uint8ArrayToBuffer=function(x){return o.from(x.buffer,x.byteOffset,x.byteLength)}}),Ct=de((u,t)=>{le(),ce(),ue();var o=xa(),a=Ea(),l=o.Readable.destroy;t.exports=o.Readable,t.exports._uint8ArrayToBuffer=o._uint8ArrayToBuffer,t.exports._isUint8Array=o._isUint8Array,t.exports.isDisturbed=o.isDisturbed,t.exports.isErrored=o.isErrored,t.exports.isReadable=o.isReadable,t.exports.Readable=o.Readable,t.exports.Writable=o.Writable,t.exports.Duplex=o.Duplex,t.exports.Transform=o.Transform,t.exports.PassThrough=o.PassThrough,t.exports.addAbortSignal=o.addAbortSignal,t.exports.finished=o.finished,t.exports.destroy=o.destroy,t.exports.destroy=l,t.exports.pipeline=o.pipeline,t.exports.compose=o.compose,Object.defineProperty(o,"promises",{configurable:!0,enumerable:!0,get(){return a}}),t.exports.Stream=o.Stream,t.exports.default=t.exports}),Cu=de((u,t)=>{le(),ce(),ue(),typeof Object.create=="function"?t.exports=function(o,a){a&&(o.super_=a,o.prototype=Object.create(a.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(o,a){if(a){o.super_=a;var l=function(){};l.prototype=a.prototype,o.prototype=new l,o.prototype.constructor=o}}}),ju=de((u,t)=>{le(),ce(),ue();var{Buffer:o}=(Be(),Re(Ue)),a=Symbol.for("BufferList");function l(e){if(!(this instanceof l))return new l(e);l._init.call(this,e)}l._init=function(e){Object.defineProperty(this,a,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},l.prototype._new=function(e){return new l(e)},l.prototype._offset=function(e){if(e===0)return[0,0];let r=0;for(let n=0;n<this._bufs.length;n++){let i=r+this._bufs[n].length;if(e<i||n===this._bufs.length-1)return[n,e-r];r=i}},l.prototype._reverseOffset=function(e){let r=e[0],n=e[1];for(let i=0;i<r;i++)n+=this._bufs[i].length;return n},l.prototype.getBuffers=function(){return this._bufs},l.prototype.get=function(e){if(e>this.length||e<0)return;let r=this._offset(e);return this._bufs[r[0]][r[1]]},l.prototype.slice=function(e,r){return typeof e=="number"&&e<0&&(e+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,e,r)},l.prototype.copy=function(e,r,n,i){if((typeof n!="number"||n<0)&&(n=0),(typeof i!="number"||i>this.length)&&(i=this.length),n>=this.length||i<=0)return e||o.alloc(0);let s=!!e,c=this._offset(n),h=i-n,d=h,m=s&&r||0,f=c[1];if(n===0&&i===this.length){if(!s)return this._bufs.length===1?this._bufs[0]:o.concat(this._bufs,this.length);for(let y=0;y<this._bufs.length;y++)this._bufs[y].copy(e,m),m+=this._bufs[y].length;return e}if(d<=this._bufs[c[0]].length-f)return s?this._bufs[c[0]].copy(e,r,f,f+d):this._bufs[c[0]].slice(f,f+d);s||(e=o.allocUnsafe(h));for(let y=c[0];y<this._bufs.length;y++){let b=this._bufs[y].length-f;if(d>b)this._bufs[y].copy(e,m,f),m+=b;else{this._bufs[y].copy(e,m,f,f+d),m+=b;break}d-=b,f&&(f=0)}return e.length>m?e.slice(0,m):e},l.prototype.shallowSlice=function(e,r){if(e=e||0,r=typeof r!="number"?this.length:r,e<0&&(e+=this.length),r<0&&(r+=this.length),e===r)return this._new();let n=this._offset(e),i=this._offset(r),s=this._bufs.slice(n[0],i[0]+1);return i[1]===0?s.pop():s[s.length-1]=s[s.length-1].slice(0,i[1]),n[1]!==0&&(s[0]=s[0].slice(n[1])),this._new(s)},l.prototype.toString=function(e,r,n){return this.slice(r,n).toString(e)},l.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this},l.prototype.duplicate=function(){let e=this._new();for(let r=0;r<this._bufs.length;r++)e.append(this._bufs[r]);return e},l.prototype.append=function(e){return this._attach(e,l.prototype._appendBuffer)},l.prototype.prepend=function(e){return this._attach(e,l.prototype._prependBuffer,!0)},l.prototype._attach=function(e,r,n){if(e==null)return this;if(e.buffer)r.call(this,o.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e)){let[i,s]=n?[e.length-1,-1]:[0,1];for(let c=i;c>=0&&c<e.length;c+=s)this._attach(e[c],r,n)}else if(this._isBufferList(e)){let[i,s]=n?[e._bufs.length-1,-1]:[0,1];for(let c=i;c>=0&&c<e._bufs.length;c+=s)this._attach(e._bufs[c],r,n)}else typeof e=="number"&&(e=e.toString()),r.call(this,o.from(e));return this},l.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},l.prototype._prependBuffer=function(e){this._bufs.unshift(e),this.length+=e.length},l.prototype.indexOf=function(e,r,n){if(n===void 0&&typeof r=="string"&&(n=r,r=void 0),typeof e=="function"||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof e=="number"?e=o.from([e]):typeof e=="string"?e=o.from(e,n):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=o.from(e.buffer,e.byteOffset,e.byteLength):o.isBuffer(e)||(e=o.from(e)),r=Number(r||0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),e.length===0)return r>this.length?this.length:r;let i=this._offset(r),s=i[0],c=i[1];for(;s<this._bufs.length;s++){let h=this._bufs[s];for(;c<h.length;)if(h.length-c>=e.length){let d=h.indexOf(e,c);if(d!==-1)return this._reverseOffset([s,d]);c=h.length-e.length+1}else{let d=this._reverseOffset([s,c]);if(this._match(d,e))return d;c++}c=0}return-1},l.prototype._match=function(e,r){if(this.length-e<r.length)return!1;for(let n=0;n<r.length;n++)if(this.get(e+n)!==r[n])return!1;return!0},(function(){let e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let r in e)(function(n){e[n]===null?l.prototype[n]=function(i,s){return this.slice(i,i+s)[n](0,s)}:l.prototype[n]=function(i=0){return this.slice(i,i+e[n])[n](0)}})(r)})(),l.prototype._isBufferList=function(e){return e instanceof l||l.isBufferList(e)},l.isBufferList=function(e){return e!=null&&e[a]},t.exports=l}),Nu=de((u,t)=>{le(),ce(),ue();var o=Ct().Duplex,a=Cu(),l=ju();function e(r){if(!(this instanceof e))return new e(r);if(typeof r=="function"){this._callback=r;let n=(function(i){this._callback&&(this._callback(i),this._callback=null)}).bind(this);this.on("pipe",function(i){i.on("error",n)}),this.on("unpipe",function(i){i.removeListener("error",n)}),r=null}l._init.call(this,r),o.call(this)}a(e,o),Object.assign(e.prototype,l.prototype),e.prototype._new=function(r){return new e(r)},e.prototype._write=function(r,n,i){this._appendBuffer(r),typeof i=="function"&&i()},e.prototype._read=function(r){if(!this.length)return this.push(null);r=Math.min(r,this.length),this.push(this.slice(0,r)),this.consume(r)},e.prototype.end=function(r){o.prototype.end.call(this,r),this._callback&&(this._callback(null,this.slice()),this._callback=null)},e.prototype._destroy=function(r,n){this._bufs.length=0,this.length=0,n(r)},e.prototype._isBufferList=function(r){return r instanceof e||r instanceof l||e.isBufferList(r)},e.isBufferList=l.isBufferList,t.exports=e,t.exports.BufferListStream=e,t.exports.BufferList=l}),Mu=de((u,t)=>{le(),ce(),ue();var o=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};t.exports=o}),Aa=de((u,t)=>{le(),ce(),ue();var o=t.exports,{Buffer:a}=(Be(),Re(Ue));o.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},o.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},o.requiredHeaderFlagsErrors={};for(let e in o.requiredHeaderFlags){let r=o.requiredHeaderFlags[e];o.requiredHeaderFlagsErrors[e]="Invalid header flag bits, must be 0x"+r.toString(16)+" for "+o.types[e]+" packet"}o.codes={};for(let e in o.types){let r=o.types[e];o.codes[r]=e}o.CMD_SHIFT=4,o.CMD_MASK=240,o.DUP_MASK=8,o.QOS_MASK=3,o.QOS_SHIFT=1,o.RETAIN_MASK=1,o.VARBYTEINT_MASK=127,o.VARBYTEINT_FIN_MASK=128,o.VARBYTEINT_MAX=268435455,o.SESSIONPRESENT_MASK=1,o.SESSIONPRESENT_HEADER=a.from([o.SESSIONPRESENT_MASK]),o.CONNACK_HEADER=a.from([o.codes.connack<<o.CMD_SHIFT]),o.USERNAME_MASK=128,o.PASSWORD_MASK=64,o.WILL_RETAIN_MASK=32,o.WILL_QOS_MASK=24,o.WILL_QOS_SHIFT=3,o.WILL_FLAG_MASK=4,o.CLEAN_SESSION_MASK=2,o.CONNECT_HEADER=a.from([o.codes.connect<<o.CMD_SHIFT]),o.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},o.propertiesCodes={};for(let e in o.properties){let r=o.properties[e];o.propertiesCodes[r]=e}o.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function l(e){return[0,1,2].map(r=>[0,1].map(n=>[0,1].map(i=>{let s=a.alloc(1);return s.writeUInt8(o.codes[e]<<o.CMD_SHIFT|(n?o.DUP_MASK:0)|r<<o.QOS_SHIFT|i,0,!0),s})))}o.PUBLISH_HEADER=l("publish"),o.SUBSCRIBE_HEADER=l("subscribe"),o.SUBSCRIBE_OPTIONS_QOS_MASK=3,o.SUBSCRIBE_OPTIONS_NL_MASK=1,o.SUBSCRIBE_OPTIONS_NL_SHIFT=2,o.SUBSCRIBE_OPTIONS_RAP_MASK=1,o.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,o.SUBSCRIBE_OPTIONS_RH_MASK=3,o.SUBSCRIBE_OPTIONS_RH_SHIFT=4,o.SUBSCRIBE_OPTIONS_RH=[0,16,32],o.SUBSCRIBE_OPTIONS_NL=4,o.SUBSCRIBE_OPTIONS_RAP=8,o.SUBSCRIBE_OPTIONS_QOS=[0,1,2],o.UNSUBSCRIBE_HEADER=l("unsubscribe"),o.ACKS={unsuback:l("unsuback"),puback:l("puback"),pubcomp:l("pubcomp"),pubrel:l("pubrel"),pubrec:l("pubrec")},o.SUBACK_HEADER=a.from([o.codes.suback<<o.CMD_SHIFT]),o.VERSION3=a.from([3]),o.VERSION4=a.from([4]),o.VERSION5=a.from([5]),o.VERSION131=a.from([131]),o.VERSION132=a.from([132]),o.QOS=[0,1,2].map(e=>a.from([e])),o.EMPTY={pingreq:a.from([o.codes.pingreq<<4,0]),pingresp:a.from([o.codes.pingresp<<4,0]),disconnect:a.from([o.codes.disconnect<<4,0])},o.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},o.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},o.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},o.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},o.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},o.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),Lu=de((u,t)=>{le(),ce(),ue();var o=1e3,a=o*60,l=a*60,e=l*24,r=e*7,n=e*365.25;t.exports=function(d,m){m=m||{};var f=typeof d;if(f==="string"&&d.length>0)return i(d);if(f==="number"&&isFinite(d))return m.long?c(d):s(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function i(d){if(d=String(d),!(d.length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(m){var f=parseFloat(m[1]),y=(m[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return f*n;case"weeks":case"week":case"w":return f*r;case"days":case"day":case"d":return f*e;case"hours":case"hour":case"hrs":case"hr":case"h":return f*l;case"minutes":case"minute":case"mins":case"min":case"m":return f*a;case"seconds":case"second":case"secs":case"sec":case"s":return f*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function s(d){var m=Math.abs(d);return m>=e?Math.round(d/e)+"d":m>=l?Math.round(d/l)+"h":m>=a?Math.round(d/a)+"m":m>=o?Math.round(d/o)+"s":d+"ms"}function c(d){var m=Math.abs(d);return m>=e?h(d,m,e,"day"):m>=l?h(d,m,l,"hour"):m>=a?h(d,m,a,"minute"):m>=o?h(d,m,o,"second"):d+" ms"}function h(d,m,f,y){var b=m>=f*1.5;return Math.round(d/f)+" "+y+(b?"s":"")}}),Uu=de((u,t)=>{le(),ce(),ue();function o(a){e.debug=e,e.default=e,e.coerce=h,e.disable=s,e.enable=n,e.enabled=c,e.humanize=Lu(),e.destroy=d,Object.keys(a).forEach(m=>{e[m]=a[m]}),e.names=[],e.skips=[],e.formatters={};function l(m){let f=0;for(let y=0;y<m.length;y++)f=(f<<5)-f+m.charCodeAt(y),f|=0;return e.colors[Math.abs(f)%e.colors.length]}e.selectColor=l;function e(m){let f,y=null,b,S;function g(...w){if(!g.enabled)return;let x=g,v=Number(new Date),A=v-(f||v);x.diff=A,x.prev=f,x.curr=v,f=v,w[0]=e.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let E=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(O,R)=>{if(O==="%%")return"%";E++;let P=e.formatters[R];if(typeof P=="function"){let M=w[E];O=P.call(x,M),w.splice(E,1),E--}return O}),e.formatArgs.call(x,w),(x.log||e.log).apply(x,w)}return g.namespace=m,g.useColors=e.useColors(),g.color=e.selectColor(m),g.extend=r,g.destroy=e.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(b!==e.namespaces&&(b=e.namespaces,S=e.enabled(m)),S),set:w=>{y=w}}),typeof e.init=="function"&&e.init(g),g}function r(m,f){let y=e(this.namespace+(typeof f>"u"?":":f)+m);return y.log=this.log,y}function n(m){e.save(m),e.namespaces=m,e.names=[],e.skips=[];let f=(typeof m=="string"?m:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let y of f)y[0]==="-"?e.skips.push(y.slice(1)):e.names.push(y)}function i(m,f){let y=0,b=0,S=-1,g=0;for(;y<m.length;)if(b<f.length&&(f[b]===m[y]||f[b]==="*"))f[b]==="*"?(S=b,g=y,b++):(y++,b++);else if(S!==-1)b=S+1,g++,y=g;else return!1;for(;b<f.length&&f[b]==="*";)b++;return b===f.length}function s(){let m=[...e.names,...e.skips.map(f=>"-"+f)].join(",");return e.enable(""),m}function c(m){for(let f of e.skips)if(i(m,f))return!1;for(let f of e.names)if(i(m,f))return!0;return!1}function h(m){return m instanceof Error?m.stack||m.message:m}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return e.enable(e.load()),e}t.exports=o}),ht=de((u,t)=>{le(),ce(),ue(),u.formatArgs=a,u.save=l,u.load=e,u.useColors=o,u.storage=r(),u.destroy=(()=>{let i=!1;return()=>{i||(i=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),u.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let i;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(i=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(i[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(i){if(i[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+i[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let s="color: "+this.color;i.splice(1,0,s,"color: inherit");let c=0,h=0;i[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(c++,d==="%c"&&(h=c))}),i.splice(h,0,s)}u.log=console.debug||console.log||(()=>{});function l(i){try{i?u.storage.setItem("debug",i):u.storage.removeItem("debug")}catch{}}function e(){let i;try{i=u.storage.getItem("debug")||u.storage.getItem("DEBUG")}catch{}return!i&&typeof Ce<"u"&&"env"in Ce&&(i=Ce.env.DEBUG),i}function r(){try{return localStorage}catch{}}t.exports=Uu()(u);var{formatters:n}=t.exports;n.j=function(i){try{return JSON.stringify(i)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}}),Bu=de((u,t)=>{le(),ce(),ue();var o=Nu(),{EventEmitter:a}=(Tt(),Re(_t)),l=Mu(),e=Aa(),r=ht()("mqtt-packet:parser"),n=class bi extends a{constructor(){super(),this.parser=this.constructor.parser}static parser(s){return this instanceof bi?(this.settings=s||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new bi().parser(s)}_resetState(){r("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new l,this.error=null,this._list=o(),this._stateCounter=0}parse(s){for(this.error&&this._resetState(),this._list.append(s),r("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,r("parse: state complete. _stateCounter is now: %d",this._stateCounter),r("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return r("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let s=this._list.readUInt8(0),c=s>>e.CMD_SHIFT;this.packet.cmd=e.types[c];let h=s&15,d=e.requiredHeaderFlags[c];return d!=null&&h!==d?this._emitError(new Error(e.requiredHeaderFlagsErrors[c])):(this.packet.retain=(s&e.RETAIN_MASK)!==0,this.packet.qos=s>>e.QOS_SHIFT&e.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(s&e.DUP_MASK)!==0,r("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let s=this._parseVarByteNum(!0);return s&&(this.packet.length=s.value,this._list.consume(s.bytes)),r("_parseLength %d",s.value),!!s}_parsePayload(){r("_parsePayload: payload %O",this._list);let s=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}s=!0}return r("_parsePayload complete result: %s",s),s}_parseConnect(){r("_parseConnect");let s,c,h,d,m={},f=this.packet,y=this._parseString();if(y===null)return this._emitError(new Error("Cannot parse protocolId"));if(y!=="MQTT"&&y!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(f.protocolId=y,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(f.protocolVersion=this._list.readUInt8(this._pos),f.protocolVersion>=128&&(f.bridgeMode=!0,f.protocolVersion=f.protocolVersion-128),f.protocolVersion!==3&&f.protocolVersion!==4&&f.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));m.username=this._list.readUInt8(this._pos)&e.USERNAME_MASK,m.password=this._list.readUInt8(this._pos)&e.PASSWORD_MASK,m.will=this._list.readUInt8(this._pos)&e.WILL_FLAG_MASK;let b=!!(this._list.readUInt8(this._pos)&e.WILL_RETAIN_MASK),S=(this._list.readUInt8(this._pos)&e.WILL_QOS_MASK)>>e.WILL_QOS_SHIFT;if(m.will)f.will={},f.will.retain=b,f.will.qos=S;else{if(b)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(S)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(f.clean=(this._list.readUInt8(this._pos)&e.CLEAN_SESSION_MASK)!==0,this._pos++,f.keepalive=this._parseNum(),f.keepalive===-1)return this._emitError(new Error("Packet too short"));if(f.protocolVersion===5){let w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(f.properties=w)}let g=this._parseString();if(g===null)return this._emitError(new Error("Packet too short"));if(f.clientId=g,r("_parseConnect: packet.clientId: %s",f.clientId),m.will){if(f.protocolVersion===5){let w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(f.will.properties=w)}if(s=this._parseString(),s===null)return this._emitError(new Error("Cannot parse will topic"));if(f.will.topic=s,r("_parseConnect: packet.will.topic: %s",f.will.topic),c=this._parseBuffer(),c===null)return this._emitError(new Error("Cannot parse will payload"));f.will.payload=c,r("_parseConnect: packet.will.paylaod: %s",f.will.payload)}if(m.username){if(d=this._parseString(),d===null)return this._emitError(new Error("Cannot parse username"));f.username=d,r("_parseConnect: packet.username: %s",f.username)}if(m.password){if(h=this._parseBuffer(),h===null)return this._emitError(new Error("Cannot parse password"));f.password=h}return this.settings=f,r("_parseConnect: complete"),f}_parseConnack(){r("_parseConnack");let s=this.packet;if(this._list.length<1)return null;let c=this._list.readUInt8(this._pos++);if(c>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(s.sessionPresent=!!(c&e.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?s.reasonCode=this._list.readUInt8(this._pos++):s.reasonCode=0;else{if(this._list.length<2)return null;s.returnCode=this._list.readUInt8(this._pos++)}if(s.returnCode===-1||s.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let h=this._parseProperties();Object.getOwnPropertyNames(h).length&&(s.properties=h)}r("_parseConnack: complete")}_parsePublish(){r("_parsePublish");let s=this.packet;if(s.topic=this._parseString(),s.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(s.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(s.properties=c)}s.payload=this._list.slice(this._pos,s.length),r("_parsePublish: payload from buffer list: %o",s.payload)}}_parseSubscribe(){r("_parseSubscribe");let s=this.packet,c,h,d,m,f,y,b;if(s.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let S=this._parseProperties();Object.getOwnPropertyNames(S).length&&(s.properties=S)}if(s.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<s.length;){if(c=this._parseString(),c===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=s.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(h=this._parseByte(),this.settings.protocolVersion===5){if(h&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(h&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(d=h&e.SUBSCRIBE_OPTIONS_QOS_MASK,d>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(y=(h>>e.SUBSCRIBE_OPTIONS_NL_SHIFT&e.SUBSCRIBE_OPTIONS_NL_MASK)!==0,f=(h>>e.SUBSCRIBE_OPTIONS_RAP_SHIFT&e.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,m=h>>e.SUBSCRIBE_OPTIONS_RH_SHIFT&e.SUBSCRIBE_OPTIONS_RH_MASK,m>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));b={topic:c,qos:d},this.settings.protocolVersion===5?(b.nl=y,b.rap=f,b.rh=m):this.settings.bridgeMode&&(b.rh=0,b.rap=!0,b.nl=!0),r("_parseSubscribe: push subscription `%s` to subscription",b),s.subscriptions.push(b)}}}_parseSuback(){r("_parseSuback");let s=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(s.properties=c)}if(s.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let c=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!e.MQTT5_SUBACK_CODES[c])return this._emitError(new Error("Invalid suback code"))}else if(c>2&&c!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(c)}}}_parseUnsubscribe(){r("_parseUnsubscribe");let s=this.packet;if(s.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(s.properties=c)}if(s.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<s.length;){let c=this._parseString();if(c===null)return this._emitError(new Error("Cannot parse topic"));r("_parseUnsubscribe: push topic `%s` to unsubscriptions",c),s.unsubscriptions.push(c)}}}_parseUnsuback(){r("_parseUnsuback");let s=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&s.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(s.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let c=this._parseProperties();for(Object.getOwnPropertyNames(c).length&&(s.properties=c),s.granted=[];this._pos<this.packet.length;){let h=this._list.readUInt8(this._pos++);if(!e.MQTT5_UNSUBACK_CODES[h])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(h)}}}_parseConfirmation(){r("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let s=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(s.length>2){switch(s.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!e.MQTT5_PUBACK_PUBREC_CODES[s.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!e.MQTT5_PUBREL_PUBCOMP_CODES[s.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}r("_parseConfirmation: packet.reasonCode `%d`",s.reasonCode)}else s.reasonCode=0;if(s.length>3){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(s.properties=c)}}return!0}_parseDisconnect(){let s=this.packet;if(r("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(s.reasonCode=this._parseByte(),e.MQTT5_DISCONNECT_CODES[s.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):s.reasonCode=0;let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(s.properties=c)}return r("_parseDisconnect result: true"),!0}_parseAuth(){r("_parseAuth");let s=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(s.reasonCode=this._parseByte(),!e.MQTT5_AUTH_CODES[s.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let c=this._parseProperties();return Object.getOwnPropertyNames(c).length&&(s.properties=c),r("_parseAuth: result: true"),!0}_parseMessageId(){let s=this.packet;return s.messageId=this._parseNum(),s.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(r("_parseMessageId: packet.messageId %d",s.messageId),!0)}_parseString(s){let c=this._parseNum(),h=c+this._pos;if(c===-1||h>this._list.length||h>this.packet.length)return null;let d=this._list.toString("utf8",this._pos,h);return this._pos+=c,r("_parseString: result: %s",d),d}_parseStringPair(){return r("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let s=this._parseNum(),c=s+this._pos;if(s===-1||c>this._list.length||c>this.packet.length)return null;let h=this._list.slice(this._pos,c);return this._pos+=s,r("_parseBuffer: result: %o",h),h}_parseNum(){if(this._list.length-this._pos<2)return-1;let s=this._list.readUInt16BE(this._pos);return this._pos+=2,r("_parseNum: result: %s",s),s}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let s=this._list.readUInt32BE(this._pos);return this._pos+=4,r("_parse4ByteNum: result: %s",s),s}_parseVarByteNum(s){r("_parseVarByteNum");let c=4,h=0,d=1,m=0,f=!1,y,b=this._pos?this._pos:0;for(;h<c&&b+h<this._list.length;){if(y=this._list.readUInt8(b+h++),m+=d*(y&e.VARBYTEINT_MASK),d*=128,(y&e.VARBYTEINT_FIN_MASK)===0){f=!0;break}if(this._list.length<=h)break}return!f&&h===c&&this._list.length>=h&&this._emitError(new Error("Invalid variable byte integer")),b&&(this._pos+=h),f?s?f={bytes:h,value:m}:f=m:f=!1,r("_parseVarByteNum: result: %o",f),f}_parseByte(){let s;return this._pos<this._list.length&&(s=this._list.readUInt8(this._pos),this._pos++),r("_parseByte: result: %o",s),s}_parseByType(s){switch(r("_parseByType: type: %s",s),s){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){r("_parseProperties");let s=this._parseVarByteNum(),c=this._pos+s,h={};for(;this._pos<c;){let d=this._parseByte();if(!d)return this._emitError(new Error("Cannot parse property code type")),!1;let m=e.propertiesCodes[d];if(!m)return this._emitError(new Error("Unknown property")),!1;if(m==="userProperties"){h[m]||(h[m]=Object.create(null));let f=this._parseByType(e.propertiesTypes[m]);if(h[m][f.name])if(Array.isArray(h[m][f.name]))h[m][f.name].push(f.value);else{let y=h[m][f.name];h[m][f.name]=[y],h[m][f.name].push(f.value)}else h[m][f.name]=f.value;continue}h[m]?Array.isArray(h[m])?h[m].push(this._parseByType(e.propertiesTypes[m])):(h[m]=[h[m]],h[m].push(this._parseByType(e.propertiesTypes[m]))):h[m]=this._parseByType(e.propertiesTypes[m])}return h}_newPacket(){return r("_newPacket"),this.packet&&(this._list.consume(this.packet.length),r("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),r("_newPacket: new packet"),this.packet=new l,this._pos=0,!0}_emitError(s){r("_emitError",s),this.error=s,this.emit("error",s)}};t.exports=n}),Fu=de((u,t)=>{le(),ce(),ue();var{Buffer:o}=(Be(),Re(Ue)),a=65536,l={},e=o.isBuffer(o.from([1,2]).subarray(0,1));function r(c){let h=o.allocUnsafe(2);return h.writeUInt8(c>>8,0),h.writeUInt8(c&255,1),h}function n(){for(let c=0;c<a;c++)l[c]=r(c)}function i(c){let h=0,d=0,m=o.allocUnsafe(4);do h=c%128|0,c=c/128|0,c>0&&(h=h|128),m.writeUInt8(h,d++);while(c>0&&d<4);return c>0&&(d=0),e?m.subarray(0,d):m.slice(0,d)}function s(c){let h=o.allocUnsafe(4);return h.writeUInt32BE(c,0),h}t.exports={cache:l,generateCache:n,generateNumber:r,genBufVariableByteInt:i,generate4ByteBuffer:s}}),Du=de((u,t)=>{le(),ce(),ue(),typeof Ce>"u"||!Ce.version||Ce.version.indexOf("v0.")===0||Ce.version.indexOf("v1.")===0&&Ce.version.indexOf("v1.8.")!==0?t.exports={nextTick:o}:t.exports=Ce;function o(a,l,e,r){if(typeof a!="function")throw new TypeError('"callback" argument must be a function');var n=arguments.length,i,s;switch(n){case 0:case 1:return Ce.nextTick(a);case 2:return Ce.nextTick(function(){a.call(null,l)});case 3:return Ce.nextTick(function(){a.call(null,l,e)});case 4:return Ce.nextTick(function(){a.call(null,l,e,r)});default:for(i=new Array(n-1),s=0;s<i.length;)i[s++]=arguments[s];return Ce.nextTick(function(){a.apply(null,i)})}}}),Ia=de((u,t)=>{le(),ce(),ue();var o=Aa(),{Buffer:a}=(Be(),Re(Ue)),l=a.allocUnsafe(0),e=a.from([0]),r=Fu(),n=Du().nextTick,i=ht()("mqtt-packet:writeToStream"),s=r.cache,c=r.generateNumber,h=r.generateCache,d=r.genBufVariableByteInt,m=r.generate4ByteBuffer,f=H,y=!0;function b(G,L,ne){switch(i("generate called"),L.cork&&(L.cork(),n(S,L)),y&&(y=!1,h()),i("generate: packet.cmd: %s",G.cmd),G.cmd){case"connect":return g(G,L);case"connack":return w(G,L,ne);case"publish":return x(G,L,ne);case"puback":case"pubrec":case"pubrel":case"pubcomp":return v(G,L,ne);case"subscribe":return A(G,L,ne);case"suback":return E(G,L,ne);case"unsubscribe":return O(G,L,ne);case"unsuback":return R(G,L,ne);case"pingreq":case"pingresp":return P(G,L);case"disconnect":return M(G,L,ne);case"auth":return k(G,L,ne);default:return L.destroy(new Error("Unknown command")),!1}}Object.defineProperty(b,"cacheNumbers",{get(){return f===H},set(G){G?((!s||Object.keys(s).length===0)&&(y=!0),f=H):(y=!1,f=K)}});function S(G){G.uncork()}function g(G,L,ne){let V=G||{},Q=V.protocolId||"MQTT",X=V.protocolVersion||4,me=V.will,se=V.clean,j=V.keepalive||0,$=V.clientId||"",ee=V.username,he=V.password,pe=V.properties;se===void 0&&(se=!0);let be=0;if(typeof Q!="string"&&!a.isBuffer(Q))return L.destroy(new Error("Invalid protocolId")),!1;if(be+=Q.length+2,X!==3&&X!==4&&X!==5)return L.destroy(new Error("Invalid protocol version")),!1;if(be+=1,(typeof $=="string"||a.isBuffer($))&&($||X>=4)&&($||se))be+=a.byteLength($)+2;else{if(X<4)return L.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(se*1===0)return L.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof j!="number"||j<0||j>65535||j%1!==0)return L.destroy(new Error("Invalid keepalive")),!1;be+=2,be+=1;let q,ge;if(X===5){if(q=J(L,pe),!q)return!1;be+=q.length}if(me){if(typeof me!="object")return L.destroy(new Error("Invalid will")),!1;if(!me.topic||typeof me.topic!="string")return L.destroy(new Error("Invalid will topic")),!1;if(be+=a.byteLength(me.topic)+2,be+=2,me.payload)if(me.payload.length>=0)typeof me.payload=="string"?be+=a.byteLength(me.payload):be+=me.payload.length;else return L.destroy(new Error("Invalid will payload")),!1;if(ge={},X===5){if(ge=J(L,me.properties),!ge)return!1;be+=ge.length}}let ve=!1;if(ee!=null)if(we(ee))ve=!0,be+=a.byteLength(ee)+2;else return L.destroy(new Error("Invalid username")),!1;if(he!=null){if(!ve)return L.destroy(new Error("Username is required to use password")),!1;if(we(he))be+=te(he)+2;else return L.destroy(new Error("Invalid password")),!1}L.write(o.CONNECT_HEADER),U(L,be),W(L,Q),V.bridgeMode&&(X+=128),L.write(X===131?o.VERSION131:X===132?o.VERSION132:X===4?o.VERSION4:X===5?o.VERSION5:o.VERSION3);let ae=0;return ae|=ee!=null?o.USERNAME_MASK:0,ae|=he!=null?o.PASSWORD_MASK:0,ae|=me&&me.retain?o.WILL_RETAIN_MASK:0,ae|=me&&me.qos?me.qos<<o.WILL_QOS_SHIFT:0,ae|=me?o.WILL_FLAG_MASK:0,ae|=se?o.CLEAN_SESSION_MASK:0,L.write(a.from([ae])),f(L,j),X===5&&q.write(),W(L,$),me&&(X===5&&ge.write(),F(L,me.topic),W(L,me.payload)),ee!=null&&W(L,ee),he!=null&&W(L,he),!0}function w(G,L,ne){let V=ne?ne.protocolVersion:4,Q=G||{},X=V===5?Q.reasonCode:Q.returnCode,me=Q.properties,se=2;if(typeof X!="number")return L.destroy(new Error("Invalid return code")),!1;let j=null;if(V===5){if(j=J(L,me),!j)return!1;se+=j.length}return L.write(o.CONNACK_HEADER),U(L,se),L.write(Q.sessionPresent?o.SESSIONPRESENT_HEADER:e),L.write(a.from([X])),j?.write(),!0}function x(G,L,ne){i("publish: packet: %o",G);let V=ne?ne.protocolVersion:4,Q=G||{},X=Q.qos||0,me=Q.retain?o.RETAIN_MASK:0,se=Q.topic,j=Q.payload||l,$=Q.messageId,ee=Q.properties,he=0;if(typeof se=="string")he+=a.byteLength(se)+2;else if(a.isBuffer(se))he+=se.length+2;else return L.destroy(new Error("Invalid topic")),!1;if(a.isBuffer(j)?he+=j.length:he+=a.byteLength(j),X&&typeof $!="number")return L.destroy(new Error("Invalid messageId")),!1;X&&(he+=2);let pe=null;if(V===5){if(pe=J(L,ee),!pe)return!1;he+=pe.length}return L.write(o.PUBLISH_HEADER[X][Q.dup?1:0][me?1:0]),U(L,he),f(L,te(se)),L.write(se),X>0&&f(L,$),pe?.write(),i("publish: payload: %o",j),L.write(j)}function v(G,L,ne){let V=ne?ne.protocolVersion:4,Q=G||{},X=Q.cmd||"puback",me=Q.messageId,se=Q.dup&&X==="pubrel"?o.DUP_MASK:0,j=0,$=Q.reasonCode,ee=Q.properties,he=V===5?3:2;if(X==="pubrel"&&(j=1),typeof me!="number")return L.destroy(new Error("Invalid messageId")),!1;let pe=null;if(V===5&&typeof ee=="object"){if(pe=C(L,ee,ne,he),!pe)return!1;he+=pe.length}return L.write(o.ACKS[X][j][se][0]),he===3&&(he+=$!==0?1:-1),U(L,he),f(L,me),V===5&&he!==2&&L.write(a.from([$])),pe!==null?pe.write():he===4&&L.write(a.from([0])),!0}function A(G,L,ne){i("subscribe: packet: ");let V=ne?ne.protocolVersion:4,Q=G||{},X=Q.dup?o.DUP_MASK:0,me=Q.messageId,se=Q.subscriptions,j=Q.properties,$=0;if(typeof me!="number")return L.destroy(new Error("Invalid messageId")),!1;$+=2;let ee=null;if(V===5){if(ee=J(L,j),!ee)return!1;$+=ee.length}if(typeof se=="object"&&se.length)for(let pe=0;pe<se.length;pe+=1){let be=se[pe].topic,q=se[pe].qos;if(typeof be!="string")return L.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof q!="number")return L.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(V===5){if(typeof(se[pe].nl||!1)!="boolean")return L.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(se[pe].rap||!1)!="boolean")return L.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let ge=se[pe].rh||0;if(typeof ge!="number"||ge>2)return L.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}$+=a.byteLength(be)+2+1}else return L.destroy(new Error("Invalid subscriptions")),!1;i("subscribe: writing to stream: %o",o.SUBSCRIBE_HEADER),L.write(o.SUBSCRIBE_HEADER[1][X?1:0][0]),U(L,$),f(L,me),ee!==null&&ee.write();let he=!0;for(let pe of se){let be=pe.topic,q=pe.qos,ge=+pe.nl,ve=+pe.rap,ae=pe.rh,Pe;F(L,be),Pe=o.SUBSCRIBE_OPTIONS_QOS[q],V===5&&(Pe|=ge?o.SUBSCRIBE_OPTIONS_NL:0,Pe|=ve?o.SUBSCRIBE_OPTIONS_RAP:0,Pe|=ae?o.SUBSCRIBE_OPTIONS_RH[ae]:0),he=L.write(a.from([Pe]))}return he}function E(G,L,ne){let V=ne?ne.protocolVersion:4,Q=G||{},X=Q.messageId,me=Q.granted,se=Q.properties,j=0;if(typeof X!="number")return L.destroy(new Error("Invalid messageId")),!1;if(j+=2,typeof me=="object"&&me.length)for(let ee=0;ee<me.length;ee+=1){if(typeof me[ee]!="number")return L.destroy(new Error("Invalid qos vector")),!1;j+=1}else return L.destroy(new Error("Invalid qos vector")),!1;let $=null;if(V===5){if($=C(L,se,ne,j),!$)return!1;j+=$.length}return L.write(o.SUBACK_HEADER),U(L,j),f(L,X),$!==null&&$.write(),L.write(a.from(me))}function O(G,L,ne){let V=ne?ne.protocolVersion:4,Q=G||{},X=Q.messageId,me=Q.dup?o.DUP_MASK:0,se=Q.unsubscriptions,j=Q.properties,$=0;if(typeof X!="number")return L.destroy(new Error("Invalid messageId")),!1;if($+=2,typeof se=="object"&&se.length)for(let pe=0;pe<se.length;pe+=1){if(typeof se[pe]!="string")return L.destroy(new Error("Invalid unsubscriptions")),!1;$+=a.byteLength(se[pe])+2}else return L.destroy(new Error("Invalid unsubscriptions")),!1;let ee=null;if(V===5){if(ee=J(L,j),!ee)return!1;$+=ee.length}L.write(o.UNSUBSCRIBE_HEADER[1][me?1:0][0]),U(L,$),f(L,X),ee!==null&&ee.write();let he=!0;for(let pe=0;pe<se.length;pe++)he=F(L,se[pe]);return he}function R(G,L,ne){let V=ne?ne.protocolVersion:4,Q=G||{},X=Q.messageId,me=Q.dup?o.DUP_MASK:0,se=Q.granted,j=Q.properties,$=Q.cmd,ee=0,he=2;if(typeof X!="number")return L.destroy(new Error("Invalid messageId")),!1;if(V===5)if(typeof se=="object"&&se.length)for(let be=0;be<se.length;be+=1){if(typeof se[be]!="number")return L.destroy(new Error("Invalid qos vector")),!1;he+=1}else return L.destroy(new Error("Invalid qos vector")),!1;let pe=null;if(V===5){if(pe=C(L,j,ne,he),!pe)return!1;he+=pe.length}return L.write(o.ACKS[$][ee][me][0]),U(L,he),f(L,X),pe!==null&&pe.write(),V===5&&L.write(a.from(se)),!0}function P(G,L,ne){return L.write(o.EMPTY[G.cmd])}function M(G,L,ne){let V=ne?ne.protocolVersion:4,Q=G||{},X=Q.reasonCode,me=Q.properties,se=V===5?1:0,j=null;if(V===5){if(j=C(L,me,ne,se),!j)return!1;se+=j.length}return L.write(a.from([o.codes.disconnect<<4])),U(L,se),V===5&&L.write(a.from([X])),j!==null&&j.write(),!0}function k(G,L,ne){let V=ne?ne.protocolVersion:4,Q=G||{},X=Q.reasonCode,me=Q.properties,se=V===5?1:0;V!==5&&L.destroy(new Error("Invalid mqtt version for auth packet"));let j=C(L,me,ne,se);return j?(se+=j.length,L.write(a.from([o.codes.auth<<4])),U(L,se),L.write(a.from([X])),j!==null&&j.write(),!0):!1}var B={};function U(G,L){if(L>o.VARBYTEINT_MAX)return G.destroy(new Error(`Invalid variable byte integer: ${L}`)),!1;let ne=B[L];return ne||(ne=d(L),L<16384&&(B[L]=ne)),i("writeVarByteInt: writing to stream: %o",ne),G.write(ne)}function F(G,L){let ne=a.byteLength(L);return f(G,ne),i("writeString: %s",L),G.write(L,"utf8")}function oe(G,L,ne){F(G,L),F(G,ne)}function H(G,L){return i("writeNumberCached: number: %d",L),i("writeNumberCached: %o",s[L]),G.write(s[L])}function K(G,L){let ne=c(L);return i("writeNumberGenerated: %o",ne),G.write(ne)}function re(G,L){let ne=m(L);return i("write4ByteNumber: %o",ne),G.write(ne)}function W(G,L){typeof L=="string"?F(G,L):L?(f(G,L.length),G.write(L)):f(G,0)}function J(G,L){if(typeof L!="object"||L.length!=null)return{length:1,write(){ye(G,{},0)}};let ne=0;function V(Q,X){let me=o.propertiesTypes[Q],se=0;switch(me){case"byte":{if(typeof X!="boolean")return G.destroy(new Error(`Invalid ${Q}: ${X}`)),!1;se+=2;break}case"int8":{if(typeof X!="number"||X<0||X>255)return G.destroy(new Error(`Invalid ${Q}: ${X}`)),!1;se+=2;break}case"binary":{if(X&&X===null)return G.destroy(new Error(`Invalid ${Q}: ${X}`)),!1;se+=1+a.byteLength(X)+2;break}case"int16":{if(typeof X!="number"||X<0||X>65535)return G.destroy(new Error(`Invalid ${Q}: ${X}`)),!1;se+=3;break}case"int32":{if(typeof X!="number"||X<0||X>4294967295)return G.destroy(new Error(`Invalid ${Q}: ${X}`)),!1;se+=5;break}case"var":{if(typeof X!="number"||X<0||X>268435455)return G.destroy(new Error(`Invalid ${Q}: ${X}`)),!1;se+=1+a.byteLength(d(X));break}case"string":{if(typeof X!="string")return G.destroy(new Error(`Invalid ${Q}: ${X}`)),!1;se+=3+a.byteLength(X.toString());break}case"pair":{if(typeof X!="object")return G.destroy(new Error(`Invalid ${Q}: ${X}`)),!1;se+=Object.getOwnPropertyNames(X).reduce((j,$)=>{let ee=X[$];return Array.isArray(ee)?j+=ee.reduce((he,pe)=>(he+=3+a.byteLength($.toString())+2+a.byteLength(pe.toString()),he),0):j+=3+a.byteLength($.toString())+2+a.byteLength(X[$].toString()),j},0);break}default:return G.destroy(new Error(`Invalid property ${Q}: ${X}`)),!1}return se}if(L)for(let Q in L){let X=0,me=0,se=L[Q];if(se!==void 0){if(Array.isArray(se))for(let j=0;j<se.length;j++){if(me=V(Q,se[j]),!me)return!1;X+=me}else{if(me=V(Q,se),!me)return!1;X=me}if(!X)return!1;ne+=X}}return{length:a.byteLength(d(ne))+ne,write(){ye(G,L,ne)}}}function C(G,L,ne,V){let Q=["reasonString","userProperties"],X=ne&&ne.properties&&ne.properties.maximumPacketSize?ne.properties.maximumPacketSize:0,me=J(G,L);if(X)for(;V+me.length>X;){let se=Q.shift();if(se&&L[se])delete L[se],me=J(G,L);else return!1}return me}function Y(G,L,ne){switch(o.propertiesTypes[L]){case"byte":{G.write(a.from([o.properties[L]])),G.write(a.from([+ne]));break}case"int8":{G.write(a.from([o.properties[L]])),G.write(a.from([ne]));break}case"binary":{G.write(a.from([o.properties[L]])),W(G,ne);break}case"int16":{G.write(a.from([o.properties[L]])),f(G,ne);break}case"int32":{G.write(a.from([o.properties[L]])),re(G,ne);break}case"var":{G.write(a.from([o.properties[L]])),U(G,ne);break}case"string":{G.write(a.from([o.properties[L]])),F(G,ne);break}case"pair":{Object.getOwnPropertyNames(ne).forEach(V=>{let Q=ne[V];Array.isArray(Q)?Q.forEach(X=>{G.write(a.from([o.properties[L]])),oe(G,V.toString(),X.toString())}):(G.write(a.from([o.properties[L]])),oe(G,V.toString(),Q.toString()))});break}default:return G.destroy(new Error(`Invalid property ${L} value: ${ne}`)),!1}}function ye(G,L,ne){U(G,ne);for(let V in L)if(Object.prototype.hasOwnProperty.call(L,V)&&L[V]!=null){let Q=L[V];if(Array.isArray(Q))for(let X=0;X<Q.length;X++)Y(G,V,Q[X]);else Y(G,V,Q)}}function te(G){return G?G instanceof a?G.length:a.byteLength(G):0}function we(G){return typeof G=="string"||G instanceof a}t.exports=b}),Wu=de((u,t)=>{le(),ce(),ue();var o=Ia(),{EventEmitter:a}=(Tt(),Re(_t)),{Buffer:l}=(Be(),Re(Ue));function e(n,i){let s=new r;return o(n,s,i),s.concat()}var r=class extends a{constructor(){super(),this._array=new Array(20),this._i=0}write(n){return this._array[this._i++]=n,!0}concat(){let n=0,i=new Array(this._array.length),s=this._array,c=0,h;for(h=0;h<s.length&&s[h]!==void 0;h++)typeof s[h]!="string"?i[h]=s[h].length:i[h]=l.byteLength(s[h]),n+=i[h];let d=l.allocUnsafe(n);for(h=0;h<s.length&&s[h]!==void 0;h++)typeof s[h]!="string"?(s[h].copy(d,c),c+=i[h]):(d.write(s[h],c),c+=i[h]);return d}destroy(n){n&&this.emit("error",n)}};t.exports=e}),$u=de(u=>{le(),ce(),ue(),u.parser=Bu().parser,u.generate=Wu(),u.writeToStream=Ia()}),qu=de((u,t)=>{le(),ce(),ue(),t.exports=a;function o(e){return e instanceof Dr?Dr.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}function a(e){if(e=e||{},e.circles)return l(e);let r=new Map;if(r.set(Date,h=>new Date(h)),r.set(Map,(h,d)=>new Map(i(Array.from(h),d))),r.set(Set,(h,d)=>new Set(i(Array.from(h),d))),e.constructorHandlers)for(let h of e.constructorHandlers)r.set(h[0],h[1]);let n=null;return e.proto?c:s;function i(h,d){let m=Object.keys(h),f=new Array(m.length);for(let y=0;y<m.length;y++){let b=m[y],S=h[b];typeof S!="object"||S===null?f[b]=S:S.constructor!==Object&&(n=r.get(S.constructor))?f[b]=n(S,d):ArrayBuffer.isView(S)?f[b]=o(S):f[b]=d(S)}return f}function s(h){if(typeof h!="object"||h===null)return h;if(Array.isArray(h))return i(h,s);if(h.constructor!==Object&&(n=r.get(h.constructor)))return n(h,s);let d={};for(let m in h){if(Object.hasOwnProperty.call(h,m)===!1)continue;let f=h[m];typeof f!="object"||f===null?d[m]=f:f.constructor!==Object&&(n=r.get(f.constructor))?d[m]=n(f,s):ArrayBuffer.isView(f)?d[m]=o(f):d[m]=s(f)}return d}function c(h){if(typeof h!="object"||h===null)return h;if(Array.isArray(h))return i(h,c);if(h.constructor!==Object&&(n=r.get(h.constructor)))return n(h,c);let d={};for(let m in h){let f=h[m];typeof f!="object"||f===null?d[m]=f:f.constructor!==Object&&(n=r.get(f.constructor))?d[m]=n(f,c):ArrayBuffer.isView(f)?d[m]=o(f):d[m]=c(f)}return d}}function l(e){let r=[],n=[],i=new Map;if(i.set(Date,m=>new Date(m)),i.set(Map,(m,f)=>new Map(c(Array.from(m),f))),i.set(Set,(m,f)=>new Set(c(Array.from(m),f))),e.constructorHandlers)for(let m of e.constructorHandlers)i.set(m[0],m[1]);let s=null;return e.proto?d:h;function c(m,f){let y=Object.keys(m),b=new Array(y.length);for(let S=0;S<y.length;S++){let g=y[S],w=m[g];if(typeof w!="object"||w===null)b[g]=w;else if(w.constructor!==Object&&(s=i.get(w.constructor)))b[g]=s(w,f);else if(ArrayBuffer.isView(w))b[g]=o(w);else{let x=r.indexOf(w);x!==-1?b[g]=n[x]:b[g]=f(w)}}return b}function h(m){if(typeof m!="object"||m===null)return m;if(Array.isArray(m))return c(m,h);if(m.constructor!==Object&&(s=i.get(m.constructor)))return s(m,h);let f={};r.push(m),n.push(f);for(let y in m){if(Object.hasOwnProperty.call(m,y)===!1)continue;let b=m[y];if(typeof b!="object"||b===null)f[y]=b;else if(b.constructor!==Object&&(s=i.get(b.constructor)))f[y]=s(b,h);else if(ArrayBuffer.isView(b))f[y]=o(b);else{let S=r.indexOf(b);S!==-1?f[y]=n[S]:f[y]=h(b)}}return r.pop(),n.pop(),f}function d(m){if(typeof m!="object"||m===null)return m;if(Array.isArray(m))return c(m,d);if(m.constructor!==Object&&(s=i.get(m.constructor)))return s(m,d);let f={};r.push(m),n.push(f);for(let y in m){let b=m[y];if(typeof b!="object"||b===null)f[y]=b;else if(b.constructor!==Object&&(s=i.get(b.constructor)))f[y]=s(b,d);else if(ArrayBuffer.isView(b))f[y]=o(b);else{let S=r.indexOf(b);S!==-1?f[y]=n[S]:f[y]=d(b)}}return r.pop(),n.pop(),f}}}),Ku=de((u,t)=>{le(),ce(),ue(),t.exports=qu()()}),Oa=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"__esModule",{value:!0}),u.validateTopic=t,u.validateTopics=o;function t(a){let l=a.split("/");for(let e=0;e<l.length;e++)if(l[e]!=="+"){if(l[e]==="#")return e===l.length-1;if(l[e].indexOf("+")!==-1||l[e].indexOf("#")!==-1)return!1}return!0}function o(a){if(a.length===0)return"empty_topic_list";for(let l=0;l<a.length;l++)if(!t(a[l]))return a[l];return null}}),ka=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"__esModule",{value:!0});var t=Ct(),o={objectMode:!0},a={clean:!0},l=class{options;_inflights;constructor(e){this.options=e||{},this.options={...a,...e},this._inflights=new Map}put(e,r){return this._inflights.set(e.messageId,e),r&&r(),this}createStream(){let e=new t.Readable(o),r=[],n=!1,i=0;return this._inflights.forEach((s,c)=>{r.push(s)}),e._read=()=>{!n&&i<r.length?e.push(r[i++]):e.push(null)},e.destroy=s=>{if(!n)return n=!0,setTimeout(()=>{e.emit("close")},0),e},e}del(e,r){let n=this._inflights.get(e.messageId);return n?(this._inflights.delete(e.messageId),r(null,n)):r&&r(new Error("missing packet")),this}get(e,r){let n=this._inflights.get(e.messageId);return n?r(null,n):r&&r(new Error("missing packet")),this}close(e){this.options.clean&&(this._inflights=null),e&&e()}};u.default=l}),Vu=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"__esModule",{value:!0});var t=[0,16,128,131,135,144,145,151,153],o=(a,l,e)=>{a.log("handlePublish: packet %o",l),e=typeof e<"u"?e:a.noop;let r=l.topic.toString(),n=l.payload,{qos:i}=l,{messageId:s}=l,{options:c}=a;if(a.options.protocolVersion===5){let h;if(l.properties&&(h=l.properties.topicAlias),typeof h<"u")if(r.length===0)if(h>0&&h<=65535){let d=a.topicAliasRecv.getTopicByAlias(h);if(d)r=d,a.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",r,h);else{a.log("handlePublish :: unregistered topic alias. alias: %d",h),a.emit("error",new Error("Received unregistered Topic Alias"));return}}else{a.log("handlePublish :: topic alias out of range. alias: %d",h),a.emit("error",new Error("Received Topic Alias is out of range"));return}else if(a.topicAliasRecv.put(r,h))a.log("handlePublish :: registered topic: %s - alias: %d",r,h);else{a.log("handlePublish :: topic alias out of range. alias: %d",h),a.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(a.log("handlePublish: qos %d",i),i){case 2:{c.customHandleAcks(r,n,l,(h,d)=>{if(typeof h=="number"&&(d=h,h=null),h)return a.emit("error",h);if(t.indexOf(d)===-1)return a.emit("error",new Error("Wrong reason code for pubrec"));d?a._sendPacket({cmd:"pubrec",messageId:s,reasonCode:d},e):a.incomingStore.put(l,()=>{a._sendPacket({cmd:"pubrec",messageId:s},e)})});break}case 1:{c.customHandleAcks(r,n,l,(h,d)=>{if(typeof h=="number"&&(d=h,h=null),h)return a.emit("error",h);if(t.indexOf(d)===-1)return a.emit("error",new Error("Wrong reason code for puback"));d||a.emit("message",r,n,l),a.handleMessage(l,m=>{if(m)return e&&e(m);a._sendPacket({cmd:"puback",messageId:s,reasonCode:d},e)})});break}case 0:a.emit("message",r,n,l),a.handleMessage(l,e);break;default:a.log("handlePublish: unknown QoS. Doing nothing.");break}};u.default=o}),zu=de((u,t)=>{t.exports={version:"5.15.0"}}),$t=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"__esModule",{value:!0}),u.MQTTJS_VERSION=u.nextTick=u.ErrorWithSubackPacket=u.ErrorWithReasonCode=void 0,u.applyMixin=a;var t=class Pa extends Error{code;constructor(e,r){super(e),this.code=r,Object.setPrototypeOf(this,Pa.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};u.ErrorWithReasonCode=t;var o=class Ta extends Error{packet;constructor(e,r){super(e),this.packet=r,Object.setPrototypeOf(this,Ta.prototype),Object.getPrototypeOf(this).name="ErrorWithSubackPacket"}};u.ErrorWithSubackPacket=o;function a(l,e,r=!1){let n=[e];for(;;){let i=n[0],s=Object.getPrototypeOf(i);if(s?.prototype)n.unshift(s);else break}for(let i of n)for(let s of Object.getOwnPropertyNames(i.prototype))(r||s!=="constructor")&&Object.defineProperty(l.prototype,s,Object.getOwnPropertyDescriptor(i.prototype,s)??Object.create(null))}u.nextTick=typeof Ce?.nextTick=="function"?Ce.nextTick:l=>{setTimeout(l,0)},u.MQTTJS_VERSION=zu().version}),zr=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"__esModule",{value:!0}),u.ReasonCodes=void 0;var t=$t();u.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var o=(a,l)=>{let{messageId:e}=l,r=l.cmd,n=null,i=a.outgoing[e]?a.outgoing[e].cb:null,s=null;if(!i){a.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(a.log("_handleAck :: packet type",r),r){case"pubcomp":case"puback":{let c=l.reasonCode;c&&c>0&&c!==16?(s=new t.ErrorWithReasonCode(`Publish error: ${u.ReasonCodes[c]}`,c),a._removeOutgoingAndStoreMessage(e,()=>{i(s,l)})):a._removeOutgoingAndStoreMessage(e,i);break}case"pubrec":{n={cmd:"pubrel",qos:2,messageId:e};let c=l.reasonCode;c&&c>0&&c!==16?(s=new t.ErrorWithReasonCode(`Publish error: ${u.ReasonCodes[c]}`,c),a._removeOutgoingAndStoreMessage(e,()=>{i(s,l)})):a._sendPacket(n);break}case"suback":{delete a.outgoing[e],a.messageIdProvider.deallocate(e);let c=l.granted;for(let h=0;h<c.length;h++){let d=c[h];if((d&128)!==0){s=new Error(`Subscribe error: ${u.ReasonCodes[d]}`),s.code=d;let m=a.messageIdToTopic[e];m&&m.forEach(f=>{delete a._resubscribeTopics[f]})}}delete a.messageIdToTopic[e],a._invokeStoreProcessingQueue(),i(s,l);break}case"unsuback":{delete a.outgoing[e],a.messageIdProvider.deallocate(e),a._invokeStoreProcessingQueue(),i(null,l);break}default:a.emit("error",new Error("unrecognized packet type"))}a.disconnecting&&Object.keys(a.outgoing).length===0&&a.emit("outgoingEmpty")};u.default=o}),Hu=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"__esModule",{value:!0});var t=$t(),o=zr(),a=(l,e)=>{let{options:r}=l,n=r.protocolVersion,i=n===5?e.reasonCode:e.returnCode;if(n!==5){let s=new t.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${n}`,i);l.emit("error",s);return}l.handleAuth(e,(s,c)=>{if(s){l.emit("error",s);return}if(i===24)l.reconnecting=!1,l._sendPacket(c);else{let h=new t.ErrorWithReasonCode(`Connection refused: ${o.ReasonCodes[i]}`,i);l.emit("error",h)}})};u.default=a}),Gu=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"__esModule",{value:!0}),u.LRUCache=void 0;var t=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,o=new Set,a=typeof Ce=="object"&&Ce?Ce:{},l=(m,f,y,b)=>{typeof a.emitWarning=="function"?a.emitWarning(m,f,y,b):console.error(`[${y}] ${f}: ${m}`)},e=globalThis.AbortController,r=globalThis.AbortSignal;if(typeof e>"u"){r=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(y,b){this._onabort.push(b)}},e=class{constructor(){f()}signal=new r;abort(y){if(!this.signal.aborted){this.signal.reason=y,this.signal.aborted=!0;for(let b of this.signal._onabort)b(y);this.signal.onabort?.(y)}}};let m=a.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",f=()=>{m&&(m=!1,l("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",f))}}var n=m=>!o.has(m),i=m=>m&&m===Math.floor(m)&&m>0&&isFinite(m),s=m=>i(m)?m<=Math.pow(2,8)?Uint8Array:m<=Math.pow(2,16)?Uint16Array:m<=Math.pow(2,32)?Uint32Array:m<=Number.MAX_SAFE_INTEGER?c:null:null,c=class extends Array{constructor(m){super(m),this.fill(0)}},h=class Xt{heap;length;static#l=!1;static create(f){let y=s(f);if(!y)return[];Xt.#l=!0;let b=new Xt(f,y);return Xt.#l=!1,b}constructor(f,y){if(!Xt.#l)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new y(f),this.length=0}push(f){this.heap[this.length++]=f}pop(){return this.heap[--this.length]}},d=class Ra{#l;#f;#g;#y;#T;#R;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#i;#m;#n;#r;#e;#u;#h;#a;#o;#b;#s;#v;#w;#p;#_;#I;#c;static unsafeExposeInternals(f){return{starts:f.#w,ttls:f.#p,sizes:f.#v,keyMap:f.#n,keyList:f.#r,valList:f.#e,next:f.#u,prev:f.#h,get head(){return f.#a},get tail(){return f.#o},free:f.#b,isBackgroundFetch:y=>f.#t(y),backgroundFetch:(y,b,S,g)=>f.#N(y,b,S,g),moveToTail:y=>f.#P(y),indexes:y=>f.#S(y),rindexes:y=>f.#E(y),isStale:y=>f.#d(y)}}get max(){return this.#l}get maxSize(){return this.#f}get calculatedSize(){return this.#m}get size(){return this.#i}get fetchMethod(){return this.#T}get memoMethod(){return this.#R}get dispose(){return this.#g}get disposeAfter(){return this.#y}constructor(f){let{max:y=0,ttl:b,ttlResolution:S=1,ttlAutopurge:g,updateAgeOnGet:w,updateAgeOnHas:x,allowStale:v,dispose:A,disposeAfter:E,noDisposeOnSet:O,noUpdateTTL:R,maxSize:P=0,maxEntrySize:M=0,sizeCalculation:k,fetchMethod:B,memoMethod:U,noDeleteOnFetchRejection:F,noDeleteOnStaleGet:oe,allowStaleOnFetchRejection:H,allowStaleOnFetchAbort:K,ignoreFetchAbort:re}=f;if(y!==0&&!i(y))throw new TypeError("max option must be a nonnegative integer");let W=y?s(y):Array;if(!W)throw new Error("invalid max value: "+y);if(this.#l=y,this.#f=P,this.maxEntrySize=M||this.#f,this.sizeCalculation=k,this.sizeCalculation){if(!this.#f&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(U!==void 0&&typeof U!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#R=U,B!==void 0&&typeof B!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#T=B,this.#I=!!B,this.#n=new Map,this.#r=new Array(y).fill(void 0),this.#e=new Array(y).fill(void 0),this.#u=new W(y),this.#h=new W(y),this.#a=0,this.#o=0,this.#b=h.create(y),this.#i=0,this.#m=0,typeof A=="function"&&(this.#g=A),typeof E=="function"?(this.#y=E,this.#s=[]):(this.#y=void 0,this.#s=void 0),this.#_=!!this.#g,this.#c=!!this.#y,this.noDisposeOnSet=!!O,this.noUpdateTTL=!!R,this.noDeleteOnFetchRejection=!!F,this.allowStaleOnFetchRejection=!!H,this.allowStaleOnFetchAbort=!!K,this.ignoreFetchAbort=!!re,this.maxEntrySize!==0){if(this.#f!==0&&!i(this.#f))throw new TypeError("maxSize must be a positive integer if specified");if(!i(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#W()}if(this.allowStale=!!v,this.noDeleteOnStaleGet=!!oe,this.updateAgeOnGet=!!w,this.updateAgeOnHas=!!x,this.ttlResolution=i(S)||S===0?S:1,this.ttlAutopurge=!!g,this.ttl=b||0,this.ttl){if(!i(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#l===0&&this.ttl===0&&this.#f===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#l&&!this.#f){let J="LRU_CACHE_UNBOUNDED";n(J)&&(o.add(J),l("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",J,Ra))}}getRemainingTTL(f){return this.#n.has(f)?1/0:0}#M(){let f=new c(this.#l),y=new c(this.#l);this.#p=f,this.#w=y,this.#L=(g,w,x=t.now())=>{if(y[g]=w!==0?x:0,f[g]=w,w!==0&&this.ttlAutopurge){let v=setTimeout(()=>{this.#d(g)&&this.#x(this.#r[g],"expire")},w+1);v.unref&&v.unref()}},this.#O=g=>{y[g]=f[g]!==0?t.now():0},this.#A=(g,w)=>{if(f[w]){let x=f[w],v=y[w];if(!x||!v)return;g.ttl=x,g.start=v,g.now=b||S();let A=g.now-v;g.remainingTTL=x-A}};let b=0,S=()=>{let g=t.now();if(this.ttlResolution>0){b=g;let w=setTimeout(()=>b=0,this.ttlResolution);w.unref&&w.unref()}return g};this.getRemainingTTL=g=>{let w=this.#n.get(g);if(w===void 0)return 0;let x=f[w],v=y[w];if(!x||!v)return 1/0;let A=(b||S())-v;return x-A},this.#d=g=>{let w=y[g],x=f[g];return!!x&&!!w&&(b||S())-w>x}}#O=()=>{};#A=()=>{};#L=()=>{};#d=()=>!1;#W(){let f=new c(this.#l);this.#m=0,this.#v=f,this.#k=y=>{this.#m-=f[y],f[y]=0},this.#U=(y,b,S,g)=>{if(this.#t(b))return 0;if(!i(S))if(g){if(typeof g!="function")throw new TypeError("sizeCalculation must be a function");if(S=g(b,y),!i(S))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return S},this.#C=(y,b,S)=>{if(f[y]=b,this.#f){let g=this.#f-f[y];for(;this.#m>g;)this.#j(!0)}this.#m+=f[y],S&&(S.entrySize=b,S.totalCalculatedSize=this.#m)}}#k=f=>{};#C=(f,y,b)=>{};#U=(f,y,b,S)=>{if(b||S)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#S({allowStale:f=this.allowStale}={}){if(this.#i)for(let y=this.#o;!(!this.#B(y)||((f||!this.#d(y))&&(yield y),y===this.#a));)y=this.#h[y]}*#E({allowStale:f=this.allowStale}={}){if(this.#i)for(let y=this.#a;!(!this.#B(y)||((f||!this.#d(y))&&(yield y),y===this.#o));)y=this.#u[y]}#B(f){return f!==void 0&&this.#n.get(this.#r[f])===f}*entries(){for(let f of this.#S())this.#e[f]!==void 0&&this.#r[f]!==void 0&&!this.#t(this.#e[f])&&(yield[this.#r[f],this.#e[f]])}*rentries(){for(let f of this.#E())this.#e[f]!==void 0&&this.#r[f]!==void 0&&!this.#t(this.#e[f])&&(yield[this.#r[f],this.#e[f]])}*keys(){for(let f of this.#S()){let y=this.#r[f];y!==void 0&&!this.#t(this.#e[f])&&(yield y)}}*rkeys(){for(let f of this.#E()){let y=this.#r[f];y!==void 0&&!this.#t(this.#e[f])&&(yield y)}}*values(){for(let f of this.#S())this.#e[f]!==void 0&&!this.#t(this.#e[f])&&(yield this.#e[f])}*rvalues(){for(let f of this.#E())this.#e[f]!==void 0&&!this.#t(this.#e[f])&&(yield this.#e[f])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(f,y={}){for(let b of this.#S()){let S=this.#e[b],g=this.#t(S)?S.__staleWhileFetching:S;if(g!==void 0&&f(g,this.#r[b],this))return this.get(this.#r[b],y)}}forEach(f,y=this){for(let b of this.#S()){let S=this.#e[b],g=this.#t(S)?S.__staleWhileFetching:S;g!==void 0&&f.call(y,g,this.#r[b],this)}}rforEach(f,y=this){for(let b of this.#E()){let S=this.#e[b],g=this.#t(S)?S.__staleWhileFetching:S;g!==void 0&&f.call(y,g,this.#r[b],this)}}purgeStale(){let f=!1;for(let y of this.#E({allowStale:!0}))this.#d(y)&&(this.#x(this.#r[y],"expire"),f=!0);return f}info(f){let y=this.#n.get(f);if(y===void 0)return;let b=this.#e[y],S=this.#t(b)?b.__staleWhileFetching:b;if(S===void 0)return;let g={value:S};if(this.#p&&this.#w){let w=this.#p[y],x=this.#w[y];if(w&&x){let v=w-(t.now()-x);g.ttl=v,g.start=Date.now()}}return this.#v&&(g.size=this.#v[y]),g}dump(){let f=[];for(let y of this.#S({allowStale:!0})){let b=this.#r[y],S=this.#e[y],g=this.#t(S)?S.__staleWhileFetching:S;if(g===void 0||b===void 0)continue;let w={value:g};if(this.#p&&this.#w){w.ttl=this.#p[y];let x=t.now()-this.#w[y];w.start=Math.floor(Date.now()-x)}this.#v&&(w.size=this.#v[y]),f.unshift([b,w])}return f}load(f){this.clear();for(let[y,b]of f){if(b.start){let S=Date.now()-b.start;b.start=t.now()-S}this.set(y,b.value,b)}}set(f,y,b={}){if(y===void 0)return this.delete(f),this;let{ttl:S=this.ttl,start:g,noDisposeOnSet:w=this.noDisposeOnSet,sizeCalculation:x=this.sizeCalculation,status:v}=b,{noUpdateTTL:A=this.noUpdateTTL}=b,E=this.#U(f,y,b.size||0,x);if(this.maxEntrySize&&E>this.maxEntrySize)return v&&(v.set="miss",v.maxEntrySizeExceeded=!0),this.#x(f,"set"),this;let O=this.#i===0?void 0:this.#n.get(f);if(O===void 0)O=this.#i===0?this.#o:this.#b.length!==0?this.#b.pop():this.#i===this.#l?this.#j(!1):this.#i,this.#r[O]=f,this.#e[O]=y,this.#n.set(f,O),this.#u[this.#o]=O,this.#h[O]=this.#o,this.#o=O,this.#i++,this.#C(O,E,v),v&&(v.set="add"),A=!1;else{this.#P(O);let R=this.#e[O];if(y!==R){if(this.#I&&this.#t(R)){R.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:P}=R;P!==void 0&&!w&&(this.#_&&this.#g?.(P,f,"set"),this.#c&&this.#s?.push([P,f,"set"]))}else w||(this.#_&&this.#g?.(R,f,"set"),this.#c&&this.#s?.push([R,f,"set"]));if(this.#k(O),this.#C(O,E,v),this.#e[O]=y,v){v.set="replace";let P=R&&this.#t(R)?R.__staleWhileFetching:R;P!==void 0&&(v.oldValue=P)}}else v&&(v.set="update")}if(S!==0&&!this.#p&&this.#M(),this.#p&&(A||this.#L(O,S,g),v&&this.#A(v,O)),!w&&this.#c&&this.#s){let R=this.#s,P;for(;P=R?.shift();)this.#y?.(...P)}return this}pop(){try{for(;this.#i;){let f=this.#e[this.#a];if(this.#j(!0),this.#t(f)){if(f.__staleWhileFetching)return f.__staleWhileFetching}else if(f!==void 0)return f}}finally{if(this.#c&&this.#s){let f=this.#s,y;for(;y=f?.shift();)this.#y?.(...y)}}}#j(f){let y=this.#a,b=this.#r[y],S=this.#e[y];return this.#I&&this.#t(S)?S.__abortController.abort(new Error("evicted")):(this.#_||this.#c)&&(this.#_&&this.#g?.(S,b,"evict"),this.#c&&this.#s?.push([S,b,"evict"])),this.#k(y),f&&(this.#r[y]=void 0,this.#e[y]=void 0,this.#b.push(y)),this.#i===1?(this.#a=this.#o=0,this.#b.length=0):this.#a=this.#u[y],this.#n.delete(b),this.#i--,y}has(f,y={}){let{updateAgeOnHas:b=this.updateAgeOnHas,status:S}=y,g=this.#n.get(f);if(g!==void 0){let w=this.#e[g];if(this.#t(w)&&w.__staleWhileFetching===void 0)return!1;if(this.#d(g))S&&(S.has="stale",this.#A(S,g));else return b&&this.#O(g),S&&(S.has="hit",this.#A(S,g)),!0}else S&&(S.has="miss");return!1}peek(f,y={}){let{allowStale:b=this.allowStale}=y,S=this.#n.get(f);if(S===void 0||!b&&this.#d(S))return;let g=this.#e[S];return this.#t(g)?g.__staleWhileFetching:g}#N(f,y,b,S){let g=y===void 0?void 0:this.#e[y];if(this.#t(g))return g;let w=new e,{signal:x}=b;x?.addEventListener("abort",()=>w.abort(x.reason),{signal:w.signal});let v={signal:w.signal,options:b,context:S},A=(k,B=!1)=>{let{aborted:U}=w.signal,F=b.ignoreFetchAbort&&k!==void 0;if(b.status&&(U&&!B?(b.status.fetchAborted=!0,b.status.fetchError=w.signal.reason,F&&(b.status.fetchAbortIgnored=!0)):b.status.fetchResolved=!0),U&&!F&&!B)return O(w.signal.reason);let oe=P;return this.#e[y]===P&&(k===void 0?oe.__staleWhileFetching?this.#e[y]=oe.__staleWhileFetching:this.#x(f,"fetch"):(b.status&&(b.status.fetchUpdated=!0),this.set(f,k,v.options))),k},E=k=>(b.status&&(b.status.fetchRejected=!0,b.status.fetchError=k),O(k)),O=k=>{let{aborted:B}=w.signal,U=B&&b.allowStaleOnFetchAbort,F=U||b.allowStaleOnFetchRejection,oe=F||b.noDeleteOnFetchRejection,H=P;if(this.#e[y]===P&&(!oe||H.__staleWhileFetching===void 0?this.#x(f,"fetch"):U||(this.#e[y]=H.__staleWhileFetching)),F)return b.status&&H.__staleWhileFetching!==void 0&&(b.status.returnedStale=!0),H.__staleWhileFetching;if(H.__returned===H)throw k},R=(k,B)=>{let U=this.#T?.(f,g,v);U&&U instanceof Promise&&U.then(F=>k(F===void 0?void 0:F),B),w.signal.addEventListener("abort",()=>{(!b.ignoreFetchAbort||b.allowStaleOnFetchAbort)&&(k(void 0),b.allowStaleOnFetchAbort&&(k=F=>A(F,!0)))})};b.status&&(b.status.fetchDispatched=!0);let P=new Promise(R).then(A,E),M=Object.assign(P,{__abortController:w,__staleWhileFetching:g,__returned:void 0});return y===void 0?(this.set(f,M,{...v.options,status:void 0}),y=this.#n.get(f)):this.#e[y]=M,M}#t(f){if(!this.#I)return!1;let y=f;return!!y&&y instanceof Promise&&y.hasOwnProperty("__staleWhileFetching")&&y.__abortController instanceof e}async fetch(f,y={}){let{allowStale:b=this.allowStale,updateAgeOnGet:S=this.updateAgeOnGet,noDeleteOnStaleGet:g=this.noDeleteOnStaleGet,ttl:w=this.ttl,noDisposeOnSet:x=this.noDisposeOnSet,size:v=0,sizeCalculation:A=this.sizeCalculation,noUpdateTTL:E=this.noUpdateTTL,noDeleteOnFetchRejection:O=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:R=this.allowStaleOnFetchRejection,ignoreFetchAbort:P=this.ignoreFetchAbort,allowStaleOnFetchAbort:M=this.allowStaleOnFetchAbort,context:k,forceRefresh:B=!1,status:U,signal:F}=y;if(!this.#I)return U&&(U.fetch="get"),this.get(f,{allowStale:b,updateAgeOnGet:S,noDeleteOnStaleGet:g,status:U});let oe={allowStale:b,updateAgeOnGet:S,noDeleteOnStaleGet:g,ttl:w,noDisposeOnSet:x,size:v,sizeCalculation:A,noUpdateTTL:E,noDeleteOnFetchRejection:O,allowStaleOnFetchRejection:R,allowStaleOnFetchAbort:M,ignoreFetchAbort:P,status:U,signal:F},H=this.#n.get(f);if(H===void 0){U&&(U.fetch="miss");let K=this.#N(f,H,oe,k);return K.__returned=K}else{let K=this.#e[H];if(this.#t(K)){let C=b&&K.__staleWhileFetching!==void 0;return U&&(U.fetch="inflight",C&&(U.returnedStale=!0)),C?K.__staleWhileFetching:K.__returned=K}let re=this.#d(H);if(!B&&!re)return U&&(U.fetch="hit"),this.#P(H),S&&this.#O(H),U&&this.#A(U,H),K;let W=this.#N(f,H,oe,k),J=W.__staleWhileFetching!==void 0&&b;return U&&(U.fetch=re?"stale":"refresh",J&&re&&(U.returnedStale=!0)),J?W.__staleWhileFetching:W.__returned=W}}async forceFetch(f,y={}){let b=await this.fetch(f,y);if(b===void 0)throw new Error("fetch() returned undefined");return b}memo(f,y={}){let b=this.#R;if(!b)throw new Error("no memoMethod provided to constructor");let{context:S,forceRefresh:g,...w}=y,x=this.get(f,w);if(!g&&x!==void 0)return x;let v=b(f,x,{options:w,context:S});return this.set(f,v,w),v}get(f,y={}){let{allowStale:b=this.allowStale,updateAgeOnGet:S=this.updateAgeOnGet,noDeleteOnStaleGet:g=this.noDeleteOnStaleGet,status:w}=y,x=this.#n.get(f);if(x!==void 0){let v=this.#e[x],A=this.#t(v);return w&&this.#A(w,x),this.#d(x)?(w&&(w.get="stale"),A?(w&&b&&v.__staleWhileFetching!==void 0&&(w.returnedStale=!0),b?v.__staleWhileFetching:void 0):(g||this.#x(f,"expire"),w&&b&&(w.returnedStale=!0),b?v:void 0)):(w&&(w.get="hit"),A?v.__staleWhileFetching:(this.#P(x),S&&this.#O(x),v))}else w&&(w.get="miss")}#F(f,y){this.#h[y]=f,this.#u[f]=y}#P(f){f!==this.#o&&(f===this.#a?this.#a=this.#u[f]:this.#F(this.#h[f],this.#u[f]),this.#F(this.#o,f),this.#o=f)}delete(f){return this.#x(f,"delete")}#x(f,y){let b=!1;if(this.#i!==0){let S=this.#n.get(f);if(S!==void 0)if(b=!0,this.#i===1)this.#D(y);else{this.#k(S);let g=this.#e[S];if(this.#t(g)?g.__abortController.abort(new Error("deleted")):(this.#_||this.#c)&&(this.#_&&this.#g?.(g,f,y),this.#c&&this.#s?.push([g,f,y])),this.#n.delete(f),this.#r[S]=void 0,this.#e[S]=void 0,S===this.#o)this.#o=this.#h[S];else if(S===this.#a)this.#a=this.#u[S];else{let w=this.#h[S];this.#u[w]=this.#u[S];let x=this.#u[S];this.#h[x]=this.#h[S]}this.#i--,this.#b.push(S)}}if(this.#c&&this.#s?.length){let S=this.#s,g;for(;g=S?.shift();)this.#y?.(...g)}return b}clear(){return this.#D("delete")}#D(f){for(let y of this.#E({allowStale:!0})){let b=this.#e[y];if(this.#t(b))b.__abortController.abort(new Error("deleted"));else{let S=this.#r[y];this.#_&&this.#g?.(b,S,f),this.#c&&this.#s?.push([b,S,f])}}if(this.#n.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#p&&this.#w&&(this.#p.fill(0),this.#w.fill(0)),this.#v&&this.#v.fill(0),this.#a=0,this.#o=0,this.#b.length=0,this.#m=0,this.#i=0,this.#c&&this.#s){let y=this.#s,b;for(;b=y?.shift();)this.#y?.(...b)}}};u.LRUCache=d}),dt=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"t",{value:!0}),u.ContainerIterator=u.Container=u.Base=void 0;var t=class{constructor(l=0){this.iteratorType=l}equals(l){return this.o===l.o}};u.ContainerIterator=t;var o=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};u.Base=o;var a=class extends o{};u.Container=a}),Qu=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"t",{value:!0}),u.default=void 0;var t=dt(),o=class extends t.Base{constructor(l=[]){super(),this.S=[];let e=this;l.forEach(function(r){e.push(r)})}clear(){this.i=0,this.S=[]}push(l){return this.S.push(l),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},a=o;u.default=a}),Yu=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"t",{value:!0}),u.default=void 0;var t=dt(),o=class extends t.Base{constructor(l=[]){super(),this.j=0,this.q=[];let e=this;l.forEach(function(r){e.push(r)})}clear(){this.q=[],this.i=this.j=0}push(l){let e=this.q.length;if(this.j/e>.5&&this.j+this.i>=e&&e>4096){let r=this.i;for(let n=0;n<r;++n)this.q[n]=this.q[this.j+n];this.j=0,this.q[this.i]=l}else this.q[this.j+this.i]=l;return++this.i}pop(){if(this.i===0)return;let l=this.q[this.j++];return this.i-=1,l}front(){if(this.i!==0)return this.q[this.j]}},a=o;u.default=a}),Ju=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"t",{value:!0}),u.default=void 0;var t=dt(),o=class extends t.Base{constructor(l=[],e=function(n,i){return n>i?-1:n<i?1:0},r=!0){if(super(),this.v=e,Array.isArray(l))this.C=r?[...l]:l;else{this.C=[];let i=this;l.forEach(function(s){i.C.push(s)})}this.i=this.C.length;let n=this.i>>1;for(let i=this.i-1>>1;i>=0;--i)this.k(i,n)}m(l){let e=this.C[l];for(;l>0;){let r=l-1>>1,n=this.C[r];if(this.v(n,e)<=0)break;this.C[l]=n,l=r}this.C[l]=e}k(l,e){let r=this.C[l];for(;l<e;){let n=l<<1|1,i=n+1,s=this.C[n];if(i<this.i&&this.v(s,this.C[i])>0&&(n=i,s=this.C[i]),this.v(s,r)>=0)break;this.C[l]=s,l=n}this.C[l]=r}clear(){this.i=0,this.C.length=0}push(l){this.C.push(l),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let l=this.C[0],e=this.C.pop();return this.i-=1,this.i&&(this.C[0]=e,this.k(0,this.i>>1)),l}top(){return this.C[0]}find(l){return this.C.indexOf(l)>=0}remove(l){let e=this.C.indexOf(l);return e<0?!1:(e===0?this.pop():e===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(e,1,this.C.pop()),this.i-=1,this.m(e),this.k(e,this.i>>1)),!0)}updateItem(l){let e=this.C.indexOf(l);return e<0?!1:(this.m(e),this.k(e,this.i>>1),!0)}toArray(){return[...this.C]}},a=o;u.default=a}),po=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"t",{value:!0}),u.default=void 0;var t=dt(),o=class extends t.Container{},a=o;u.default=a}),gt=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"t",{value:!0}),u.throwIteratorAccessError=t;function t(){throw new RangeError("Iterator access denied!")}}),Ca=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"t",{value:!0}),u.RandomIterator=void 0;var t=dt(),o=gt(),a=class extends t.ContainerIterator{constructor(l,e){super(e),this.o=l,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,o.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,o.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,o.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,o.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(l){this.container.setElementByPos(this.o,l)}};u.RandomIterator=a}),Xu=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"t",{value:!0}),u.default=void 0;var t=a(po()),o=Ca();function a(n){return n&&n.t?n:{default:n}}var l=class ja extends o.RandomIterator{constructor(i,s,c){super(i,c),this.container=s}copy(){return new ja(this.o,this.container,this.iteratorType)}},e=class extends t.default{constructor(n=[],i=!0){if(super(),Array.isArray(n))this.J=i?[...n]:n,this.i=n.length;else{this.J=[];let s=this;n.forEach(function(c){s.pushBack(c)})}}clear(){this.i=0,this.J.length=0}begin(){return new l(0,this)}end(){return new l(this.i,this)}rBegin(){return new l(this.i-1,this,1)}rEnd(){return new l(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;return this.J[n]}eraseElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;return this.J.splice(n,1),this.i-=1,this.i}eraseElementByValue(n){let i=0;for(let s=0;s<this.i;++s)this.J[s]!==n&&(this.J[i++]=this.J[s]);return this.i=this.J.length=i,this.i}eraseElementByIterator(n){let i=n.o;return n=n.next(),this.eraseElementByPos(i),n}pushBack(n){return this.J.push(n),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(n,i){if(n<0||n>this.i-1)throw new RangeError;this.J[n]=i}insert(n,i,s=1){if(n<0||n>this.i)throw new RangeError;return this.J.splice(n,0,...new Array(s).fill(i)),this.i+=s,this.i}find(n){for(let i=0;i<this.i;++i)if(this.J[i]===n)return new l(i,this);return this.end()}reverse(){this.J.reverse()}unique(){let n=1;for(let i=1;i<this.i;++i)this.J[i]!==this.J[i-1]&&(this.J[n++]=this.J[i]);return this.i=this.J.length=n,this.i}sort(n){this.J.sort(n)}forEach(n){for(let i=0;i<this.i;++i)n(this.J[i],i,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},r=e;u.default=r}),Zu=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"t",{value:!0}),u.default=void 0;var t=l(po()),o=dt(),a=gt();function l(i){return i&&i.t?i:{default:i}}var e=class Na extends o.ContainerIterator{constructor(s,c,h,d){super(d),this.o=s,this.h=c,this.container=h,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o.l}set pointer(s){this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o.l=s}copy(){return new Na(this.o,this.h,this.container,this.iteratorType)}},r=class extends t.default{constructor(i=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let s=this;i.forEach(function(c){s.pushBack(c)})}V(i){let{L:s,B:c}=i;s.B=c,c.L=s,i===this.p&&(this.p=c),i===this._&&(this._=s),this.i-=1}G(i,s){let c=s.B,h={l:i,L:s,B:c};s.B=h,c.L=h,s===this.h&&(this.p=h),c===this.h&&(this._=h),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new e(this.p,this.h,this)}end(){return new e(this.h,this.h,this)}rBegin(){return new e(this._,this.h,this,1)}rEnd(){return new e(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let s=this.p;for(;i--;)s=s.B;return s.l}eraseElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let s=this.p;for(;i--;)s=s.B;return this.V(s),this.i}eraseElementByValue(i){let s=this.p;for(;s!==this.h;)s.l===i&&this.V(s),s=s.B;return this.i}eraseElementByIterator(i){let s=i.o;return s===this.h&&(0,a.throwIteratorAccessError)(),i=i.next(),this.V(s),i}pushBack(i){return this.G(i,this._),this.i}popBack(){if(this.i===0)return;let i=this._.l;return this.V(this._),i}pushFront(i){return this.G(i,this.h),this.i}popFront(){if(this.i===0)return;let i=this.p.l;return this.V(this.p),i}setElementByPos(i,s){if(i<0||i>this.i-1)throw new RangeError;let c=this.p;for(;i--;)c=c.B;c.l=s}insert(i,s,c=1){if(i<0||i>this.i)throw new RangeError;if(c<=0)return this.i;if(i===0)for(;c--;)this.pushFront(s);else if(i===this.i)for(;c--;)this.pushBack(s);else{let h=this.p;for(let m=1;m<i;++m)h=h.B;let d=h.B;for(this.i+=c;c--;)h.B={l:s,L:h},h.B.L=h,h=h.B;h.B=d,d.L=h}return this.i}find(i){let s=this.p;for(;s!==this.h;){if(s.l===i)return new e(s,this.h,this);s=s.B}return this.end()}reverse(){if(this.i<=1)return;let i=this.p,s=this._,c=0;for(;c<<1<this.i;){let h=i.l;i.l=s.l,s.l=h,i=i.B,s=s.L,c+=1}}unique(){if(this.i<=1)return this.i;let i=this.p;for(;i!==this.h;){let s=i;for(;s.B!==this.h&&s.l===s.B.l;)s=s.B,this.i-=1;i.B=s.B,i.B.L=i,i=i.B}return this.i}sort(i){if(this.i<=1)return;let s=[];this.forEach(function(h){s.push(h)}),s.sort(i);let c=this.p;s.forEach(function(h){c.l=h,c=c.B})}merge(i){let s=this;if(this.i===0)i.forEach(function(c){s.pushBack(c)});else{let c=this.p;i.forEach(function(h){for(;c!==s.h&&c.l<=h;)c=c.B;s.G(h,c.L)})}return this.i}forEach(i){let s=this.p,c=0;for(;s!==this.h;)i(s.l,c++,this),s=s.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let i=this.p;for(;i!==this.h;)yield i.l,i=i.B}).bind(this)()}},n=r;u.default=n}),ec=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"t",{value:!0}),u.default=void 0;var t=a(po()),o=Ca();function a(n){return n&&n.t?n:{default:n}}var l=class Ma extends o.RandomIterator{constructor(i,s,c){super(i,c),this.container=s}copy(){return new Ma(this.o,this.container,this.iteratorType)}},e=class extends t.default{constructor(n=[],i=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let s=(()=>{if(typeof n.length=="number")return n.length;if(typeof n.size=="number")return n.size;if(typeof n.size=="function")return n.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=i,this.P=Math.max(Math.ceil(s/this.F),1);for(let d=0;d<this.P;++d)this.A.push(new Array(this.F));let c=Math.ceil(s/this.F);this.j=this.R=(this.P>>1)-(c>>1),this.D=this.N=this.F-s%this.F>>1;let h=this;n.forEach(function(d){h.pushBack(d)})}T(){let n=[],i=Math.max(this.P>>1,1);for(let s=0;s<i;++s)n[s]=new Array(this.F);for(let s=this.j;s<this.P;++s)n[n.length]=this.A[s];for(let s=0;s<this.R;++s)n[n.length]=this.A[s];n[n.length]=[...this.A[this.R]],this.j=i,this.R=n.length-1;for(let s=0;s<i;++s)n[n.length]=new Array(this.F);this.A=n,this.P=n.length}O(n){let i=this.D+n+1,s=i%this.F,c=s-1,h=this.j+(i-s)/this.F;return s===0&&(h-=1),h%=this.P,c<0&&(c+=this.F),{curNodeBucketIndex:h,curNodePointerIndex:c}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new l(0,this)}end(){return new l(this.i,this)}rBegin(){return new l(this.i-1,this,1)}rEnd(){return new l(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(n){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=n,this.i}popBack(){if(this.i===0)return;let n=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,n}pushFront(n){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=n,this.i}popFront(){if(this.i===0)return;let n=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,n}getElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let{curNodeBucketIndex:i,curNodePointerIndex:s}=this.O(n);return this.A[i][s]}setElementByPos(n,i){if(n<0||n>this.i-1)throw new RangeError;let{curNodeBucketIndex:s,curNodePointerIndex:c}=this.O(n);this.A[s][c]=i}insert(n,i,s=1){if(n<0||n>this.i)throw new RangeError;if(n===0)for(;s--;)this.pushFront(i);else if(n===this.i)for(;s--;)this.pushBack(i);else{let c=[];for(let h=n;h<this.i;++h)c.push(this.getElementByPos(h));this.cut(n-1);for(let h=0;h<s;++h)this.pushBack(i);for(let h=0;h<c.length;++h)this.pushBack(c[h])}return this.i}cut(n){if(n<0)return this.clear(),0;let{curNodeBucketIndex:i,curNodePointerIndex:s}=this.O(n);return this.R=i,this.N=s,this.i=n+1,this.i}eraseElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;if(n===0)this.popFront();else if(n===this.i-1)this.popBack();else{let i=[];for(let c=n+1;c<this.i;++c)i.push(this.getElementByPos(c));this.cut(n),this.popBack();let s=this;i.forEach(function(c){s.pushBack(c)})}return this.i}eraseElementByValue(n){if(this.i===0)return 0;let i=[];for(let c=0;c<this.i;++c){let h=this.getElementByPos(c);h!==n&&i.push(h)}let s=i.length;for(let c=0;c<s;++c)this.setElementByPos(c,i[c]);return this.cut(s-1)}eraseElementByIterator(n){let i=n.o;return this.eraseElementByPos(i),n=n.next(),n}find(n){for(let i=0;i<this.i;++i)if(this.getElementByPos(i)===n)return new l(i,this);return this.end()}reverse(){let n=0,i=this.i-1;for(;n<i;){let s=this.getElementByPos(n);this.setElementByPos(n,this.getElementByPos(i)),this.setElementByPos(i,s),n+=1,i-=1}}unique(){if(this.i<=1)return this.i;let n=1,i=this.getElementByPos(0);for(let s=1;s<this.i;++s){let c=this.getElementByPos(s);c!==i&&(i=c,this.setElementByPos(n++,c))}for(;this.i>n;)this.popBack();return this.i}sort(n){let i=[];for(let s=0;s<this.i;++s)i.push(this.getElementByPos(s));i.sort(n);for(let s=0;s<this.i;++s)this.setElementByPos(s,i[s])}shrinkToFit(){if(this.i===0)return;let n=[];this.forEach(function(i){n.push(i)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let i=0;i<this.P;++i)this.A.push(new Array(this.F));for(let i=0;i<n.length;++i)this.pushBack(n[i])}forEach(n){for(let i=0;i<this.i;++i)n(this.getElementByPos(i),i,this)}[Symbol.iterator](){return(function*(){for(let n=0;n<this.i;++n)yield this.getElementByPos(n)}).bind(this)()}},r=e;u.default=r}),tc=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"t",{value:!0}),u.TreeNodeEnableIndex=u.TreeNode=void 0;var t=class{constructor(a,l){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=a,this.l=l}L(){let a=this;if(a.ee===1&&a.tt.tt===a)a=a.W;else if(a.U)for(a=a.U;a.W;)a=a.W;else{let l=a.tt;for(;l.U===a;)a=l,l=a.tt;a=l}return a}B(){let a=this;if(a.W){for(a=a.W;a.U;)a=a.U;return a}else{let l=a.tt;for(;l.W===a;)a=l,l=a.tt;return a.W!==l?l:a}}te(){let a=this.tt,l=this.W,e=l.U;return a.tt===this?a.tt=l:a.U===this?a.U=l:a.W=l,l.tt=a,l.U=this,this.tt=l,this.W=e,e&&(e.tt=this),l}se(){let a=this.tt,l=this.U,e=l.W;return a.tt===this?a.tt=l:a.U===this?a.U=l:a.W=l,l.tt=a,l.W=this,this.tt=l,this.U=e,e&&(e.tt=this),l}};u.TreeNode=t;var o=class extends t{constructor(){super(...arguments),this.rt=1}te(){let a=super.te();return this.ie(),a.ie(),a}se(){let a=super.se();return this.ie(),a.ie(),a}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};u.TreeNodeEnableIndex=o}),La=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"t",{value:!0}),u.default=void 0;var t=tc(),o=dt(),a=gt(),l=class extends o.Container{constructor(r=function(i,s){return i<s?-1:i>s?1:0},n=!1){super(),this.Y=void 0,this.v=r,n?(this.re=t.TreeNodeEnableIndex,this.M=function(i,s,c){let h=this.ne(i,s,c);if(h){let d=h.tt;for(;d!==this.h;)d.rt+=1,d=d.tt;let m=this.he(h);if(m){let{parentNode:f,grandParent:y,curNode:b}=m;f.ie(),y.ie(),b.ie()}}return this.i},this.V=function(i){let s=this.fe(i);for(;s!==this.h;)s.rt-=1,s=s.tt}):(this.re=t.TreeNode,this.M=function(i,s,c){let h=this.ne(i,s,c);return h&&this.he(h),this.i},this.V=this.fe),this.h=new this.re}X(r,n){let i=this.h;for(;r;){let s=this.v(r.u,n);if(s<0)r=r.W;else if(s>0)i=r,r=r.U;else return r}return i}Z(r,n){let i=this.h;for(;r;)this.v(r.u,n)<=0?r=r.W:(i=r,r=r.U);return i}$(r,n){let i=this.h;for(;r;){let s=this.v(r.u,n);if(s<0)i=r,r=r.W;else if(s>0)r=r.U;else return r}return i}rr(r,n){let i=this.h;for(;r;)this.v(r.u,n)<0?(i=r,r=r.W):r=r.U;return i}ue(r){for(;;){let n=r.tt;if(n===this.h)return;if(r.ee===1){r.ee=0;return}if(r===n.U){let i=n.W;if(i.ee===1)i.ee=0,n.ee=1,n===this.Y?this.Y=n.te():n.te();else if(i.W&&i.W.ee===1){i.ee=n.ee,n.ee=0,i.W.ee=0,n===this.Y?this.Y=n.te():n.te();return}else i.U&&i.U.ee===1?(i.ee=1,i.U.ee=0,i.se()):(i.ee=1,r=n)}else{let i=n.U;if(i.ee===1)i.ee=0,n.ee=1,n===this.Y?this.Y=n.se():n.se();else if(i.U&&i.U.ee===1){i.ee=n.ee,n.ee=0,i.U.ee=0,n===this.Y?this.Y=n.se():n.se();return}else i.W&&i.W.ee===1?(i.ee=1,i.W.ee=0,i.te()):(i.ee=1,r=n)}}}fe(r){if(this.i===1)return this.clear(),this.h;let n=r;for(;n.U||n.W;){if(n.W)for(n=n.W;n.U;)n=n.U;else n=n.U;[r.u,n.u]=[n.u,r.u],[r.l,n.l]=[n.l,r.l],r=n}this.h.U===n?this.h.U=n.tt:this.h.W===n&&(this.h.W=n.tt),this.ue(n);let i=n.tt;return n===i.U?i.U=void 0:i.W=void 0,this.i-=1,this.Y.ee=0,i}oe(r,n){return r===void 0?!1:this.oe(r.U,n)||n(r)?!0:this.oe(r.W,n)}he(r){for(;;){let n=r.tt;if(n.ee===0)return;let i=n.tt;if(n===i.U){let s=i.W;if(s&&s.ee===1){if(s.ee=n.ee=0,i===this.Y)return;i.ee=1,r=i;continue}else if(r===n.W){if(r.ee=0,r.U&&(r.U.tt=n),r.W&&(r.W.tt=i),n.W=r.U,i.U=r.W,r.U=n,r.W=i,i===this.Y)this.Y=r,this.h.tt=r;else{let c=i.tt;c.U===i?c.U=r:c.W=r}return r.tt=i.tt,n.tt=r,i.tt=r,i.ee=1,{parentNode:n,grandParent:i,curNode:r}}else n.ee=0,i===this.Y?this.Y=i.se():i.se(),i.ee=1}else{let s=i.U;if(s&&s.ee===1){if(s.ee=n.ee=0,i===this.Y)return;i.ee=1,r=i;continue}else if(r===n.U){if(r.ee=0,r.U&&(r.U.tt=i),r.W&&(r.W.tt=n),i.W=r.U,n.U=r.W,r.U=i,r.W=n,i===this.Y)this.Y=r,this.h.tt=r;else{let c=i.tt;c.U===i?c.U=r:c.W=r}return r.tt=i.tt,n.tt=r,i.tt=r,i.ee=1,{parentNode:n,grandParent:i,curNode:r}}else n.ee=0,i===this.Y?this.Y=i.te():i.te(),i.ee=1}return}}ne(r,n,i){if(this.Y===void 0){this.i+=1,this.Y=new this.re(r,n),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let s,c=this.h.U,h=this.v(c.u,r);if(h===0){c.l=n;return}else if(h>0)c.U=new this.re(r,n),c.U.tt=c,s=c.U,this.h.U=s;else{let d=this.h.W,m=this.v(d.u,r);if(m===0){d.l=n;return}else if(m<0)d.W=new this.re(r,n),d.W.tt=d,s=d.W,this.h.W=s;else{if(i!==void 0){let f=i.o;if(f!==this.h){let y=this.v(f.u,r);if(y===0){f.l=n;return}else if(y>0){let b=f.L(),S=this.v(b.u,r);if(S===0){b.l=n;return}else S<0&&(s=new this.re(r,n),b.W===void 0?(b.W=s,s.tt=b):(f.U=s,s.tt=f))}}}if(s===void 0)for(s=this.Y;;){let f=this.v(s.u,r);if(f>0){if(s.U===void 0){s.U=new this.re(r,n),s.U.tt=s,s=s.U;break}s=s.U}else if(f<0){if(s.W===void 0){s.W=new this.re(r,n),s.W.tt=s,s=s.W;break}s=s.W}else{s.l=n;return}}}}return this.i+=1,s}I(r,n){for(;r;){let i=this.v(r.u,n);if(i<0)r=r.W;else if(i>0)r=r.U;else return r}return r||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(r,n){let i=r.o;if(i===this.h&&(0,a.throwIteratorAccessError)(),this.i===1)return i.u=n,!0;if(i===this.h.U)return this.v(i.B().u,n)>0?(i.u=n,!0):!1;if(i===this.h.W)return this.v(i.L().u,n)<0?(i.u=n,!0):!1;let s=i.L().u;if(this.v(s,n)>=0)return!1;let c=i.B().u;return this.v(c,n)<=0?!1:(i.u=n,!0)}eraseElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let n=0,i=this;return this.oe(this.Y,function(s){return r===n?(i.V(s),!0):(n+=1,!1)}),this.i}eraseElementByKey(r){if(this.i===0)return!1;let n=this.I(this.Y,r);return n===this.h?!1:(this.V(n),!0)}eraseElementByIterator(r){let n=r.o;n===this.h&&(0,a.throwIteratorAccessError)();let i=n.W===void 0;return r.iteratorType===0?i&&r.next():(!i||n.U===void 0)&&r.next(),this.V(n),r}forEach(r){let n=0;for(let i of this)r(i,n++,this)}getElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let n,i=0;for(let s of this){if(i===r){n=s;break}i+=1}return n}getHeight(){if(this.i===0)return 0;let r=function(n){return n?Math.max(r(n.U),r(n.W))+1:0};return r(this.Y)}},e=l;u.default=e}),Ua=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"t",{value:!0}),u.default=void 0;var t=dt(),o=gt(),a=class extends t.ContainerIterator{constructor(e,r,n){super(n),this.o=e,this.h=r,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,o.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,o.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let e=this.o,r=this.h.tt;if(e===this.h)return r?r.rt-1:0;let n=0;for(e.U&&(n+=e.U.rt);e!==r;){let i=e.tt;e===i.W&&(n+=1,i.U&&(n+=i.U.rt)),e=i}return n}},l=a;u.default=l}),rc=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"t",{value:!0}),u.default=void 0;var t=l(La()),o=l(Ua()),a=gt();function l(i){return i&&i.t?i:{default:i}}var e=class Ba extends o.default{constructor(s,c,h,d){super(s,c,d),this.container=h}get pointer(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o.u}copy(){return new Ba(this.o,this.h,this.container,this.iteratorType)}},r=class extends t.default{constructor(i=[],s,c){super(s,c);let h=this;i.forEach(function(d){h.insert(d)})}*K(i){i!==void 0&&(yield*this.K(i.U),yield i.u,yield*this.K(i.W))}begin(){return new e(this.h.U||this.h,this.h,this)}end(){return new e(this.h,this.h,this)}rBegin(){return new e(this.h.W||this.h,this.h,this,1)}rEnd(){return new e(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(i,s){return this.M(i,void 0,s)}find(i){let s=this.I(this.Y,i);return new e(s,this.h,this)}lowerBound(i){let s=this.X(this.Y,i);return new e(s,this.h,this)}upperBound(i){let s=this.Z(this.Y,i);return new e(s,this.h,this)}reverseLowerBound(i){let s=this.$(this.Y,i);return new e(s,this.h,this)}reverseUpperBound(i){let s=this.rr(this.Y,i);return new e(s,this.h,this)}union(i){let s=this;return i.forEach(function(c){s.insert(c)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},n=r;u.default=n}),nc=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"t",{value:!0}),u.default=void 0;var t=l(La()),o=l(Ua()),a=gt();function l(i){return i&&i.t?i:{default:i}}var e=class Fa extends o.default{constructor(s,c,h,d){super(s,c,d),this.container=h}get pointer(){this.o===this.h&&(0,a.throwIteratorAccessError)();let s=this;return new Proxy([],{get(c,h){if(h==="0")return s.o.u;if(h==="1")return s.o.l},set(c,h,d){if(h!=="1")throw new TypeError("props must be 1");return s.o.l=d,!0}})}copy(){return new Fa(this.o,this.h,this.container,this.iteratorType)}},r=class extends t.default{constructor(i=[],s,c){super(s,c);let h=this;i.forEach(function(d){h.setElement(d[0],d[1])})}*K(i){i!==void 0&&(yield*this.K(i.U),yield[i.u,i.l],yield*this.K(i.W))}begin(){return new e(this.h.U||this.h,this.h,this)}end(){return new e(this.h,this.h,this)}rBegin(){return new e(this.h.W||this.h,this.h,this,1)}rEnd(){return new e(this.h,this.h,this,1)}front(){if(this.i===0)return;let i=this.h.U;return[i.u,i.l]}back(){if(this.i===0)return;let i=this.h.W;return[i.u,i.l]}lowerBound(i){let s=this.X(this.Y,i);return new e(s,this.h,this)}upperBound(i){let s=this.Z(this.Y,i);return new e(s,this.h,this)}reverseLowerBound(i){let s=this.$(this.Y,i);return new e(s,this.h,this)}reverseUpperBound(i){let s=this.rr(this.Y,i);return new e(s,this.h,this)}setElement(i,s,c){return this.M(i,s,c)}find(i){let s=this.I(this.Y,i);return new e(s,this.h,this)}getElementByKey(i){return this.I(this.Y,i).l}union(i){let s=this;return i.forEach(function(c){s.setElement(c[0],c[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},n=r;u.default=n}),Da=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"t",{value:!0}),u.default=t;function t(o){let a=typeof o;return a==="object"&&o!==null||a==="function"}}),Wa=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"t",{value:!0}),u.HashContainerIterator=u.HashContainer=void 0;var t=dt(),o=l(Da()),a=gt();function l(n){return n&&n.t?n:{default:n}}var e=class extends t.ContainerIterator{constructor(n,i,s){super(s),this.o=n,this.h=i,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this})}};u.HashContainerIterator=e;var r=class extends t.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(n){let{L:i,B:s}=n;i.B=s,s.L=i,n===this.p&&(this.p=s),n===this._&&(this._=i),this.i-=1}M(n,i,s){s===void 0&&(s=(0,o.default)(n));let c;if(s){let h=n[this.HASH_TAG];if(h!==void 0)return this.H[h].l=i,this.i;Object.defineProperty(n,this.HASH_TAG,{value:this.H.length,configurable:!0}),c={u:n,l:i,L:this._,B:this.h},this.H.push(c)}else{let h=this.g[n];if(h)return h.l=i,this.i;c={u:n,l:i,L:this._,B:this.h},this.g[n]=c}return this.i===0?(this.p=c,this.h.B=c):this._.B=c,this._=c,this.h.L=c,++this.i}I(n,i){if(i===void 0&&(i=(0,o.default)(n)),i){let s=n[this.HASH_TAG];return s===void 0?this.h:this.H[s]}else return this.g[n]||this.h}clear(){let n=this.HASH_TAG;this.H.forEach(function(i){delete i.u[n]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(n,i){let s;if(i===void 0&&(i=(0,o.default)(n)),i){let c=n[this.HASH_TAG];if(c===void 0)return!1;delete n[this.HASH_TAG],s=this.H[c],delete this.H[c]}else{if(s=this.g[n],s===void 0)return!1;delete this.g[n]}return this.V(s),!0}eraseElementByIterator(n){let i=n.o;return i===this.h&&(0,a.throwIteratorAccessError)(),this.V(i),n.next()}eraseElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let i=this.p;for(;n--;)i=i.B;return this.V(i),this.i}};u.HashContainer=r}),ic=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"t",{value:!0}),u.default=void 0;var t=Wa(),o=gt(),a=class $a extends t.HashContainerIterator{constructor(n,i,s,c){super(n,i,c),this.container=s}get pointer(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.u}copy(){return new $a(this.o,this.h,this.container,this.iteratorType)}},l=class extends t.HashContainer{constructor(r=[]){super();let n=this;r.forEach(function(i){n.insert(i)})}begin(){return new a(this.p,this.h,this)}end(){return new a(this.h,this.h,this)}rBegin(){return new a(this._,this.h,this,1)}rEnd(){return new a(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(r,n){return this.M(r,void 0,n)}getElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let n=this.p;for(;r--;)n=n.B;return n.u}find(r,n){let i=this.I(r,n);return new a(i,this.h,this)}forEach(r){let n=0,i=this.p;for(;i!==this.h;)r(i.u,n++,this),i=i.B}[Symbol.iterator](){return(function*(){let r=this.p;for(;r!==this.h;)yield r.u,r=r.B}).bind(this)()}},e=l;u.default=e}),oc=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"t",{value:!0}),u.default=void 0;var t=Wa(),o=l(Da()),a=gt();function l(i){return i&&i.t?i:{default:i}}var e=class qa extends t.HashContainerIterator{constructor(s,c,h,d){super(s,c,d),this.container=h}get pointer(){this.o===this.h&&(0,a.throwIteratorAccessError)();let s=this;return new Proxy([],{get(c,h){if(h==="0")return s.o.u;if(h==="1")return s.o.l},set(c,h,d){if(h!=="1")throw new TypeError("props must be 1");return s.o.l=d,!0}})}copy(){return new qa(this.o,this.h,this.container,this.iteratorType)}},r=class extends t.HashContainer{constructor(i=[]){super();let s=this;i.forEach(function(c){s.setElement(c[0],c[1])})}begin(){return new e(this.p,this.h,this)}end(){return new e(this.h,this.h,this)}rBegin(){return new e(this._,this.h,this,1)}rEnd(){return new e(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(i,s,c){return this.M(i,s,c)}getElementByKey(i,s){if(s===void 0&&(s=(0,o.default)(i)),s){let h=i[this.HASH_TAG];return h!==void 0?this.H[h].l:void 0}let c=this.g[i];return c?c.l:void 0}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let s=this.p;for(;i--;)s=s.B;return[s.u,s.l]}find(i,s){let c=this.I(i,s);return new e(c,this.h,this)}forEach(i){let s=0,c=this.p;for(;c!==this.h;)i([c.u,c.l],s++,this),c=c.B}[Symbol.iterator](){return(function*(){let i=this.p;for(;i!==this.h;)yield[i.u,i.l],i=i.B}).bind(this)()}},n=r;u.default=n}),sc=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"t",{value:!0}),Object.defineProperty(u,"Deque",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(u,"HashMap",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(u,"HashSet",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(u,"LinkList",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(u,"OrderedMap",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(u,"OrderedSet",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(u,"PriorityQueue",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(u,"Queue",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(u,"Stack",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(u,"Vector",{enumerable:!0,get:function(){return l.default}});var t=h(Qu()),o=h(Yu()),a=h(Ju()),l=h(Xu()),e=h(Zu()),r=h(ec()),n=h(rc()),i=h(nc()),s=h(ic()),c=h(oc());function h(d){return d&&d.t?d:{default:d}}}),ac=de((u,t)=>{le(),ce(),ue();var o=sc().OrderedSet,a=ht()("number-allocator:trace"),l=ht()("number-allocator:error");function e(n,i){this.low=n,this.high=i}e.prototype.equals=function(n){return this.low===n.low&&this.high===n.high},e.prototype.compare=function(n){return this.low<n.low&&this.high<n.low?-1:n.low<this.low&&n.high<this.low?1:0};function r(n,i){if(!(this instanceof r))return new r(n,i);this.min=n,this.max=i,this.ss=new o([],(s,c)=>s.compare(c)),a("Create"),this.clear()}r.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},r.prototype.alloc=function(){if(this.ss.size()===0)return a("alloc():empty"),null;let n=this.ss.begin(),i=n.pointer.low,s=n.pointer.high,c=i;return c+1<=s?this.ss.updateKeyByIterator(n,new e(i+1,s)):this.ss.eraseElementByPos(0),a("alloc():"+c),c},r.prototype.use=function(n){let i=new e(n,n),s=this.ss.lowerBound(i);if(!s.equals(this.ss.end())){let c=s.pointer.low,h=s.pointer.high;return s.pointer.equals(i)?(this.ss.eraseElementByIterator(s),a("use():"+n),!0):c>n?!1:c===n?(this.ss.updateKeyByIterator(s,new e(c+1,h)),a("use():"+n),!0):h===n?(this.ss.updateKeyByIterator(s,new e(c,h-1)),a("use():"+n),!0):(this.ss.updateKeyByIterator(s,new e(n+1,h)),this.ss.insert(new e(c,n-1)),a("use():"+n),!0)}return a("use():failed"),!1},r.prototype.free=function(n){if(n<this.min||n>this.max){l("free():"+n+" is out of range");return}let i=new e(n,n),s=this.ss.upperBound(i);if(s.equals(this.ss.end())){if(s.equals(this.ss.begin())){this.ss.insert(i);return}s.pre();let c=s.pointer.high;s.pointer.high+1===n?this.ss.updateKeyByIterator(s,new e(c,n)):this.ss.insert(i)}else if(s.equals(this.ss.begin()))if(n+1===s.pointer.low){let c=s.pointer.high;this.ss.updateKeyByIterator(s,new e(n,c))}else this.ss.insert(i);else{let c=s.pointer.low,h=s.pointer.high;s.pre();let d=s.pointer.low;s.pointer.high+1===n?n+1===c?(this.ss.eraseElementByIterator(s),this.ss.updateKeyByIterator(s,new e(d,h))):this.ss.updateKeyByIterator(s,new e(d,n)):n+1===c?(this.ss.eraseElementByIterator(s.next()),this.ss.insert(new e(n,h))):this.ss.insert(i)}a("free():"+n)},r.prototype.clear=function(){a("clear()"),this.ss.clear(),this.ss.insert(new e(this.min,this.max))},r.prototype.intervalCount=function(){return this.ss.size()},r.prototype.dump=function(){console.log("length:"+this.ss.size());for(let n of this.ss)console.log(n)},t.exports=r}),Ka=de((u,t)=>{le(),ce(),ue();var o=ac();t.exports.NumberAllocator=o}),lc=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"__esModule",{value:!0});var t=Gu(),o=Ka(),a=class{aliasToTopic;topicToAlias;max;numberAllocator;length;constructor(l){l>0&&(this.aliasToTopic=new t.LRUCache({max:l}),this.topicToAlias={},this.numberAllocator=new o.NumberAllocator(1,l),this.max=l,this.length=0)}put(l,e){if(e===0||e>this.max)return!1;let r=this.aliasToTopic.get(e);return r&&delete this.topicToAlias[r],this.aliasToTopic.set(e,l),this.topicToAlias[l]=e,this.numberAllocator.use(e),this.length=this.aliasToTopic.size,!0}getTopicByAlias(l){return this.aliasToTopic.get(l)}getAliasByTopic(l){let e=this.topicToAlias[l];return typeof e<"u"&&this.aliasToTopic.get(e),e}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};u.default=a}),uc=de(u=>{le(),ce(),ue();var t=u&&u.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(u,"__esModule",{value:!0});var o=zr(),a=t(lc()),l=$t(),e=(r,n)=>{r.log("_handleConnack");let{options:i}=r,s=i.protocolVersion===5?n.reasonCode:n.returnCode;if(clearTimeout(r.connackTimer),delete r.topicAliasSend,n.properties){if(n.properties.topicAliasMaximum){if(n.properties.topicAliasMaximum>65535){r.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}n.properties.topicAliasMaximum>0&&(r.topicAliasSend=new a.default(n.properties.topicAliasMaximum))}n.properties.serverKeepAlive&&i.keepalive&&(i.keepalive=n.properties.serverKeepAlive),n.properties.maximumPacketSize&&(i.properties||(i.properties={}),i.properties.maximumPacketSize=n.properties.maximumPacketSize)}if(s===0)r.reconnecting=!1,r._onConnect(n);else if(s>0){let c=new l.ErrorWithReasonCode(`Connection refused: ${o.ReasonCodes[s]}`,s);r.emit("error",c),r.options.reconnectOnConnackError&&r._cleanUp(!0)}};u.default=e}),cc=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"__esModule",{value:!0});var t=(o,a,l)=>{o.log("handling pubrel packet");let e=typeof l<"u"?l:o.noop,{messageId:r}=a,n={cmd:"pubcomp",messageId:r};o.incomingStore.get(a,(i,s)=>{i?o._sendPacket(n,e):(o.emit("message",s.topic,s.payload,s),o.handleMessage(s,c=>{if(c)return e(c);o.incomingStore.del(s,o.noop),o._sendPacket(n,e)}))})};u.default=t}),fc=de(u=>{le(),ce(),ue();var t=u&&u.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(u,"__esModule",{value:!0});var o=t(Vu()),a=t(Hu()),l=t(uc()),e=t(zr()),r=t(cc()),n=(i,s,c)=>{let{options:h}=i;if(h.protocolVersion===5&&h.properties&&h.properties.maximumPacketSize&&h.properties.maximumPacketSize<s.length)return i.emit("error",new Error(`exceeding packets size ${s.cmd}`)),i.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),i;switch(i.log("_handlePacket :: emitting packetreceive"),i.emit("packetreceive",s),s.cmd){case"publish":(0,o.default)(i,s,c);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":i.reschedulePing(),(0,e.default)(i,s),c();break;case"pubrel":i.reschedulePing(),(0,r.default)(i,s,c);break;case"connack":(0,l.default)(i,s),c();break;case"auth":i.reschedulePing(),(0,a.default)(i,s),c();break;case"pingresp":i.log("_handlePacket :: received pingresp"),i.reschedulePing(!0),c();break;case"disconnect":i.emit("disconnect",s),c();break;default:i.log("_handlePacket :: unknown command"),c();break}};u.default=n}),Va=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"__esModule",{value:!0});var t=class{nextId;constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let o=this.nextId++;return this.nextId===65536&&(this.nextId=1),o}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(o){return!0}deallocate(o){}clear(){}};u.default=t}),hc=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"__esModule",{value:!0});var t=class{aliasToTopic;max;length;constructor(o){this.aliasToTopic={},this.max=o}put(o,a){return a===0||a>this.max?!1:(this.aliasToTopic[a]=o,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(o){return this.aliasToTopic[o]}clear(){this.aliasToTopic={}}};u.default=t}),pc=de(u=>{le(),ce(),ue();var t=u&&u.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(u,"__esModule",{value:!0}),u.TypedEventEmitter=void 0;var o=t((Tt(),Re(_t))),a=$t(),l=class{};u.TypedEventEmitter=l,(0,a.applyMixin)(l,o.default)}),Hr=de((u,t)=>{le(),ce(),ue();function o(a){"@babel/helpers - typeof";return t.exports=o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},t.exports.__esModule=!0,t.exports.default=t.exports,o(a)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports}),dc=de((u,t)=>{le(),ce(),ue();var o=Hr().default;function a(l,e){if(o(l)!="object"||!l)return l;var r=l[Symbol.toPrimitive];if(r!==void 0){var n=r.call(l,e||"default");if(o(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(l)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports}),gc=de((u,t)=>{le(),ce(),ue();var o=Hr().default,a=dc();function l(e){var r=a(e,"string");return o(r)=="symbol"?r:r+""}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports}),yc=de((u,t)=>{le(),ce(),ue();var o=gc();function a(l,e,r){return(e=o(e))in l?Object.defineProperty(l,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):l[e]=r,l}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports}),mc=de((u,t)=>{le(),ce(),ue();function o(a){if(Array.isArray(a))return a}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports}),bc=de((u,t)=>{le(),ce(),ue();function o(a,l){var e=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(e!=null){var r,n,i,s,c=[],h=!0,d=!1;try{if(i=(e=e.call(a)).next,l===0){if(Object(e)!==e)return;h=!1}else for(;!(h=(r=i.call(e)).done)&&(c.push(r.value),c.length!==l);h=!0);}catch(m){d=!0,n=m}finally{try{if(!h&&e.return!=null&&(s=e.return(),Object(s)!==s))return}finally{if(d)throw n}}return c}}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports}),vc=de((u,t)=>{le(),ce(),ue();function o(a,l){(l==null||l>a.length)&&(l=a.length);for(var e=0,r=Array(l);e<l;e++)r[e]=a[e];return r}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports}),wc=de((u,t)=>{le(),ce(),ue();var o=vc();function a(l,e){if(l){if(typeof l=="string")return o(l,e);var r={}.toString.call(l).slice(8,-1);return r==="Object"&&l.constructor&&(r=l.constructor.name),r==="Map"||r==="Set"?Array.from(l):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(l,e):void 0}}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports}),_c=de((u,t)=>{le(),ce(),ue();function o(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports}),Sc=de((u,t)=>{le(),ce(),ue();var o=mc(),a=bc(),l=wc(),e=_c();function r(n,i){return o(n)||a(n,i)||l(n,i)||e()}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}),za=de((u,t)=>{le(),ce(),ue(),(function(o,a){typeof u=="object"&&typeof t<"u"?a(u):typeof define=="function"&&define.amd?define(["exports"],a):(o=typeof globalThis<"u"?globalThis:o||self,a(o.fastUniqueNumbers={}))})(u,function(o){var a=function(m){return function(f){var y=m(f);return f.add(y),y}},l=function(m){return function(f,y){return m.set(f,y),y}},e=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,r=536870912,n=r*2,i=function(m,f){return function(y){var b=f.get(y),S=b===void 0?y.size:b<n?b+1:0;if(!y.has(S))return m(y,S);if(y.size<r){for(;y.has(S);)S=Math.floor(Math.random()*n);return m(y,S)}if(y.size>e)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;y.has(S);)S=Math.floor(Math.random()*e);return m(y,S)}},s=new WeakMap,c=l(s),h=i(c,s),d=a(h);o.addUniqueNumber=d,o.generateUniqueNumber=h})}),Ec=de((u,t)=>{le(),ce(),ue();function o(l,e,r,n,i,s,c){try{var h=l[s](c),d=h.value}catch(m){return void r(m)}h.done?e(d):Promise.resolve(d).then(n,i)}function a(l){return function(){var e=this,r=arguments;return new Promise(function(n,i){var s=l.apply(e,r);function c(d){o(s,n,i,c,h,"next",d)}function h(d){o(s,n,i,c,h,"throw",d)}c(void 0)})}}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports}),Ha=de((u,t)=>{le(),ce(),ue();function o(a,l){this.v=a,this.k=l}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports}),Ga=de((u,t)=>{le(),ce(),ue();function o(a,l,e,r){var n=Object.defineProperty;try{n({},"",{})}catch{n=0}t.exports=o=function(i,s,c,h){function d(m,f){o(i,m,function(y){return this._invoke(m,f,y)})}s?n?n(i,s,{value:c,enumerable:!h,configurable:!h,writable:!h}):i[s]=c:(d("next",0),d("throw",1),d("return",2))},t.exports.__esModule=!0,t.exports.default=t.exports,o(a,l,e,r)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports}),Qa=de((u,t)=>{le(),ce(),ue();var o=Ga();function a(){var l,e,r=typeof Symbol=="function"?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(S,g,w,x){var v=g&&g.prototype instanceof h?g:h,A=Object.create(v.prototype);return o(A,"_invoke",(function(E,O,R){var P,M,k,B=0,U=R||[],F=!1,oe={p:0,n:0,v:l,a:H,f:H.bind(l,4),d:function(K,re){return P=K,M=0,k=l,oe.n=re,c}};function H(K,re){for(M=K,k=re,e=0;!F&&B&&!W&&e<U.length;e++){var W,J=U[e],C=oe.p,Y=J[2];K>3?(W=Y===re)&&(k=J[(M=J[4])?5:(M=3,3)],J[4]=J[5]=l):J[0]<=C&&((W=K<2&&C<J[1])?(M=0,oe.v=re,oe.n=J[1]):C<Y&&(W=K<3||J[0]>re||re>Y)&&(J[4]=K,J[5]=re,oe.n=Y,M=0))}if(W||K>1)return c;throw F=!0,re}return function(K,re,W){if(B>1)throw TypeError("Generator is already running");for(F&&re===1&&H(re,W),M=re,k=W;(e=M<2?l:k)||!F;){P||(M?M<3?(M>1&&(oe.n=-1),H(M,k)):oe.n=k:oe.v=k);try{if(B=2,P){if(M||(K="next"),e=P[K]){if(!(e=e.call(P,k)))throw TypeError("iterator result is not an object");if(!e.done)return e;k=e.value,M<2&&(M=0)}else M===1&&(e=P.return)&&e.call(P),M<2&&(k=TypeError("The iterator does not provide a '"+K+"' method"),M=1);P=l}else if((e=(F=oe.n<0)?k:E.call(O,oe))!==c)break}catch(J){P=l,M=1,k=J}finally{B=1}}return{value:e,done:F}}})(S,w,x),!0),A}var c={};function h(){}function d(){}function m(){}e=Object.getPrototypeOf;var f=[][n]?e(e([][n]())):(o(e={},n,function(){return this}),e),y=m.prototype=h.prototype=Object.create(f);function b(S){return Object.setPrototypeOf?Object.setPrototypeOf(S,m):(S.__proto__=m,o(S,i,"GeneratorFunction")),S.prototype=Object.create(y),S}return d.prototype=m,o(y,"constructor",m),o(m,"constructor",d),d.displayName="GeneratorFunction",o(m,i,"GeneratorFunction"),o(y),o(y,i,"Generator"),o(y,n,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),(t.exports=a=function(){return{w:s,m:b}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports}),Ya=de((u,t)=>{le(),ce(),ue();var o=Ha(),a=Ga();function l(e,r){function n(s,c,h,d){try{var m=e[s](c),f=m.value;return f instanceof o?r.resolve(f.v).then(function(y){n("next",y,h,d)},function(y){n("throw",y,h,d)}):r.resolve(f).then(function(y){m.value=y,h(m)},function(y){return n("throw",y,h,d)})}catch(y){d(y)}}var i;this.next||(a(l.prototype),a(l.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),a(this,"_invoke",function(s,c,h){function d(){return new r(function(m,f){n(s,h,m,f)})}return i=i?i.then(d,d):d()},!0)}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports}),Ja=de((u,t)=>{le(),ce(),ue();var o=Qa(),a=Ya();function l(e,r,n,i,s){return new a(o().w(e,r,n,i),s||Promise)}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports}),xc=de((u,t)=>{le(),ce(),ue();var o=Ja();function a(l,e,r,n,i){var s=o(l,e,r,n,i);return s.next().then(function(c){return c.done?c.value:s.next()})}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports}),Ac=de((u,t)=>{le(),ce(),ue();function o(a){var l=Object(a),e=[];for(var r in l)e.unshift(r);return function n(){for(;e.length;)if((r=e.pop())in l)return n.value=r,n.done=!1,n;return n.done=!0,n}}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports}),Ic=de((u,t)=>{le(),ce(),ue();var o=Hr().default;function a(l){if(l!=null){var e=l[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],r=0;if(e)return e.call(l);if(typeof l.next=="function")return l;if(!isNaN(l.length))return{next:function(){return l&&r>=l.length&&(l=void 0),{value:l&&l[r++],done:!l}}}}throw new TypeError(o(l)+" is not iterable")}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports}),Oc=de((u,t)=>{le(),ce(),ue();var o=Ha(),a=Qa(),l=xc(),e=Ja(),r=Ya(),n=Ac(),i=Ic();function s(){var c=a(),h=c.m(s),d=(Object.getPrototypeOf?Object.getPrototypeOf(h):h.__proto__).constructor;function m(b){var S=typeof b=="function"&&b.constructor;return!!S&&(S===d||(S.displayName||S.name)==="GeneratorFunction")}var f={throw:1,return:2,break:3,continue:3};function y(b){var S,g;return function(w){S||(S={stop:function(){return g(w.a,2)},catch:function(){return w.v},abrupt:function(x,v){return g(w.a,f[x],v)},delegateYield:function(x,v,A){return S.resultName=v,g(w.d,i(x),A)},finish:function(x){return g(w.f,x)}},g=function(x,v,A){w.p=S.prev,w.n=S.next;try{return x(v,A)}finally{S.next=w.n}}),S.resultName&&(S[S.resultName]=w.v,S.resultName=void 0),S.sent=w.v,S.next=w.n;try{return b.call(this,S)}finally{w.p=S.prev,w.n=S.next}}}return(t.exports=s=function(){return{wrap:function(b,S,g,w){return c.w(y(b),S,g,w&&w.reverse())},isGeneratorFunction:m,mark:c.m,awrap:function(b,S){return new o(b,S)},AsyncIterator:r,async:function(b,S,g,w,x){return(m(S)?e:l)(y(b),S,g,w,x)},keys:n,values:i}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports}),kc=de((u,t)=>{le(),ce(),ue();var o=Oc()();t.exports=o;try{regeneratorRuntime=o}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}}),Pc=de((u,t)=>{le(),ce(),ue(),(function(o,a){typeof u=="object"&&typeof t<"u"?a(u,yc(),Sc(),za(),Ec(),kc()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/defineProperty","@babel/runtime/helpers/slicedToArray","fast-unique-numbers","@babel/runtime/helpers/asyncToGenerator","@babel/runtime/regenerator"],a):(o=typeof globalThis<"u"?globalThis:o||self,a(o.brokerFactory={},o._defineProperty,o._slicedToArray,o.fastUniqueNumbers,o._asyncToGenerator,o._regeneratorRuntime))})(u,function(o,a,l,e,r,n){var i=function(g){return typeof g.start=="function"},s=new WeakMap;function c(g,w){var x=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);w&&(v=v.filter(function(A){return Object.getOwnPropertyDescriptor(g,A).enumerable})),x.push.apply(x,v)}return x}function h(g){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?c(Object(x),!0).forEach(function(v){a(g,v,x[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(x)):c(Object(x)).forEach(function(v){Object.defineProperty(g,v,Object.getOwnPropertyDescriptor(x,v))})}return g}var d=function(g){return h(h({},g),{},{connect:function(w){var x=w.call;return r(n.mark(function v(){var A,E,O,R;return n.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return A=new MessageChannel,E=A.port1,O=A.port2,P.next=1,x("connect",{port:E},[E]);case 1:return R=P.sent,s.set(O,R),P.abrupt("return",O);case 2:case"end":return P.stop()}},v)}))},disconnect:function(w){var x=w.call;return(function(){var v=r(n.mark(function A(E){var O;return n.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(O=s.get(E),O!==void 0){R.next=1;break}throw new Error("The given port is not connected.");case 1:return R.next=2,x("disconnect",{portId:O});case 2:case"end":return R.stop()}},A)}));return function(A){return v.apply(this,arguments)}})()},isSupported:function(w){var x=w.call;return function(){return x("isSupported")}}})};function m(g,w){var x=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);w&&(v=v.filter(function(A){return Object.getOwnPropertyDescriptor(g,A).enumerable})),x.push.apply(x,v)}return x}function f(g){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?m(Object(x),!0).forEach(function(v){a(g,v,x[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(x)):m(Object(x)).forEach(function(v){Object.defineProperty(g,v,Object.getOwnPropertyDescriptor(x,v))})}return g}var y=new WeakMap,b=function(g){if(y.has(g))return y.get(g);var w=new Map;return y.set(g,w),w},S=function(g){var w=d(g);return function(x){var v=b(x);x.addEventListener("message",function(U){var F=U.data,oe=F.id;if(oe!==null&&v.has(oe)){var H=v.get(oe),K=H.reject,re=H.resolve;v.delete(oe),F.error===void 0?re(F.result):K(new Error(F.error.message))}}),i(x)&&x.start();for(var A=function(U){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return new Promise(function(H,K){var re=e.generateUniqueNumber(v);v.set(re,{reject:K,resolve:H}),F===null?x.postMessage({id:re,method:U},oe):x.postMessage({id:re,method:U,params:F},oe)})},E=function(U,F){var oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];x.postMessage({id:null,method:U,params:F},oe)},O={},R=0,P=Object.entries(w);R<P.length;R++){var M=l(P[R],2),k=M[0],B=M[1];O=f(f({},O),{},a({},k,B({call:A,notify:E})))}return f({},O)}};o.createBroker=S})}),Tc=de((u,t)=>{le(),ce(),ue(),(function(o,a){typeof u=="object"&&typeof t<"u"?a(u,Hr(),Pc(),za()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/typeof","broker-factory","fast-unique-numbers"],a):(o=typeof globalThis<"u"?globalThis:o||self,a(o.workerTimersBroker={},o._typeof,o.brokerFactory,o.fastUniqueNumbers))})(u,function(o,a,l,e){var r=new Map([[0,null]]),n=new Map([[0,null]]),i=l.createBroker({clearInterval:function(c){var h=c.call;return function(d){a(r.get(d))==="symbol"&&(r.set(d,null),h("clear",{timerId:d,timerType:"interval"}).then(function(){r.delete(d)}))}},clearTimeout:function(c){var h=c.call;return function(d){a(n.get(d))==="symbol"&&(n.set(d,null),h("clear",{timerId:d,timerType:"timeout"}).then(function(){n.delete(d)}))}},setInterval:function(c){var h=c.call;return function(d){for(var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,f=arguments.length,y=new Array(f>2?f-2:0),b=2;b<f;b++)y[b-2]=arguments[b];var S=Symbol(),g=e.generateUniqueNumber(r);r.set(g,S);var w=function(){return h("set",{delay:m,now:performance.timeOrigin+performance.now(),timerId:g,timerType:"interval"}).then(function(){var x=r.get(g);if(x===void 0)throw new Error("The timer is in an undefined state.");x===S&&(d.apply(void 0,y),r.get(g)===S&&w())})};return w(),g}},setTimeout:function(c){var h=c.call;return function(d){for(var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,f=arguments.length,y=new Array(f>2?f-2:0),b=2;b<f;b++)y[b-2]=arguments[b];var S=Symbol(),g=e.generateUniqueNumber(n);return n.set(g,S),h("set",{delay:m,now:performance.timeOrigin+performance.now(),timerId:g,timerType:"timeout"}).then(function(){var w=n.get(g);if(w===void 0)throw new Error("The timer is in an undefined state.");w===S&&(n.delete(g),d.apply(void 0,y))}),g}}}),s=function(c){var h=new Worker(c);return i(h)};o.load=s,o.wrap=i})}),Rc=de((u,t)=>{le(),ce(),ue(),(function(o,a){typeof u=="object"&&typeof t<"u"?a(u,Tc()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],a):(o=typeof globalThis<"u"?globalThis:o||self,a(o.workerTimers={},o.workerTimersBroker))})(u,function(o,a){var l=function(h,d){var m=null;return function(){if(m!==null)return m;var f=new Blob([d],{type:"application/javascript; charset=utf-8"}),y=URL.createObjectURL(f);return m=h(y),setTimeout(function(){return URL.revokeObjectURL(y)}),m}},e=`(()=>{var e={45:(e,t,r)=>{var n=r(738).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},122:(e,t,r)=>{var n=r(79);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},156:e=>{e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,u,a,i=[],s=!0,c=!1;try{if(u=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=u.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},172:e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},293:e=>{function t(e,t,r,n,o,u,a){try{var i=e[u](a),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,u){var a=e.apply(r,n);function i(e){t(a,o,u,i,s,"next",e)}function s(e){t(a,o,u,i,s,"throw",e)}i(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},373:e=>{e.exports=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},389:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,u=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<u?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*u);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,s=r(i),c=a(s,i),f=t(c);e.addUniqueNumber=f,e.generateUniqueNumber=c}(t)},472:function(e,t,r){!function(e,t,r,n){"use strict";var o=function(e,t){return function(r){var o=t.get(r);if(void 0===o)return Promise.resolve(!1);var u=n(o,2),a=u[0],i=u[1];return e(a),t.delete(r),i(!1),Promise.resolve(!0)}},u=function(e,t){var r=function(n,o,u,a){var i=n-e.now();i>0?o.set(a,[t(r,i,n,o,u,a),u]):(o.delete(a),u(!0))};return r},a=function(e,t,r,n){return function(o,u,a){var i=o+u-t.timeOrigin,s=i-t.now();return new Promise((function(t){e.set(a,[r(n,s,i,e,t,a),t])}))}},i=new Map,s=o(globalThis.clearTimeout,i),c=new Map,f=o(globalThis.clearTimeout,c),l=u(performance,globalThis.setTimeout),p=a(i,performance,globalThis.setTimeout,l),d=a(c,performance,globalThis.setTimeout,l);r.createWorker(self,{clear:function(){var r=e(t.mark((function e(r){var n,o,u;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.timerId,o=r.timerType,e.next=1,"interval"===o?s(n):f(n);case 1:return u=e.sent,e.abrupt("return",{result:u});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}(),set:function(){var r=e(t.mark((function e(r){var n,o,u,a,i;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.delay,o=r.now,u=r.timerId,a=r.timerType,e.next=1,("interval"===a?p:d)(n,o,u);case 1:return i=e.sent,e.abrupt("return",{result:i});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}()})}(r(293),r(756),r(623),r(715))},546:e=>{function t(r,n,o,u){var a=Object.defineProperty;try{a({},"",{})}catch(r){a=0}e.exports=t=function(e,r,n,o){if(r)a?a(e,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[r]=n;else{var u=function(r,n){t(e,r,(function(e){return this._invoke(r,n,e)}))};u("next",0),u("throw",1),u("return",2)}},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n,o,u)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},579:(e,t,r)=>{var n=r(738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},623:function(e,t,r){!function(e,t,r,n,o){"use strict";var u={INTERNAL_ERROR:-32603,INVALID_PARAMS:-32602,METHOD_NOT_FOUND:-32601},a=function(e,t){return Object.assign(new Error(e),{status:t})},i=function(e){return a('The requested method called "'.concat(e,'" is not supported.'),u.METHOD_NOT_FOUND)},s=function(e){return a('The handler of the method called "'.concat(e,'" returned no required result.'),u.INTERNAL_ERROR)},c=function(e){return a('The handler of the method called "'.concat(e,'" returned an unexpected result.'),u.INTERNAL_ERROR)},f=function(e){return a('The specified parameter called "portId" with the given value "'.concat(e,'" does not identify a port connected to this worker.'),u.INVALID_PARAMS)},l=function(e,n){return function(){var o=t(r.mark((function t(o){var u,a,f,l,p,d,v,x,y,b,h,m,_,g,w;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=o.data,a=u.id,f=u.method,l=u.params,p=n[f],t.prev=1,void 0!==p){t.next=2;break}throw i(f);case 2:if(void 0!==(d=void 0===l?p():p(l))){t.next=3;break}throw s(f);case 3:if(!(d instanceof Promise)){t.next=5;break}return t.next=4,d;case 4:g=t.sent,t.next=6;break;case 5:g=d;case 6:if(v=g,null!==a){t.next=8;break}if(void 0===v.result){t.next=7;break}throw c(f);case 7:t.next=10;break;case 8:if(void 0!==v.result){t.next=9;break}throw c(f);case 9:x=v.result,y=v.transferables,b=void 0===y?[]:y,e.postMessage({id:a,result:x},b);case 10:t.next=12;break;case 11:t.prev=11,w=t.catch(1),h=w.message,m=w.status,_=void 0===m?-32603:m,e.postMessage({error:{code:_,message:h},id:a});case 12:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return o.apply(this,arguments)}}()},p=function(){return new Promise((function(e){var t=new ArrayBuffer(0),r=new MessageChannel,n=r.port1,o=r.port2;n.onmessage=function(t){var r=t.data;return e(null!==r)},o.postMessage(t,[t])}))};function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=new Map,y=function(e,n,u){return v(v({},n),{},{connect:function(t){var r=t.port;r.start();var u=e(r,n),a=o.generateUniqueNumber(x);return x.set(a,(function(){u(),r.close(),x.delete(a)})),{result:a}},disconnect:function(e){var t=e.portId,r=x.get(t);if(void 0===r)throw f(t);return r(),{result:null}},isSupported:function(){var e=t(r.mark((function e(){var t,n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,p();case 1:if(!e.sent){e.next=5;break}if(!((t=u())instanceof Promise)){e.next=3;break}return e.next=2,t;case 2:o=e.sent,e.next=4;break;case 3:o=t;case 4:return n=o,e.abrupt("return",{result:n});case 5:return e.abrupt("return",{result:!1});case 6:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()})},b=function(e,t){var r=y(b,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0}),n=l(e,r);return e.addEventListener("message",n),function(){return e.removeEventListener("message",n)}};e.createWorker=b,e.isSupported=p}(t,r(293),r(756),r(693),r(389))},633:(e,t,r)=>{var n=r(172),o=r(993),u=r(869),a=r(887),i=r(791),s=r(373),c=r(579);function f(){"use strict";var t=o(),r=t.m(f),l=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function p(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))}var d={throw:1,return:2,break:3,continue:3};function v(e){var t,r;return function(n){t||(t={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(e,t){return r(n.a,d[e],t)},delegateYield:function(e,o,u){return t.resultName=o,r(n.d,c(e),u)},finish:function(e){return r(n.f,e)}},r=function(e,r,o){n.p=t.prev,n.n=t.next;try{return e(r,o)}finally{t.next=n.n}}),t.resultName&&(t[t.resultName]=n.v,t.resultName=void 0),t.sent=n.v,t.next=n.n;try{return e.call(this,t)}finally{n.p=t.prev,n.n=t.next}}}return(e.exports=f=function(){return{wrap:function(e,r,n,o){return t.w(v(e),r,n,o&&o.reverse())},isGeneratorFunction:p,mark:t.m,awrap:function(e,t){return new n(e,t)},AsyncIterator:i,async:function(e,t,r,n,o){return(p(t)?a:u)(v(e),t,r,n,o)},keys:s,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=f,e.exports.__esModule=!0,e.exports.default=e.exports},693:(e,t,r)=>{var n=r(736);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},715:(e,t,r)=>{var n=r(987),o=r(156),u=r(122),a=r(752);e.exports=function(e,t){return n(e)||o(e,t)||u(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,r)=>{var n=r(738).default,o=r(45);e.exports=function(e){var t=o(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,r)=>{var n=r(633)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},791:(e,t,r)=>{var n=r(172),o=r(546);e.exports=function e(t,r){function u(e,o,a,i){try{var s=t[e](o),c=s.value;return c instanceof n?r.resolve(c.v).then((function(e){u("next",e,a,i)}),(function(e){u("throw",e,a,i)})):r.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return u("throw",e,a,i)}))}catch(e){i(e)}}var a;this.next||(o(e.prototype),o(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),o(this,"_invoke",(function(e,t,n){function o(){return new r((function(t,r){u(e,n,t,r)}))}return a=a?a.then(o,o):o()}),!0)},e.exports.__esModule=!0,e.exports.default=e.exports},869:(e,t,r)=>{var n=r(887);e.exports=function(e,t,r,o,u){var a=n(e,t,r,o,u);return a.next().then((function(e){return e.done?e.value:a.next()}))},e.exports.__esModule=!0,e.exports.default=e.exports},887:(e,t,r)=>{var n=r(993),o=r(791);e.exports=function(e,t,r,u,a){return new o(n().w(e,t,r,u),a||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},993:(e,t,r)=>{var n=r(546);function o(){var t,r,u="function"==typeof Symbol?Symbol:{},a=u.iterator||"@@iterator",i=u.toStringTag||"@@toStringTag";function s(e,o,u,a){var i=o&&o.prototype instanceof f?o:f,s=Object.create(i.prototype);return n(s,"_invoke",function(e,n,o){var u,a,i,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,r){return u=e,a=0,i=t,p.n=r,c}};function d(e,n){for(a=e,i=n,r=0;!l&&s&&!o&&r<f.length;r++){var o,u=f[r],d=p.p,v=u[2];e>3?(o=v===n)&&(i=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=t):u[0]<=d&&((o=e<2&&d<u[1])?(a=0,p.v=n,p.n=u[1]):d<v&&(o=e<3||u[0]>n||n>v)&&(u[4]=e,u[5]=n,p.n=v,a=0))}if(o||e>1)return c;throw l=!0,n}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),a=f,i=v;(r=a<2?t:i)||!l;){u||(a?a<3?(a>1&&(p.n=-1),d(a,i)):p.n=i:p.v=i);try{if(s=2,u){if(a||(o="next"),r=u[o]){if(!(r=r.call(u,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,a<2&&(a=0)}else 1===a&&(r=u.return)&&r.call(u),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=t}else if((r=(l=p.n<0)?i:e.call(n,p))!==c)break}catch(e){u=t,a=1,i=e}finally{s=1}}return{value:r,done:l}}}(e,u,a),!0),s}var c={};function f(){}function l(){}function p(){}r=Object.getPrototypeOf;var d=[][a]?r(r([][a]())):(n(r={},a,(function(){return this})),r),v=p.prototype=f.prototype=Object.create(d);function x(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,n(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e}return l.prototype=p,n(v,"constructor",p),n(p,"constructor",l),l.displayName="GeneratorFunction",n(p,i,"GeneratorFunction"),n(v),n(v,i,"Generator"),n(v,a,(function(){return this})),n(v,"toString",(function(){return"[object Generator]"})),(e.exports=o=function(){return{w:s,m:x}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var u=t[n]={exports:{}};return e[n].call(u.exports,u,u.exports,r),u.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,r=l(a.load,e),n=function(h){return r().clearInterval(h)},i=function(h){return r().clearTimeout(h)},s=function(){var h;return(h=r()).setInterval.apply(h,arguments)},c=function(){var h;return(h=r()).setTimeout.apply(h,arguments)};o.clearInterval=n,o.clearTimeout=i,o.setInterval=s,o.setTimeout=c})}),Gr=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"__esModule",{value:!0}),u.isReactNativeBrowser=u.isWebWorker=void 0;var t=()=>typeof window<"u"?typeof navigator<"u"&&navigator.userAgent?.toLowerCase().indexOf(" electron/")>-1&&Ce?.versions?!Object.prototype.hasOwnProperty.call(Ce.versions,"electron"):typeof window.document<"u":!1,o=()=>!!(typeof self=="object"&&self?.constructor?.name?.includes("WorkerGlobalScope")&&typeof Deno>"u"),a=()=>typeof navigator<"u"&&navigator.product==="ReactNative",l=t()||o()||a();u.isWebWorker=o(),u.isReactNativeBrowser=a(),u.default=l}),Cc=de(u=>{le(),ce(),ue();var t=u&&u.__createBinding||(Object.create?function(s,c,h,d){d===void 0&&(d=h);var m=Object.getOwnPropertyDescriptor(c,h);(!m||("get"in m?!c.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return c[h]}}),Object.defineProperty(s,d,m)}:function(s,c,h,d){d===void 0&&(d=h),s[d]=c[h]}),o=u&&u.__setModuleDefault||(Object.create?function(s,c){Object.defineProperty(s,"default",{enumerable:!0,value:c})}:function(s,c){s.default=c}),a=u&&u.__importStar||(function(){var s=function(c){return s=Object.getOwnPropertyNames||function(h){var d=[];for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(d[d.length]=m);return d},s(c)};return function(c){if(c&&c.__esModule)return c;var h={};if(c!=null)for(var d=s(c),m=0;m<d.length;m++)d[m]!=="default"&&t(h,c,d[m]);return o(h,c),h}})();Object.defineProperty(u,"__esModule",{value:!0});var l=Rc(),e=a(Gr()),r={set:l.setInterval,clear:l.clearInterval},n={set:(s,c)=>setInterval(s,c),clear:s=>clearInterval(s)},i=s=>{switch(s){case"native":return n;case"worker":return r;default:return e.default&&!e.isWebWorker&&!e.isReactNativeBrowser?r:n}};u.default=i}),Xa=de(u=>{le(),ce(),ue();var t=u&&u.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(u,"__esModule",{value:!0});var o=t(Cc()),a=class{_keepalive;timerId;timer;destroyed=!1;counter;client;_keepaliveTimeoutTimestamp;_intervalEvery;get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(l,e){this.client=l,this.timer=typeof e=="object"&&"set"in e&&"clear"in e?e:(0,o.default)(e),this.setKeepalive(l.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(l){if(l*=1e3,isNaN(l)||l<=0||l>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${l}`);this._keepalive=l,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${l}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let l=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+l,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};u.default=a}),vi=de(u=>{le(),ce(),ue();var t=u&&u.__createBinding||(Object.create?function(v,A,E,O){O===void 0&&(O=E);var R=Object.getOwnPropertyDescriptor(A,E);(!R||("get"in R?!A.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return A[E]}}),Object.defineProperty(v,O,R)}:function(v,A,E,O){O===void 0&&(O=E),v[O]=A[E]}),o=u&&u.__setModuleDefault||(Object.create?function(v,A){Object.defineProperty(v,"default",{enumerable:!0,value:A})}:function(v,A){v.default=A}),a=u&&u.__importStar||(function(){var v=function(A){return v=Object.getOwnPropertyNames||function(E){var O=[];for(var R in E)Object.prototype.hasOwnProperty.call(E,R)&&(O[O.length]=R);return O},v(A)};return function(A){if(A&&A.__esModule)return A;var E={};if(A!=null)for(var O=v(A),R=0;R<O.length;R++)O[R]!=="default"&&t(E,A,O[R]);return o(E,A),E}})(),l=u&&u.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(u,"__esModule",{value:!0});var e=l($u()),r=Ct(),n=l(Ku()),i=l(ht()),s=a(Oa()),c=l(ka()),h=l(fc()),d=l(Va()),m=l(hc()),f=$t(),y=pc(),b=l(Xa()),S=a(Gr()),g=globalThis.setImmediate||((...v)=>{let A=v.shift();(0,f.nextTick)(()=>{A(...v)})}),w={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,subscribeBatchSize:null,writeCache:!0,timerVariant:"auto"},x=class wi extends y.TypedEventEmitter{static VERSION=f.MQTTJS_VERSION;connected;disconnecting;disconnected;reconnecting;incomingStore;outgoingStore;options;queueQoSZero;_reconnectCount;log;messageIdProvider;outgoing;messageIdToTopic;noop;keepaliveManager;stream;queue;streamBuilder;_resubscribeTopics;connackTimer;reconnectTimer;_storeProcessing;_packetIdsDuringStoreProcessing;_storeProcessingQueue;_firstConnection;topicAliasRecv;topicAliasSend;_deferredReconnect;connackPacket;static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(A,E){super(),this.options=E||{};for(let O in w)typeof this.options[O]>"u"?this.options[O]=w[O]:this.options[O]=E[O];this.log=this.options.log||(0,i.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",wi.VERSION),S.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",S.default?"browser":"node"),this.log("MqttClient :: options.protocol",E.protocol),this.log("MqttClient :: options.protocolVersion",E.protocolVersion),this.log("MqttClient :: options.username",E.username),this.log("MqttClient :: options.keepalive",E.keepalive),this.log("MqttClient :: options.reconnectPeriod",E.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",E.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",E.properties?E.properties.topicAliasMaximum:void 0),this.options.clientId=typeof E.clientId=="string"?E.clientId:wi.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=E.protocolVersion===5&&E.customHandleAcks?E.customHandleAcks:(...O)=>{O[3](null,0)},this.options.writeCache||(e.default.writeToStream.cacheNumbers=!1),this.streamBuilder=A,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new d.default:this.options.messageIdProvider,this.outgoingStore=E.outgoingStore||new c.default,this.incomingStore=E.incomingStore||new c.default,this.queueQoSZero=E.queueQoSZero===void 0?!0:E.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,E.properties&&E.properties.topicAliasMaximum>0&&(E.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new m.default(E.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:O}=this,R=()=>{let P=O.shift();this.log("deliver :: entry %o",P);let M=null;if(!P){this._resubscribe();return}M=P.packet,this.log("deliver :: call _sendPacket for %o",M);let k=!0;M.messageId&&M.messageId!==0&&(this.messageIdProvider.register(M.messageId)||(k=!1)),k?this._sendPacket(M,B=>{P.cb&&P.cb(B),R()}):(this.log("messageId: %d has already used. The message is skipped and removed.",M.messageId),R())};this.log("connect :: sending queued packets"),R()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(A,E){E()}handleMessage(A,E){E()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){let A=new r.Writable,E=e.default.parser(this.options),O=null,R=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new c.default,this.outgoingStore=this.options.outgoingStore||new c.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),E.on("packet",U=>{this.log("parser :: on packet push to packets array."),R.push(U)});let P=()=>{this.log("work :: getting next packet in queue");let U=R.shift();if(U)this.log("work :: packet pulled from queue"),(0,h.default)(this,U,M);else{this.log("work :: no packets in queue");let F=O;O=null,this.log("work :: done flag is %s",!!F),F&&F()}},M=()=>{if(R.length)(0,f.nextTick)(P);else{let U=O;O=null,U()}};A._write=(U,F,oe)=>{O=oe,this.log("writable stream :: parsing buffer"),E.parse(U),P()};let k=U=>{this.log("streamErrorHandler :: error",U.message),U.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",U)):this.noop(U)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(A),this.stream.on("error",k),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let B={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(B.will={...this.options.will,payload:this.options.will?.payload}),this.topicAliasRecv&&(B.properties||(B.properties={}),this.topicAliasRecv&&(B.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(B),E.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let U={cmd:"auth",reasonCode:0,...this.options.authPacket};this._writePacket(U)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(A,E,O,R){this.log("publish :: message `%s` to topic `%s`",E,A);let{options:P}=this;typeof O=="function"&&(R=O,O=null),O=O||{},O={qos:0,retain:!1,dup:!1,...O};let{qos:M,retain:k,dup:B,properties:U,cbStorePut:F}=O;if(this._checkDisconnecting(R))return this;let oe=()=>{let H=0;if((M===1||M===2)&&(H=this._nextId(),H===null))return this.log("No messageId left"),!1;let K={cmd:"publish",topic:A,payload:E,qos:M,retain:k,messageId:H,dup:B};switch(P.protocolVersion===5&&(K.properties=U),this.log("publish :: qos",M),M){case 1:case 2:this.outgoing[K.messageId]={volatile:!1,cb:R||this.noop},this.log("MqttClient:publish: packet cmd: %s",K.cmd),this._sendPacket(K,void 0,F);break;default:this.log("MqttClient:publish: packet cmd: %s",K.cmd),this._sendPacket(K,R,F);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!oe())&&this._storeProcessingQueue.push({invoke:oe,cbStorePut:O.cbStorePut,callback:R}),this}publishAsync(A,E,O){return new Promise((R,P)=>{this.publish(A,E,O,(M,k)=>{M?P(M):R(k)})})}subscribe(A,E,O){let R=this.options.protocolVersion;typeof E=="function"&&(O=E),O=O||this.noop;let P=!1,M=[];typeof A=="string"?(A=[A],M=A):Array.isArray(A)?M=A:typeof A=="object"&&(P=A.resubscribe,delete A.resubscribe,M=Object.keys(A));let k=s.validateTopics(M);if(k!==null)return g(O,new Error(`Invalid topic ${k}`)),this;if(this._checkDisconnecting(O))return this.log("subscribe: discconecting true"),this;let B={qos:0};R===5&&(B.nl=!1,B.rap=!1,B.rh=0),E={...B,...E};let{properties:U}=E,F=[],oe=(re,W)=>{if(W=W||E,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,re)||this._resubscribeTopics[re].qos<W.qos||P){let J={topic:re,qos:W.qos};R===5&&(J.nl=W.nl,J.rap=W.rap,J.rh=W.rh,J.properties=U),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",J.topic,J.qos),F.push(J)}};if(Array.isArray(A)?A.forEach(re=>{this.log("subscribe: array topic %s",re),oe(re)}):Object.keys(A).forEach(re=>{this.log("subscribe: object topic %s, %o",re,A[re]),oe(re,A[re])}),!F.length)return O(null,[]),this;let H=(re,W)=>{let J={cmd:"subscribe",subscriptions:re,messageId:W};if(U&&(J.properties=U),this.options.resubscribe){this.log("subscribe :: resubscribe true");let Y=[];re.forEach(ye=>{if(this.options.reconnectPeriod>0){let te={qos:ye.qos};R===5&&(te.nl=ye.nl||!1,te.rap=ye.rap||!1,te.rh=ye.rh||0,te.properties=ye.properties),this._resubscribeTopics[ye.topic]=te,Y.push(ye.topic)}}),this.messageIdToTopic[J.messageId]=Y}let C=new Promise((Y,ye)=>{this.outgoing[J.messageId]={volatile:!0,cb(te,we){if(!te){let{granted:G}=we;for(let L=0;L<G.length;L+=1)re[L].qos=G[L]}te?ye(new f.ErrorWithSubackPacket(te.message,we)):Y(we)}}});return this.log("subscribe :: call _sendPacket"),this._sendPacket(J),C},K=()=>{let re=this.options.subscribeBatchSize??F.length,W=[];for(let J=0;J<F.length;J+=re){let C=F.slice(J,J+re),Y=this._nextId();if(Y===null)return this.log("No messageId left"),!1;W.push(H(C,Y))}return Promise.all(W).then(J=>{O(null,F,J.at(-1))}).catch(J=>{O(J,F,J.packet)}),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!K())&&this._storeProcessingQueue.push({invoke:K,callback:O}),this}subscribeAsync(A,E){return new Promise((O,R)=>{this.subscribe(A,E,(P,M)=>{P?R(P):O(M)})})}unsubscribe(A,E,O){typeof A=="string"&&(A=[A]),typeof E=="function"&&(O=E),O=O||this.noop;let R=s.validateTopics(A);if(R!==null)return g(O,new Error(`Invalid topic ${R}`)),this;if(this._checkDisconnecting(O))return this;let P=()=>{let M=this._nextId();if(M===null)return this.log("No messageId left"),!1;let k={cmd:"unsubscribe",messageId:M,unsubscriptions:[]};return typeof A=="string"?k.unsubscriptions=[A]:Array.isArray(A)&&(k.unsubscriptions=A),this.options.resubscribe&&k.unsubscriptions.forEach(B=>{delete this._resubscribeTopics[B]}),typeof E=="object"&&E.properties&&(k.properties=E.properties),this.outgoing[k.messageId]={volatile:!0,cb:O},this.log("unsubscribe: call _sendPacket"),this._sendPacket(k),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!P())&&this._storeProcessingQueue.push({invoke:P,callback:O}),this}unsubscribeAsync(A,E){return new Promise((O,R)=>{this.unsubscribe(A,E,(P,M)=>{P?R(P):O(M)})})}end(A,E,O){this.log("end :: (%s)",this.options.clientId),(A==null||typeof A!="boolean")&&(O=O||E,E=A,A=!1),typeof E!="object"&&(O=O||E,E=null),this.log("end :: cb? %s",!!O),(!O||typeof O!="function")&&(O=this.noop);let R=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(M=>{this.outgoingStore.close(k=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),O){let B=M||k;this.log("end :: closeStores: invoking callback with args"),O(B)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},P=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,A),this._cleanUp(A,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,f.nextTick)(R)},E)};return this.disconnecting?(O(),this):(this._clearReconnect(),this.disconnecting=!0,!A&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,P,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),P()),this)}endAsync(A,E){return new Promise((O,R)=>{this.end(A,E,P=>{P?R(P):O()})})}removeOutgoingMessage(A){if(this.outgoing[A]){let{cb:E}=this.outgoing[A];this._removeOutgoingAndStoreMessage(A,()=>{E(new Error("Message removed"))})}return this}reconnect(A){this.log("client reconnect");let E=()=>{A?(this.options.incomingStore=A.incomingStore,this.options.outgoingStore=A.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new c.default,this.outgoingStore=this.options.outgoingStore||new c.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=E:E(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(A=>{this.outgoing[A].volatile&&typeof this.outgoing[A].cb=="function"&&(this.outgoing[A].cb(new Error("Connection closed")),delete this.outgoing[A])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(A=>{typeof this.outgoing[A].cb=="function"&&(this.outgoing[A].cb(new Error("Connection closed")),delete this.outgoing[A])}))}_removeTopicAliasAndRecoverTopicName(A){let E;A.properties&&(E=A.properties.topicAlias);let O=A.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",E,O),O.length===0){if(typeof E>"u")return new Error("Unregistered Topic Alias");if(O=this.topicAliasSend.getTopicByAlias(E),typeof O>"u")return new Error("Unregistered Topic Alias");A.topic=O}E&&delete A.properties.topicAlias}_checkDisconnecting(A){return this.disconnecting&&(A&&A!==this.noop?A(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(A,E,O={}){if(E&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",E)),this.log("_cleanUp :: forced? %s",A),A)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let R={cmd:"disconnect",...O};this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(R,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),g(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),E&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",E),E())}_storeAndSend(A,E,O){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",A.cmd);let R=A,P;if(R.cmd==="publish"&&(R=(0,n.default)(A),P=this._removeTopicAliasAndRecoverTopicName(R),P))return E&&E(P);this.outgoingStore.put(R,M=>{if(M)return E&&E(M);O(),this._writePacket(A,E)})}_applyTopicAlias(A){if(this.options.protocolVersion===5&&A.cmd==="publish"){let E;A.properties&&(E=A.properties.topicAlias);let O=A.topic.toString();if(this.topicAliasSend)if(E){if(O.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",O,E),!this.topicAliasSend.put(O,E)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",O,E),new Error("Sending Topic Alias out of range")}else O.length!==0&&(this.options.autoAssignTopicAlias?(E=this.topicAliasSend.getAliasByTopic(O),E?(A.topic="",A.properties={...A.properties,topicAlias:E},this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",O,E)):(E=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(O,E),A.properties={...A.properties,topicAlias:E},this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",O,E))):this.options.autoUseTopicAlias&&(E=this.topicAliasSend.getAliasByTopic(O),E&&(A.topic="",A.properties={...A.properties,topicAlias:E},this.log("applyTopicAlias :: auto use topic: %s - alias: %d",O,E))));else if(E)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",O,E),new Error("Sending Topic Alias out of range")}}_noop(A){this.log("noop ::",A)}_writePacket(A,E){this.log("_writePacket :: packet: %O",A),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",A),this.log("_writePacket :: writing to stream");let O=e.default.writeToStream(A,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",O),!O&&E&&E!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",E)):E&&(this.log("_writePacket :: invoking cb"),E())}_sendPacket(A,E,O,R){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),O=O||this.noop,E=E||this.noop;let P=this._applyTopicAlias(A);if(P){E(P);return}if(!this.connected){if(A.cmd==="auth"){this._writePacket(A,E);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(A,E,O);return}if(R){this._writePacket(A,E);return}switch(A.cmd){case"publish":break;case"pubrel":this._storeAndSend(A,E,O);return;default:this._writePacket(A,E);return}switch(A.qos){case 2:case 1:this._storeAndSend(A,E,O);break;default:this._writePacket(A,E);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(A,E,O){this.log("_storePacket :: packet: %o",A),this.log("_storePacket :: cb? %s",!!E),O=O||this.noop;let R=A;if(R.cmd==="publish"){R=(0,n.default)(A);let M=this._removeTopicAliasAndRecoverTopicName(R);if(M)return E&&E(M)}let P=R.qos||0;P===0&&this.queueQoSZero||R.cmd!=="publish"?this.queue.push({packet:R,cb:E}):P>0?(E=this.outgoing[R.messageId]?this.outgoing[R.messageId].cb:null,this.outgoingStore.put(R,M=>{if(M)return E&&E(M);O()})):E&&E(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new b.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(A=!1){this.keepaliveManager&&this.options.keepalive&&(A||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let A=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&A.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let E=0;E<A.length;E++){let O={};O[A[E]]=this._resubscribeTopics[A[E]],O.resubscribe=!0,this.subscribe(O,{properties:O[A[E]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(A){if(this.disconnected){this.emit("connect",A);return}this.connackPacket=A,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let E=()=>{let O=this.outgoingStore.createStream(),R=()=>{O.destroy(),O=null,this._flushStoreProcessingQueue(),P()},P=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",R),O.on("error",k=>{P(),this._flushStoreProcessingQueue(),this.removeListener("close",R),this.emit("error",k)});let M=()=>{if(!O)return;let k=O.read(1),B;if(!k){O.once("readable",M);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[k.messageId]){M();return}!this.disconnecting&&!this.reconnectTimer?(B=this.outgoing[k.messageId]?this.outgoing[k.messageId].cb:null,this.outgoing[k.messageId]={volatile:!1,cb(U,F){B&&B(U,F),M()}},this._packetIdsDuringStoreProcessing[k.messageId]=!0,this.messageIdProvider.register(k.messageId)?this._sendPacket(k,void 0,void 0,!0):this.log("messageId: %d has already used.",k.messageId)):O.destroy&&O.destroy()};O.on("end",()=>{let k=!0;for(let B in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[B]){k=!1;break}this.removeListener("close",R),k?(P(),this._invokeAllStoreProcessingQueue(),this.emit("connect",A)):E()}),M()};E()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let A=this._storeProcessingQueue[0];if(A&&A.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let A of this._storeProcessingQueue)A.cbStorePut&&A.cbStorePut(new Error("Connection closed")),A.callback&&A.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(A,E){delete this.outgoing[A],this.outgoingStore.del({messageId:A},(O,R)=>{E(O,R),this.messageIdProvider.deallocate(A),this._invokeStoreProcessingQueue()})}};u.default=x}),jc=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"__esModule",{value:!0});var t=Ka(),o=class{numberAllocator;lastId;constructor(){this.numberAllocator=new t.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(a){return this.numberAllocator.use(a)}deallocate(a){this.numberAllocator.free(a)}clear(){this.numberAllocator.clear()}};u.default=o});function Nc(){if(_i)return dr;_i=!0;let u=2147483647,t=36,o=1,a=26,l=38,e=700,r=72,n=128,i="-",s=/^xn--/,c=/[^\0-\x7F]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=t-o,f=Math.floor,y=String.fromCharCode;function b(P){throw new RangeError(d[P])}function S(P,M){let k=[],B=P.length;for(;B--;)k[B]=M(P[B]);return k}function g(P,M){let k=P.split("@"),B="";k.length>1&&(B=k[0]+"@",P=k[1]),P=P.replace(h,".");let U=P.split("."),F=S(U,M).join(".");return B+F}function w(P){let M=[],k=0,B=P.length;for(;k<B;){let U=P.charCodeAt(k++);if(U>=55296&&U<=56319&&k<B){let F=P.charCodeAt(k++);(F&64512)==56320?M.push(((U&1023)<<10)+(F&1023)+65536):(M.push(U),k--)}else M.push(U)}return M}let x=P=>String.fromCodePoint(...P),v=function(P){return P>=48&&P<58?26+(P-48):P>=65&&P<91?P-65:P>=97&&P<123?P-97:t},A=function(P,M){return P+22+75*(P<26)-((M!=0)<<5)},E=function(P,M,k){let B=0;for(P=k?f(P/e):P>>1,P+=f(P/M);P>m*a>>1;B+=t)P=f(P/m);return f(B+(m+1)*P/(P+l))},O=function(P){let M=[],k=P.length,B=0,U=n,F=r,oe=P.lastIndexOf(i);oe<0&&(oe=0);for(let H=0;H<oe;++H)P.charCodeAt(H)>=128&&b("not-basic"),M.push(P.charCodeAt(H));for(let H=oe>0?oe+1:0;H<k;){let K=B;for(let W=1,J=t;;J+=t){H>=k&&b("invalid-input");let C=v(P.charCodeAt(H++));C>=t&&b("invalid-input"),C>f((u-B)/W)&&b("overflow"),B+=C*W;let Y=J<=F?o:J>=F+a?a:J-F;if(C<Y)break;let ye=t-Y;W>f(u/ye)&&b("overflow"),W*=ye}let re=M.length+1;F=E(B-K,re,K==0),f(B/re)>u-U&&b("overflow"),U+=f(B/re),B%=re,M.splice(B++,0,U)}return String.fromCodePoint(...M)},R=function(P){let M=[];P=w(P);let k=P.length,B=n,U=0,F=r;for(let K of P)K<128&&M.push(y(K));let oe=M.length,H=oe;for(oe&&M.push(i);H<k;){let K=u;for(let W of P)W>=B&&W<K&&(K=W);let re=H+1;K-B>f((u-U)/re)&&b("overflow"),U+=(K-B)*re,B=K;for(let W of P)if(W<B&&++U>u&&b("overflow"),W===B){let J=U;for(let C=t;;C+=t){let Y=C<=F?o:C>=F+a?a:C-F;if(J<Y)break;let ye=J-Y,te=t-Y;M.push(y(A(Y+ye%te,0))),J=f(ye/te)}M.push(y(A(J,0))),F=E(U,re,H===oe),U=0,++H}++U,++B}return M.join("")};return dr={version:"2.3.1",ucs2:{decode:w,encode:x},decode:O,encode:R,toASCII:function(P){return g(P,function(M){return c.test(M)?"xn--"+R(M):M})},toUnicode:function(P){return g(P,function(M){return s.test(M)?O(M.slice(4).toLowerCase()):M})}},dr}var dr,_i,vt,Mc=Ge(()=>{le(),ce(),ue(),dr={},_i=!1,vt=Nc(),vt.decode,vt.encode,vt.toASCII,vt.toUnicode,vt.ucs2,vt.version});function Lc(){return Ei||(Ei=!0,Si=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var u={},t=Symbol("test"),o=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(o)!=="[object Symbol]")return!1;var a=42;u[t]=a;for(t in u)return!1;if(typeof Object.keys=="function"&&Object.keys(u).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(u).length!==0)return!1;var l=Object.getOwnPropertySymbols(u);if(l.length!==1||l[0]!==t||!Object.prototype.propertyIsEnumerable.call(u,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var e=Object.getOwnPropertyDescriptor(u,t);if(e.value!==a||e.enumerable!==!0)return!1}return!0}),Si}function Uc(){return Ai||(Ai=!0,xi=Error),xi}function Bc(){return Oi||(Oi=!0,Ii=EvalError),Ii}function Fc(){return Pi||(Pi=!0,ki=RangeError),ki}function Dc(){return Ri||(Ri=!0,Ti=ReferenceError),Ti}function Za(){return ji||(ji=!0,Ci=SyntaxError),Ci}function sr(){return Mi||(Mi=!0,Ni=TypeError),Ni}function Wc(){return Ui||(Ui=!0,Li=URIError),Li}function $c(){if(Bi)return gr;Bi=!0;var u=typeof Symbol<"u"&&Symbol,t=Lc();return gr=function(){return typeof u!="function"||typeof Symbol!="function"||typeof u("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},gr}function qc(){if(Fi)return yr;Fi=!0;var u={__proto__:null,foo:{}},t=Object;return yr=function(){return{__proto__:u}.foo===u.foo&&!(u instanceof t)},yr}function Kc(){if(Di)return mr;Di=!0;var u="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,o=Math.max,a="[object Function]",l=function(n,i){for(var s=[],c=0;c<n.length;c+=1)s[c]=n[c];for(var h=0;h<i.length;h+=1)s[h+n.length]=i[h];return s},e=function(n,i){for(var s=[],c=i,h=0;c<n.length;c+=1,h+=1)s[h]=n[c];return s},r=function(n,i){for(var s="",c=0;c<n.length;c+=1)s+=n[c],c+1<n.length&&(s+=i);return s};return mr=function(n){var i=this;if(typeof i!="function"||t.apply(i)!==a)throw new TypeError(u+i);for(var s=e(arguments,1),c,h=function(){if(this instanceof c){var b=i.apply(this,l(s,arguments));return Object(b)===b?b:this}return i.apply(n,l(s,arguments))},d=o(0,i.length-s.length),m=[],f=0;f<d;f++)m[f]="$"+f;if(c=Function("binder","return function ("+r(m,",")+"){ return binder.apply(this,arguments); }")(h),i.prototype){var y=function(){};y.prototype=i.prototype,c.prototype=new y,y.prototype=null}return c},mr}function go(){if(Wi)return br;Wi=!0;var u=Kc();return br=Function.prototype.bind||u,br}function Vc(){if($i)return vr;$i=!0;var u=Function.prototype.call,t=Object.prototype.hasOwnProperty,o=go();return vr=o.call(u,t),vr}function qt(){if(qi)return wr;qi=!0;var u,t=Uc(),o=Bc(),a=Fc(),l=Dc(),e=Za(),r=sr(),n=Wc(),i=Function,s=function(H){try{return i('"use strict"; return ('+H+").constructor;")()}catch{}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch{c=null}var h=function(){throw new r},d=c?(function(){try{return arguments.callee,h}catch{try{return c(arguments,"callee").get}catch{return h}}})():h,m=$c()(),f=qc()(),y=Object.getPrototypeOf||(f?function(H){return H.__proto__}:null),b={},S=typeof Uint8Array>"u"||!y?u:y(Uint8Array),g={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?u:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?u:ArrayBuffer,"%ArrayIteratorPrototype%":m&&y?y([][Symbol.iterator]()):u,"%AsyncFromSyncIteratorPrototype%":u,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":typeof Atomics>"u"?u:Atomics,"%BigInt%":typeof BigInt>"u"?u:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?u:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?u:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?u:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":o,"%Float32Array%":typeof Float32Array>"u"?u:Float32Array,"%Float64Array%":typeof Float64Array>"u"?u:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?u:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":b,"%Int8Array%":typeof Int8Array>"u"?u:Int8Array,"%Int16Array%":typeof Int16Array>"u"?u:Int16Array,"%Int32Array%":typeof Int32Array>"u"?u:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":m&&y?y(y([][Symbol.iterator]())):u,"%JSON%":typeof JSON=="object"?JSON:u,"%Map%":typeof Map>"u"?u:Map,"%MapIteratorPrototype%":typeof Map>"u"||!m||!y?u:y(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?u:Promise,"%Proxy%":typeof Proxy>"u"?u:Proxy,"%RangeError%":a,"%ReferenceError%":l,"%Reflect%":typeof Reflect>"u"?u:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?u:Set,"%SetIteratorPrototype%":typeof Set>"u"||!m||!y?u:y(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?u:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":m&&y?y(""[Symbol.iterator]()):u,"%Symbol%":m?Symbol:u,"%SyntaxError%":e,"%ThrowTypeError%":d,"%TypedArray%":S,"%TypeError%":r,"%Uint8Array%":typeof Uint8Array>"u"?u:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?u:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?u:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?u:Uint32Array,"%URIError%":n,"%WeakMap%":typeof WeakMap>"u"?u:WeakMap,"%WeakRef%":typeof WeakRef>"u"?u:WeakRef,"%WeakSet%":typeof WeakSet>"u"?u:WeakSet};if(y)try{null.error}catch(H){var w=y(y(H));g["%Error.prototype%"]=w}var x=function H(K){var re;if(K==="%AsyncFunction%")re=s("async function () {}");else if(K==="%GeneratorFunction%")re=s("function* () {}");else if(K==="%AsyncGeneratorFunction%")re=s("async function* () {}");else if(K==="%AsyncGenerator%"){var W=H("%AsyncGeneratorFunction%");W&&(re=W.prototype)}else if(K==="%AsyncIteratorPrototype%"){var J=H("%AsyncGenerator%");J&&y&&(re=y(J.prototype))}return g[K]=re,re},v={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},A=go(),E=Vc(),O=A.call(Function.call,Array.prototype.concat),R=A.call(Function.apply,Array.prototype.splice),P=A.call(Function.call,String.prototype.replace),M=A.call(Function.call,String.prototype.slice),k=A.call(Function.call,RegExp.prototype.exec),B=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,U=/\\(\\)?/g,F=function(H){var K=M(H,0,1),re=M(H,-1);if(K==="%"&&re!=="%")throw new e("invalid intrinsic syntax, expected closing `%`");if(re==="%"&&K!=="%")throw new e("invalid intrinsic syntax, expected opening `%`");var W=[];return P(H,B,function(J,C,Y,ye){W[W.length]=Y?P(ye,U,"$1"):C||J}),W},oe=function(H,K){var re=H,W;if(E(v,re)&&(W=v[re],re="%"+W[0]+"%"),E(g,re)){var J=g[re];if(J===b&&(J=x(re)),typeof J>"u"&&!K)throw new r("intrinsic "+H+" exists, but is not available. Please file an issue!");return{alias:W,name:re,value:J}}throw new e("intrinsic "+H+" does not exist!")};return wr=function(H,K){if(typeof H!="string"||H.length===0)throw new r("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof K!="boolean")throw new r('"allowMissing" argument must be a boolean');if(k(/^%?[^%]*%?$/,H)===null)throw new e("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var re=F(H),W=re.length>0?re[0]:"",J=oe("%"+W+"%",K),C=J.name,Y=J.value,ye=!1,te=J.alias;te&&(W=te[0],R(re,O([0,1],te)));for(var we=1,G=!0;we<re.length;we+=1){var L=re[we],ne=M(L,0,1),V=M(L,-1);if((ne==='"'||ne==="'"||ne==="`"||V==='"'||V==="'"||V==="`")&&ne!==V)throw new e("property names with quotes must have matching quotes");if((L==="constructor"||!G)&&(ye=!0),W+="."+L,C="%"+W+"%",E(g,C))Y=g[C];else if(Y!=null){if(!(L in Y)){if(!K)throw new r("base intrinsic for "+H+" exists, but the property is not available.");return}if(c&&we+1>=re.length){var Q=c(Y,L);G=!!Q,G&&"get"in Q&&!("originalValue"in Q.get)?Y=Q.get:Y=Y[L]}else G=E(Y,L),Y=Y[L];G&&!ye&&(g[C]=Y)}}return Y},wr}function yo(){if(Ki)return _r;Ki=!0;var u=qt(),t=u("%Object.defineProperty%",!0)||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return _r=t,_r}function el(){if(Vi)return Sr;Vi=!0;var u=qt(),t=u("%Object.getOwnPropertyDescriptor%",!0);if(t)try{t([],"length")}catch{t=null}return Sr=t,Sr}function zc(){if(zi)return Er;zi=!0;var u=yo(),t=Za(),o=sr(),a=el();return Er=function(l,e,r){if(!l||typeof l!="object"&&typeof l!="function")throw new o("`obj` must be an object or a function`");if(typeof e!="string"&&typeof e!="symbol")throw new o("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new o("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new o("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new o("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new o("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,c=arguments.length>6?arguments[6]:!1,h=!!a&&a(l,e);if(u)u(l,e,{configurable:s===null&&h?h.configurable:!s,enumerable:n===null&&h?h.enumerable:!n,value:r,writable:i===null&&h?h.writable:!i});else if(c||!n&&!i&&!s)l[e]=r;else throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Er}function Hc(){if(Hi)return xr;Hi=!0;var u=yo(),t=function(){return!!u};return t.hasArrayLengthDefineBug=function(){if(!u)return null;try{return u([],"length",{value:1}).length!==1}catch{return!0}},xr=t,xr}function Gc(){if(Gi)return Ar;Gi=!0;var u=qt(),t=zc(),o=Hc()(),a=el(),l=sr(),e=u("%Math.floor%");return Ar=function(r,n){if(typeof r!="function")throw new l("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||e(n)!==n)throw new l("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],s=!0,c=!0;if("length"in r&&a){var h=a(r,"length");h&&!h.configurable&&(s=!1),h&&!h.writable&&(c=!1)}return(s||c||!i)&&(o?t(r,"length",n,!0,!0):t(r,"length",n)),r},Ar}function Qc(){if(Qi)return Ft;Qi=!0;var u=go(),t=qt(),o=Gc(),a=sr(),l=t("%Function.prototype.apply%"),e=t("%Function.prototype.call%"),r=t("%Reflect.apply%",!0)||u.call(e,l),n=yo(),i=t("%Math.max%");Ft=function(c){if(typeof c!="function")throw new a("a function is required");var h=r(u,e,arguments);return o(h,1+i(0,c.length-(arguments.length-1)),!0)};var s=function(){return r(u,l,arguments)};return n?n(Ft,"apply",{value:s}):Ft.apply=s,Ft}function Yc(){if(Yi)return Ir;Yi=!0;var u=qt(),t=Qc(),o=t(u("String.prototype.indexOf"));return Ir=function(a,l){var e=u(a,!!l);return typeof e=="function"&&o(a,".prototype.")>-1?t(e):e},Ir}var Si,Ei,xi,Ai,Ii,Oi,ki,Pi,Ti,Ri,Ci,ji,Ni,Mi,Li,Ui,gr,Bi,yr,Fi,mr,Di,br,Wi,vr,$i,wr,qi,_r,Ki,Sr,Vi,Er,zi,xr,Hi,Ar,Gi,Ft,Qi,Ir,Yi,Jc=Ge(()=>{le(),ce(),ue(),Si={},Ei=!1,xi={},Ai=!1,Ii={},Oi=!1,ki={},Pi=!1,Ti={},Ri=!1,Ci={},ji=!1,Ni={},Mi=!1,Li={},Ui=!1,gr={},Bi=!1,yr={},Fi=!1,mr={},Di=!1,br={},Wi=!1,vr={},$i=!1,wr={},qi=!1,_r={},Ki=!1,Sr={},Vi=!1,Er={},zi=!1,xr={},Hi=!1,Ar={},Gi=!1,Ft={},Qi=!1,Ir={},Yi=!1});function mo(u){throw new Error("Node.js process "+u+" is not supported by JSPM core outside of Node.js")}function Xc(){!kt||!It||(kt=!1,It.length?ot=It.concat(ot):rr=-1,ot.length&&tl())}function tl(){if(!kt){var u=setTimeout(Xc,0);kt=!0;for(var t=ot.length;t;){for(It=ot,ot=[];++rr<t;)It&&It[rr].run();rr=-1,t=ot.length}It=null,kt=!1,clearTimeout(u)}}function Zc(u){var t=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];ot.push(new rl(u,t)),ot.length===1&&!kt&&setTimeout(tl,0)}function rl(u,t){this.fun=u,this.array=t}function $e(){}function ef(u){mo("_linkedBinding")}function tf(u){mo("dlopen")}function rf(){return[]}function nf(){return[]}function of(u,t){if(!u)throw new Error(t||"assertion error")}function sf(){return!1}function af(){return ct.now()/1e3}function tn(u){var t=Math.floor((Date.now()-ct.now())*.001),o=ct.now()*.001,a=Math.floor(o)+t,l=Math.floor(o%1*1e9);return u&&(a=a-u[0],l=l-u[1],l<0&&(a--,l+=Or)),[a,l]}function mt(){return bo}function lf(u){return[]}var ot,kt,It,rr,Uo,Bo,Fo,Do,Wo,$o,qo,Ko,Vo,zo,Ho,Go,Qo,Yo,Jo,Xo,Zo,es,ts,rs,ns,cr,is,os,ss,as,ls,us,cs,fs,hs,ps,ds,gs,ys,ms,bs,vs,ws,_s,Ss,Es,xs,As,Is,Os,ks,ct,rn,Or,Ps,Ts,Rs,Cs,js,Ns,Ms,Ls,Us,Bs,Fs,bo,nl=Ge(()=>{le(),ce(),ue(),ot=[],kt=!1,rr=-1,rl.prototype.run=function(){this.fun.apply(null,this.array)},Uo="browser",Bo="x64",Fo="browser",Do={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},Wo=["/usr/bin/node"],$o=[],qo="v16.8.0",Ko={},Vo=function(u,t){console.warn((t?t+": ":"")+u)},zo=function(u){mo("binding")},Ho=function(u){return 0},Go=function(){return"/"},Qo=function(u){},Yo={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},Jo=$e,Xo=[],Zo={},es=!1,ts={},rs=$e,ns=$e,cr=function(){return{}},is=cr,os=cr,ss=$e,as=$e,ls=$e,us={},cs={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},fs=$e,hs=$e,ps=$e,ds=$e,gs=$e,ys=$e,ms=$e,bs=void 0,vs=void 0,ws=void 0,_s=$e,Ss=2,Es=1,xs="/bin/usr/node",As=9229,Is="node",Os=[],ks=$e,ct={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},ct.now===void 0&&(rn=Date.now(),ct.timing&&ct.timing.navigationStart&&(rn=ct.timing.navigationStart),ct.now=()=>Date.now()-rn),Or=1e9,tn.bigint=function(u){var t=tn(u);return typeof BigInt>"u"?t[0]*Or+t[1]:BigInt(t[0]*Or)+BigInt(t[1])},Ps=10,Ts={},Rs=0,Cs=mt,js=mt,Ns=mt,Ms=mt,Ls=mt,Us=$e,Bs=mt,Fs=mt,bo={version:qo,versions:Ko,arch:Bo,platform:Fo,release:Yo,_rawDebug:Jo,moduleLoadList:Xo,binding:zo,_linkedBinding:ef,_events:Ts,_eventsCount:Rs,_maxListeners:Ps,on:mt,addListener:Cs,once:js,off:Ns,removeListener:Ms,removeAllListeners:Ls,emit:Us,prependListener:Bs,prependOnceListener:Fs,listeners:lf,domain:Zo,_exiting:es,config:ts,dlopen:tf,uptime:af,_getActiveRequests:rf,_getActiveHandles:nf,reallyExit:rs,_kill:ns,cpuUsage:cr,resourceUsage:is,memoryUsage:os,kill:ss,exit:as,openStdin:ls,allowedNodeEnvironmentFlags:us,assert:of,features:cs,_fatalExceptions:fs,setUncaughtExceptionCaptureCallback:hs,hasUncaughtExceptionCaptureCallback:sf,emitWarning:Vo,nextTick:Zc,_tickCallback:ps,_debugProcess:ds,_debugEnd:gs,_startProfilerIdleNotifier:ys,_stopProfilerIdleNotifier:ms,stdout:bs,stdin:ws,stderr:vs,abort:_s,umask:Ho,chdir:Qo,cwd:Go,env:Do,title:Uo,argv:Wo,execArgv:$o,pid:Ss,ppid:Es,execPath:xs,debugPort:As,hrtime:tn,argv0:Is,_preload_modules:Os,setSourceMapsEnabled:ks}});function uf(){if(Ji)return kr;Ji=!0;var u=bo;function t(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function o(e,r){for(var n="",i=0,s=-1,c=0,h,d=0;d<=e.length;++d){if(d<e.length)h=e.charCodeAt(d);else{if(h===47)break;h=47}if(h===47){if(!(s===d-1||c===1))if(s!==d-1&&c===2){if(n.length<2||i!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var m=n.lastIndexOf("/");if(m!==n.length-1){m===-1?(n="",i=0):(n=n.slice(0,m),i=n.length-1-n.lastIndexOf("/")),s=d,c=0;continue}}else if(n.length===2||n.length===1){n="",i=0,s=d,c=0;continue}}r&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+e.slice(s+1,d):n=e.slice(s+1,d),i=d-s-1;s=d,c=0}else h===46&&c!==-1?++c:c=-1}return n}function a(e,r){var n=r.dir||r.root,i=r.base||(r.name||"")+(r.ext||"");return n?n===r.root?n+i:n+e+i:i}var l={resolve:function(){for(var e="",r=!1,n,i=arguments.length-1;i>=-1&&!r;i--){var s;i>=0?s=arguments[i]:(n===void 0&&(n=u.cwd()),s=n),t(s),s.length!==0&&(e=s+"/"+e,r=s.charCodeAt(0)===47)}return e=o(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(t(e),e.length===0)return".";var r=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=o(e,!r),e.length===0&&!r&&(e="."),e.length>0&&n&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,r=0;r<arguments.length;++r){var n=arguments[r];t(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":l.normalize(e)},relative:function(e,r){if(t(e),t(r),e===r||(e=l.resolve(e),r=l.resolve(r),e===r))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var i=e.length,s=i-n,c=1;c<r.length&&r.charCodeAt(c)===47;++c);for(var h=r.length,d=h-c,m=s<d?s:d,f=-1,y=0;y<=m;++y){if(y===m){if(d>m){if(r.charCodeAt(c+y)===47)return r.slice(c+y+1);if(y===0)return r.slice(c+y)}else s>m&&(e.charCodeAt(n+y)===47?f=y:y===0&&(f=0));break}var b=e.charCodeAt(n+y),S=r.charCodeAt(c+y);if(b!==S)break;b===47&&(f=y)}var g="";for(y=n+f+1;y<=i;++y)(y===i||e.charCodeAt(y)===47)&&(g.length===0?g+="..":g+="/..");return g.length>0?g+r.slice(c+f):(c+=f,r.charCodeAt(c)===47&&++c,r.slice(c))},_makeLong:function(e){return e},dirname:function(e){if(t(e),e.length===0)return".";for(var r=e.charCodeAt(0),n=r===47,i=-1,s=!0,c=e.length-1;c>=1;--c)if(r=e.charCodeAt(c),r===47){if(!s){i=c;break}}else s=!1;return i===-1?n?"/":".":n&&i===1?"//":e.slice(0,i)},basename:function(e,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');t(e);var n=0,i=-1,s=!0,c;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var h=r.length-1,d=-1;for(c=e.length-1;c>=0;--c){var m=e.charCodeAt(c);if(m===47){if(!s){n=c+1;break}}else d===-1&&(s=!1,d=c+1),h>=0&&(m===r.charCodeAt(h)?--h===-1&&(i=c):(h=-1,i=d))}return n===i?i=d:i===-1&&(i=e.length),e.slice(n,i)}else{for(c=e.length-1;c>=0;--c)if(e.charCodeAt(c)===47){if(!s){n=c+1;break}}else i===-1&&(s=!1,i=c+1);return i===-1?"":e.slice(n,i)}},extname:function(e){t(e);for(var r=-1,n=0,i=-1,s=!0,c=0,h=e.length-1;h>=0;--h){var d=e.charCodeAt(h);if(d===47){if(!s){n=h+1;break}continue}i===-1&&(s=!1,i=h+1),d===46?r===-1?r=h:c!==1&&(c=1):r!==-1&&(c=-1)}return r===-1||i===-1||c===0||c===1&&r===i-1&&r===n+1?"":e.slice(r,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return a("/",e)},parse:function(e){t(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;var n=e.charCodeAt(0),i=n===47,s;i?(r.root="/",s=1):s=0;for(var c=-1,h=0,d=-1,m=!0,f=e.length-1,y=0;f>=s;--f){if(n=e.charCodeAt(f),n===47){if(!m){h=f+1;break}continue}d===-1&&(m=!1,d=f+1),n===46?c===-1?c=f:y!==1&&(y=1):c!==-1&&(y=-1)}return c===-1||d===-1||y===0||y===1&&c===d-1&&c===h+1?d!==-1&&(h===0&&i?r.base=r.name=e.slice(1,d):r.base=r.name=e.slice(h,d)):(h===0&&i?(r.name=e.slice(1,c),r.base=e.slice(1,d)):(r.name=e.slice(h,c),r.base=e.slice(h,d)),r.ext=e.slice(c,d)),h>0?r.dir=e.slice(0,h-1):i&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};return l.posix=l,kr=l,kr}var kr,Ji,Xi,cf=Ge(()=>{le(),ce(),ue(),nl(),kr={},Ji=!1,Xi=uf()}),il={};Dt(il,{URL:()=>dl,Url:()=>ul,default:()=>qe,fileURLToPath:()=>sl,format:()=>cl,parse:()=>pl,pathToFileURL:()=>al,resolve:()=>fl,resolveObject:()=>hl});function ff(){if(Zi)return Pr;Zi=!0;var u=typeof Map=="function"&&Map.prototype,t=Object.getOwnPropertyDescriptor&&u?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=u&&t&&typeof t.get=="function"?t.get:null,a=u&&Map.prototype.forEach,l=typeof Set=="function"&&Set.prototype,e=Object.getOwnPropertyDescriptor&&l?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,r=l&&e&&typeof e.get=="function"?e.get:null,n=l&&Set.prototype.forEach,i=typeof WeakMap=="function"&&WeakMap.prototype,s=i?WeakMap.prototype.has:null,c=typeof WeakSet=="function"&&WeakSet.prototype,h=c?WeakSet.prototype.has:null,d=typeof WeakRef=="function"&&WeakRef.prototype,m=d?WeakRef.prototype.deref:null,f=Boolean.prototype.valueOf,y=Object.prototype.toString,b=Function.prototype.toString,S=String.prototype.match,g=String.prototype.slice,w=String.prototype.replace,x=String.prototype.toUpperCase,v=String.prototype.toLowerCase,A=RegExp.prototype.test,E=Array.prototype.concat,O=Array.prototype.join,R=Array.prototype.slice,P=Math.floor,M=typeof BigInt=="function"?BigInt.prototype.valueOf:null,k=Object.getOwnPropertySymbols,B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,U=typeof Symbol=="function"&&typeof Symbol.iterator=="object",F=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===U||!0)?Symbol.toStringTag:null,oe=Object.prototype.propertyIsEnumerable,H=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(z){return z.__proto__}:null);function K(z,ie){if(z===1/0||z===-1/0||z!==z||z&&z>-1e3&&z<1e3||A.call(/e/,ie))return ie;var Ae=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof z=="number"){var Ie=z<0?-P(-z):P(z);if(Ie!==z){var ke=String(Ie),Te=g.call(ie,ke.length+1);return w.call(ke,Ae,"$&_")+"."+w.call(w.call(Te,/([0-9]{3})/g,"$&_"),/_$/,"")}}return w.call(ie,Ae,"$&_")}var re=ll,W=re.custom,J=Q(W)?W:null;Pr=function z(ie,Ae,Ie,ke){var Te=Ae||{};if(se(Te,"quoteStyle")&&Te.quoteStyle!=="single"&&Te.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(se(Te,"maxStringLength")&&(typeof Te.maxStringLength=="number"?Te.maxStringLength<0&&Te.maxStringLength!==1/0:Te.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Je=se(Te,"customInspect")?Te.customInspect:!0;if(typeof Je!="boolean"&&Je!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(se(Te,"indent")&&Te.indent!==null&&Te.indent!=="	"&&!(parseInt(Te.indent,10)===Te.indent&&Te.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(se(Te,"numericSeparator")&&typeof Te.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Xe=Te.numericSeparator;if(typeof ie>"u")return"undefined";if(ie===null)return"null";if(typeof ie=="boolean")return ie?"true":"false";if(typeof ie=="string")return ae(ie,Te);if(typeof ie=="number"){if(ie===0)return 1/0/ie>0?"0":"-0";var De=String(ie);return Xe?K(ie,De):De}if(typeof ie=="bigint"){var Ze=String(ie)+"n";return Xe?K(ie,Ze):Ze}var jt=typeof Te.depth>"u"?5:Te.depth;if(typeof Ie>"u"&&(Ie=0),Ie>=jt&&jt>0&&typeof ie=="object")return ye(ie)?"[Array]":"[Object]";var et=Z(Te,Ie);if(typeof ke>"u")ke=[];else if(ee(ke,ie)>=0)return"[Circular]";function Qe(tt,yt,xt){if(yt&&(ke=R.call(ke),ke.push(yt)),xt){var rt={depth:Te.depth};return se(Te,"quoteStyle")&&(rt.quoteStyle=Te.quoteStyle),z(tt,rt,Ie+1,ke)}return z(tt,Te,Ie+1,ke)}if(typeof ie=="function"&&!we(ie)){var ar=$(ie),Nt=Se(ie,Qe);return"[Function"+(ar?": "+ar:" (anonymous)")+"]"+(Nt.length>0?" { "+O.call(Nt,", ")+" }":"")}if(Q(ie)){var Kt=U?w.call(String(ie),/^(Symbol\(.*\))_[^)]*$/,"$1"):B.call(ie);return typeof ie=="object"&&!U?p(Kt):Kt}if(ve(ie)){for(var T="<"+v.call(String(ie.nodeName)),N=ie.attributes||[],_e=0;_e<N.length;_e++)T+=" "+N[_e].name+"="+C(Y(N[_e].value),"double",Te);return T+=">",ie.childNodes&&ie.childNodes.length&&(T+="..."),T+="</"+v.call(String(ie.nodeName))+">",T}if(ye(ie)){if(ie.length===0)return"[]";var Ee=Se(ie,Qe);return et&&!D(Ee)?"["+fe(Ee,et)+"]":"[ "+O.call(Ee,", ")+" ]"}if(G(ie)){var xe=Se(ie,Qe);return!("cause"in Error.prototype)&&"cause"in ie&&!oe.call(ie,"cause")?"{ ["+String(ie)+"] "+O.call(E.call("[cause]: "+Qe(ie.cause),xe),", ")+" }":xe.length===0?"["+String(ie)+"]":"{ ["+String(ie)+"] "+O.call(xe,", ")+" }"}if(typeof ie=="object"&&Je){if(J&&typeof ie[J]=="function"&&re)return re(ie,{depth:jt-Ie});if(Je!=="symbol"&&typeof ie.inspect=="function")return ie.inspect()}if(he(ie)){var Me=[];return a&&a.call(ie,function(tt,yt){Me.push(Qe(yt,ie,!0)+" => "+Qe(tt,ie))}),I("Map",o.call(ie),Me,et)}if(q(ie)){var Ke=[];return n&&n.call(ie,function(tt){Ke.push(Qe(tt,ie))}),I("Set",r.call(ie),Ke,et)}if(pe(ie))return _("WeakMap");if(ge(ie))return _("WeakSet");if(be(ie))return _("WeakRef");if(ne(ie))return p(Qe(Number(ie)));if(X(ie))return p(Qe(M.call(ie)));if(V(ie))return p(f.call(ie));if(L(ie))return p(Qe(String(ie)));if(typeof window<"u"&&ie===window)return"{ [object Window] }";if(typeof globalThis<"u"&&ie===globalThis||typeof Tr<"u"&&ie===Tr)return"{ [object globalThis] }";if(!te(ie)&&!we(ie)){var Ye=Se(ie,Qe),Vt=H?H(ie)===Object.prototype:ie instanceof Object||ie.constructor===Object,zt=ie instanceof Object?"":"null prototype",Ht=!Vt&&F&&Object(ie)===ie&&F in ie?g.call(j(ie),8,-1):zt?"Object":"",lr=Vt||typeof ie.constructor!="function"?"":ie.constructor.name?ie.constructor.name+" ":"",Et=lr+(Ht||zt?"["+O.call(E.call([],Ht||[],zt||[]),": ")+"] ":"");return Ye.length===0?Et+"{}":et?Et+"{"+fe(Ye,et)+"}":Et+"{ "+O.call(Ye,", ")+" }"}return String(ie)};function C(z,ie,Ae){var Ie=(Ae.quoteStyle||ie)==="double"?'"':"'";return Ie+z+Ie}function Y(z){return w.call(String(z),/"/g,"&quot;")}function ye(z){return j(z)==="[object Array]"&&(!F||!(typeof z=="object"&&F in z))}function te(z){return j(z)==="[object Date]"&&(!F||!(typeof z=="object"&&F in z))}function we(z){return j(z)==="[object RegExp]"&&(!F||!(typeof z=="object"&&F in z))}function G(z){return j(z)==="[object Error]"&&(!F||!(typeof z=="object"&&F in z))}function L(z){return j(z)==="[object String]"&&(!F||!(typeof z=="object"&&F in z))}function ne(z){return j(z)==="[object Number]"&&(!F||!(typeof z=="object"&&F in z))}function V(z){return j(z)==="[object Boolean]"&&(!F||!(typeof z=="object"&&F in z))}function Q(z){if(U)return z&&typeof z=="object"&&z instanceof Symbol;if(typeof z=="symbol")return!0;if(!z||typeof z!="object"||!B)return!1;try{return B.call(z),!0}catch{}return!1}function X(z){if(!z||typeof z!="object"||!M)return!1;try{return M.call(z),!0}catch{}return!1}var me=Object.prototype.hasOwnProperty||function(z){return z in(this||Tr)};function se(z,ie){return me.call(z,ie)}function j(z){return y.call(z)}function $(z){if(z.name)return z.name;var ie=S.call(b.call(z),/^function\s*([\w$]+)/);return ie?ie[1]:null}function ee(z,ie){if(z.indexOf)return z.indexOf(ie);for(var Ae=0,Ie=z.length;Ae<Ie;Ae++)if(z[Ae]===ie)return Ae;return-1}function he(z){if(!o||!z||typeof z!="object")return!1;try{o.call(z);try{r.call(z)}catch{return!0}return z instanceof Map}catch{}return!1}function pe(z){if(!s||!z||typeof z!="object")return!1;try{s.call(z,s);try{h.call(z,h)}catch{return!0}return z instanceof WeakMap}catch{}return!1}function be(z){if(!m||!z||typeof z!="object")return!1;try{return m.call(z),!0}catch{}return!1}function q(z){if(!r||!z||typeof z!="object")return!1;try{r.call(z);try{o.call(z)}catch{return!0}return z instanceof Set}catch{}return!1}function ge(z){if(!h||!z||typeof z!="object")return!1;try{h.call(z,h);try{s.call(z,s)}catch{return!0}return z instanceof WeakSet}catch{}return!1}function ve(z){return!z||typeof z!="object"?!1:typeof HTMLElement<"u"&&z instanceof HTMLElement?!0:typeof z.nodeName=="string"&&typeof z.getAttribute=="function"}function ae(z,ie){if(z.length>ie.maxStringLength){var Ae=z.length-ie.maxStringLength,Ie="... "+Ae+" more character"+(Ae>1?"s":"");return ae(g.call(z,0,ie.maxStringLength),ie)+Ie}var ke=w.call(w.call(z,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Pe);return C(ke,"single",ie)}function Pe(z){var ie=z.charCodeAt(0),Ae={8:"b",9:"t",10:"n",12:"f",13:"r"}[ie];return Ae?"\\"+Ae:"\\x"+(ie<16?"0":"")+x.call(ie.toString(16))}function p(z){return"Object("+z+")"}function _(z){return z+" { ? }"}function I(z,ie,Ae,Ie){var ke=Ie?fe(Ae,Ie):O.call(Ae,", ");return z+" ("+ie+") {"+ke+"}"}function D(z){for(var ie=0;ie<z.length;ie++)if(ee(z[ie],`
`)>=0)return!1;return!0}function Z(z,ie){var Ae;if(z.indent==="	")Ae="	";else if(typeof z.indent=="number"&&z.indent>0)Ae=O.call(Array(z.indent+1)," ");else return null;return{base:Ae,prev:O.call(Array(ie+1),Ae)}}function fe(z,ie){if(z.length===0)return"";var Ae=`
`+ie.prev+ie.base;return Ae+O.call(z,","+Ae)+`
`+ie.prev}function Se(z,ie){var Ae=ye(z),Ie=[];if(Ae){Ie.length=z.length;for(var ke=0;ke<z.length;ke++)Ie[ke]=se(z,ke)?ie(z[ke],z):""}var Te=typeof k=="function"?k(z):[],Je;if(U){Je={};for(var Xe=0;Xe<Te.length;Xe++)Je["$"+Te[Xe]]=Te[Xe]}for(var De in z)se(z,De)&&(Ae&&String(Number(De))===De&&De<z.length||U&&Je["$"+De]instanceof Symbol||(A.call(/[^\w$]/,De)?Ie.push(ie(De,z)+": "+ie(z[De],z)):Ie.push(De+": "+ie(z[De],z))));if(typeof k=="function")for(var Ze=0;Ze<Te.length;Ze++)oe.call(z,Te[Ze])&&Ie.push("["+ie(Te[Ze])+"]: "+ie(z[Te[Ze]],z));return Ie}return Pr}function hf(){if(eo)return Rr;eo=!0;var u=qt(),t=Yc(),o=ff(),a=sr(),l=u("%WeakMap%",!0),e=u("%Map%",!0),r=t("WeakMap.prototype.get",!0),n=t("WeakMap.prototype.set",!0),i=t("WeakMap.prototype.has",!0),s=t("Map.prototype.get",!0),c=t("Map.prototype.set",!0),h=t("Map.prototype.has",!0),d=function(b,S){for(var g=b,w;(w=g.next)!==null;g=w)if(w.key===S)return g.next=w.next,w.next=b.next,b.next=w,w},m=function(b,S){var g=d(b,S);return g&&g.value},f=function(b,S,g){var w=d(b,S);w?w.value=g:b.next={key:S,next:b.next,value:g}},y=function(b,S){return!!d(b,S)};return Rr=function(){var b,S,g,w={assert:function(x){if(!w.has(x))throw new a("Side channel does not contain "+o(x))},get:function(x){if(l&&x&&(typeof x=="object"||typeof x=="function")){if(b)return r(b,x)}else if(e){if(S)return s(S,x)}else if(g)return m(g,x)},has:function(x){if(l&&x&&(typeof x=="object"||typeof x=="function")){if(b)return i(b,x)}else if(e){if(S)return h(S,x)}else if(g)return y(g,x);return!1},set:function(x,v){l&&x&&(typeof x=="object"||typeof x=="function")?(b||(b=new l),n(b,x,v)):e?(S||(S=new e),c(S,x,v)):(g||(g={key:{},next:null}),f(g,x,v))}};return w},Rr}function vo(){if(to)return Cr;to=!0;var u=String.prototype.replace,t=/%20/g,o={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Cr={default:o.RFC3986,formatters:{RFC1738:function(a){return u.call(a,t,"+")},RFC3986:function(a){return String(a)}},RFC1738:o.RFC1738,RFC3986:o.RFC3986},Cr}function ol(){if(ro)return jr;ro=!0;var u=vo(),t=Object.prototype.hasOwnProperty,o=Array.isArray,a=(function(){for(var b=[],S=0;S<256;++S)b.push("%"+((S<16?"0":"")+S.toString(16)).toUpperCase());return b})(),l=function(b){for(;b.length>1;){var S=b.pop(),g=S.obj[S.prop];if(o(g)){for(var w=[],x=0;x<g.length;++x)typeof g[x]<"u"&&w.push(g[x]);S.obj[S.prop]=w}}},e=function(b,S){for(var g=S&&S.plainObjects?Object.create(null):{},w=0;w<b.length;++w)typeof b[w]<"u"&&(g[w]=b[w]);return g},r=function b(S,g,w){if(!g)return S;if(typeof g!="object"){if(o(S))S.push(g);else if(S&&typeof S=="object")(w&&(w.plainObjects||w.allowPrototypes)||!t.call(Object.prototype,g))&&(S[g]=!0);else return[S,g];return S}if(!S||typeof S!="object")return[S].concat(g);var x=S;return o(S)&&!o(g)&&(x=e(S,w)),o(S)&&o(g)?(g.forEach(function(v,A){if(t.call(S,A)){var E=S[A];E&&typeof E=="object"&&v&&typeof v=="object"?S[A]=b(E,v,w):S.push(v)}else S[A]=v}),S):Object.keys(g).reduce(function(v,A){var E=g[A];return t.call(v,A)?v[A]=b(v[A],E,w):v[A]=E,v},x)},n=function(b,S){return Object.keys(S).reduce(function(g,w){return g[w]=S[w],g},b)},i=function(b,S,g){var w=b.replace(/\+/g," ");if(g==="iso-8859-1")return w.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(w)}catch{return w}},s=1024,c=function(b,S,g,w,x){if(b.length===0)return b;var v=b;if(typeof b=="symbol"?v=Symbol.prototype.toString.call(b):typeof b!="string"&&(v=String(b)),g==="iso-8859-1")return escape(v).replace(/%u[0-9a-f]{4}/gi,function(k){return"%26%23"+parseInt(k.slice(2),16)+"%3B"});for(var A="",E=0;E<v.length;E+=s){for(var O=v.length>=s?v.slice(E,E+s):v,R=[],P=0;P<O.length;++P){var M=O.charCodeAt(P);if(M===45||M===46||M===95||M===126||M>=48&&M<=57||M>=65&&M<=90||M>=97&&M<=122||x===u.RFC1738&&(M===40||M===41)){R[R.length]=O.charAt(P);continue}if(M<128){R[R.length]=a[M];continue}if(M<2048){R[R.length]=a[192|M>>6]+a[128|M&63];continue}if(M<55296||M>=57344){R[R.length]=a[224|M>>12]+a[128|M>>6&63]+a[128|M&63];continue}P+=1,M=65536+((M&1023)<<10|O.charCodeAt(P)&1023),R[R.length]=a[240|M>>18]+a[128|M>>12&63]+a[128|M>>6&63]+a[128|M&63]}A+=R.join("")}return A},h=function(b){for(var S=[{obj:{o:b},prop:"o"}],g=[],w=0;w<S.length;++w)for(var x=S[w],v=x.obj[x.prop],A=Object.keys(v),E=0;E<A.length;++E){var O=A[E],R=v[O];typeof R=="object"&&R!==null&&g.indexOf(R)===-1&&(S.push({obj:v,prop:O}),g.push(R))}return l(S),b},d=function(b){return Object.prototype.toString.call(b)==="[object RegExp]"},m=function(b){return!b||typeof b!="object"?!1:!!(b.constructor&&b.constructor.isBuffer&&b.constructor.isBuffer(b))},f=function(b,S){return[].concat(b,S)},y=function(b,S){if(o(b)){for(var g=[],w=0;w<b.length;w+=1)g.push(S(b[w]));return g}return S(b)};return jr={arrayToObject:e,assign:n,combine:f,compact:h,decode:i,encode:c,isBuffer:m,isRegExp:d,maybeMap:y,merge:r},jr}function pf(){if(no)return Nr;no=!0;var u=hf(),t=ol(),o=vo(),a=Object.prototype.hasOwnProperty,l={brackets:function(y){return y+"[]"},comma:"comma",indices:function(y,b){return y+"["+b+"]"},repeat:function(y){return y}},e=Array.isArray,r=Array.prototype.push,n=function(y,b){r.apply(y,e(b)?b:[b])},i=Date.prototype.toISOString,s=o.default,c={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:t.encode,encodeValuesOnly:!1,format:s,formatter:o.formatters[s],indices:!1,serializeDate:function(y){return i.call(y)},skipNulls:!1,strictNullHandling:!1},h=function(y){return typeof y=="string"||typeof y=="number"||typeof y=="boolean"||typeof y=="symbol"||typeof y=="bigint"},d={},m=function y(b,S,g,w,x,v,A,E,O,R,P,M,k,B,U,F,oe,H){for(var K=b,re=H,W=0,J=!1;(re=re.get(d))!==void 0&&!J;){var C=re.get(b);if(W+=1,typeof C<"u"){if(C===W)throw new RangeError("Cyclic object value");J=!0}typeof re.get(d)>"u"&&(W=0)}if(typeof R=="function"?K=R(S,K):K instanceof Date?K=k(K):g==="comma"&&e(K)&&(K=t.maybeMap(K,function(j){return j instanceof Date?k(j):j})),K===null){if(v)return O&&!F?O(S,c.encoder,oe,"key",B):S;K=""}if(h(K)||t.isBuffer(K)){if(O){var Y=F?S:O(S,c.encoder,oe,"key",B);return[U(Y)+"="+U(O(K,c.encoder,oe,"value",B))]}return[U(S)+"="+U(String(K))]}var ye=[];if(typeof K>"u")return ye;var te;if(g==="comma"&&e(K))F&&O&&(K=t.maybeMap(K,O)),te=[{value:K.length>0?K.join(",")||null:void 0}];else if(e(R))te=R;else{var we=Object.keys(K);te=P?we.sort(P):we}var G=E?S.replace(/\./g,"%2E"):S,L=w&&e(K)&&K.length===1?G+"[]":G;if(x&&e(K)&&K.length===0)return L+"[]";for(var ne=0;ne<te.length;++ne){var V=te[ne],Q=typeof V=="object"&&typeof V.value<"u"?V.value:K[V];if(!(A&&Q===null)){var X=M&&E?V.replace(/\./g,"%2E"):V,me=e(K)?typeof g=="function"?g(L,X):L:L+(M?"."+X:"["+X+"]");H.set(b,W);var se=u();se.set(d,H),n(ye,y(Q,me,g,w,x,v,A,E,g==="comma"&&F&&e(K)?null:O,R,P,M,k,B,U,F,oe,se))}}return ye},f=function(y){if(!y)return c;if(typeof y.allowEmptyArrays<"u"&&typeof y.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof y.encodeDotInKeys<"u"&&typeof y.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(y.encoder!==null&&typeof y.encoder<"u"&&typeof y.encoder!="function")throw new TypeError("Encoder has to be a function.");var b=y.charset||c.charset;if(typeof y.charset<"u"&&y.charset!=="utf-8"&&y.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var S=o.default;if(typeof y.format<"u"){if(!a.call(o.formatters,y.format))throw new TypeError("Unknown format option provided.");S=y.format}var g=o.formatters[S],w=c.filter;(typeof y.filter=="function"||e(y.filter))&&(w=y.filter);var x;if(y.arrayFormat in l?x=y.arrayFormat:"indices"in y?x=y.indices?"indices":"repeat":x=c.arrayFormat,"commaRoundTrip"in y&&typeof y.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var v=typeof y.allowDots>"u"?y.encodeDotInKeys===!0?!0:c.allowDots:!!y.allowDots;return{addQueryPrefix:typeof y.addQueryPrefix=="boolean"?y.addQueryPrefix:c.addQueryPrefix,allowDots:v,allowEmptyArrays:typeof y.allowEmptyArrays=="boolean"?!!y.allowEmptyArrays:c.allowEmptyArrays,arrayFormat:x,charset:b,charsetSentinel:typeof y.charsetSentinel=="boolean"?y.charsetSentinel:c.charsetSentinel,commaRoundTrip:y.commaRoundTrip,delimiter:typeof y.delimiter>"u"?c.delimiter:y.delimiter,encode:typeof y.encode=="boolean"?y.encode:c.encode,encodeDotInKeys:typeof y.encodeDotInKeys=="boolean"?y.encodeDotInKeys:c.encodeDotInKeys,encoder:typeof y.encoder=="function"?y.encoder:c.encoder,encodeValuesOnly:typeof y.encodeValuesOnly=="boolean"?y.encodeValuesOnly:c.encodeValuesOnly,filter:w,format:S,formatter:g,serializeDate:typeof y.serializeDate=="function"?y.serializeDate:c.serializeDate,skipNulls:typeof y.skipNulls=="boolean"?y.skipNulls:c.skipNulls,sort:typeof y.sort=="function"?y.sort:null,strictNullHandling:typeof y.strictNullHandling=="boolean"?y.strictNullHandling:c.strictNullHandling}};return Nr=function(y,b){var S=y,g=f(b),w,x;typeof g.filter=="function"?(x=g.filter,S=x("",S)):e(g.filter)&&(x=g.filter,w=x);var v=[];if(typeof S!="object"||S===null)return"";var A=l[g.arrayFormat],E=A==="comma"&&g.commaRoundTrip;w||(w=Object.keys(S)),g.sort&&w.sort(g.sort);for(var O=u(),R=0;R<w.length;++R){var P=w[R];g.skipNulls&&S[P]===null||n(v,m(S[P],P,A,E,g.allowEmptyArrays,g.strictNullHandling,g.skipNulls,g.encodeDotInKeys,g.encode?g.encoder:null,g.filter,g.sort,g.allowDots,g.serializeDate,g.format,g.formatter,g.encodeValuesOnly,g.charset,O))}var M=v.join(g.delimiter),k=g.addQueryPrefix===!0?"?":"";return g.charsetSentinel&&(g.charset==="iso-8859-1"?k+="utf8=%26%2310003%3B&":k+="utf8=%E2%9C%93&"),M.length>0?k+M:""},Nr}function df(){if(io)return Mr;io=!0;var u=ol(),t=Object.prototype.hasOwnProperty,o=Array.isArray,a={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:u.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},l=function(d){return d.replace(/&#(\d+);/g,function(m,f){return String.fromCharCode(parseInt(f,10))})},e=function(d,m){return d&&typeof d=="string"&&m.comma&&d.indexOf(",")>-1?d.split(","):d},r="utf8=%26%2310003%3B",n="utf8=%E2%9C%93",i=function(d,m){var f={__proto__:null},y=m.ignoreQueryPrefix?d.replace(/^\?/,""):d;y=y.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var b=m.parameterLimit===1/0?void 0:m.parameterLimit,S=y.split(m.delimiter,b),g=-1,w,x=m.charset;if(m.charsetSentinel)for(w=0;w<S.length;++w)S[w].indexOf("utf8=")===0&&(S[w]===n?x="utf-8":S[w]===r&&(x="iso-8859-1"),g=w,w=S.length);for(w=0;w<S.length;++w)if(w!==g){var v=S[w],A=v.indexOf("]="),E=A===-1?v.indexOf("="):A+1,O,R;E===-1?(O=m.decoder(v,a.decoder,x,"key"),R=m.strictNullHandling?null:""):(O=m.decoder(v.slice(0,E),a.decoder,x,"key"),R=u.maybeMap(e(v.slice(E+1),m),function(M){return m.decoder(M,a.decoder,x,"value")})),R&&m.interpretNumericEntities&&x==="iso-8859-1"&&(R=l(R)),v.indexOf("[]=")>-1&&(R=o(R)?[R]:R);var P=t.call(f,O);P&&m.duplicates==="combine"?f[O]=u.combine(f[O],R):(!P||m.duplicates==="last")&&(f[O]=R)}return f},s=function(d,m,f,y){for(var b=y?m:e(m,f),S=d.length-1;S>=0;--S){var g,w=d[S];if(w==="[]"&&f.parseArrays)g=f.allowEmptyArrays&&(b===""||f.strictNullHandling&&b===null)?[]:[].concat(b);else{g=f.plainObjects?Object.create(null):{};var x=w.charAt(0)==="["&&w.charAt(w.length-1)==="]"?w.slice(1,-1):w,v=f.decodeDotInKeys?x.replace(/%2E/g,"."):x,A=parseInt(v,10);!f.parseArrays&&v===""?g={0:b}:!isNaN(A)&&w!==v&&String(A)===v&&A>=0&&f.parseArrays&&A<=f.arrayLimit?(g=[],g[A]=b):v!=="__proto__"&&(g[v]=b)}b=g}return b},c=function(d,m,f,y){if(d){var b=f.allowDots?d.replace(/\.([^.[]+)/g,"[$1]"):d,S=/(\[[^[\]]*])/,g=/(\[[^[\]]*])/g,w=f.depth>0&&S.exec(b),x=w?b.slice(0,w.index):b,v=[];if(x){if(!f.plainObjects&&t.call(Object.prototype,x)&&!f.allowPrototypes)return;v.push(x)}for(var A=0;f.depth>0&&(w=g.exec(b))!==null&&A<f.depth;){if(A+=1,!f.plainObjects&&t.call(Object.prototype,w[1].slice(1,-1))&&!f.allowPrototypes)return;v.push(w[1])}if(w){if(f.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+f.depth+" and strictDepth is true");v.push("["+b.slice(w.index)+"]")}return s(v,m,f,y)}},h=function(d){if(!d)return a;if(typeof d.allowEmptyArrays<"u"&&typeof d.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof d.decodeDotInKeys<"u"&&typeof d.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(d.decoder!==null&&typeof d.decoder<"u"&&typeof d.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof d.charset<"u"&&d.charset!=="utf-8"&&d.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var m=typeof d.charset>"u"?a.charset:d.charset,f=typeof d.duplicates>"u"?a.duplicates:d.duplicates;if(f!=="combine"&&f!=="first"&&f!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var y=typeof d.allowDots>"u"?d.decodeDotInKeys===!0?!0:a.allowDots:!!d.allowDots;return{allowDots:y,allowEmptyArrays:typeof d.allowEmptyArrays=="boolean"?!!d.allowEmptyArrays:a.allowEmptyArrays,allowPrototypes:typeof d.allowPrototypes=="boolean"?d.allowPrototypes:a.allowPrototypes,allowSparse:typeof d.allowSparse=="boolean"?d.allowSparse:a.allowSparse,arrayLimit:typeof d.arrayLimit=="number"?d.arrayLimit:a.arrayLimit,charset:m,charsetSentinel:typeof d.charsetSentinel=="boolean"?d.charsetSentinel:a.charsetSentinel,comma:typeof d.comma=="boolean"?d.comma:a.comma,decodeDotInKeys:typeof d.decodeDotInKeys=="boolean"?d.decodeDotInKeys:a.decodeDotInKeys,decoder:typeof d.decoder=="function"?d.decoder:a.decoder,delimiter:typeof d.delimiter=="string"||u.isRegExp(d.delimiter)?d.delimiter:a.delimiter,depth:typeof d.depth=="number"||d.depth===!1?+d.depth:a.depth,duplicates:f,ignoreQueryPrefix:d.ignoreQueryPrefix===!0,interpretNumericEntities:typeof d.interpretNumericEntities=="boolean"?d.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:typeof d.parameterLimit=="number"?d.parameterLimit:a.parameterLimit,parseArrays:d.parseArrays!==!1,plainObjects:typeof d.plainObjects=="boolean"?d.plainObjects:a.plainObjects,strictDepth:typeof d.strictDepth=="boolean"?!!d.strictDepth:a.strictDepth,strictNullHandling:typeof d.strictNullHandling=="boolean"?d.strictNullHandling:a.strictNullHandling}};return Mr=function(d,m){var f=h(m);if(d===""||d===null||typeof d>"u")return f.plainObjects?Object.create(null):{};for(var y=typeof d=="string"?i(d,f):d,b=f.plainObjects?Object.create(null):{},S=Object.keys(y),g=0;g<S.length;++g){var w=S[g],x=c(w,y[w],f,typeof d=="string");b=u.merge(b,x,f)}return f.allowSparse===!0?b:u.compact(b)},Mr}function gf(){if(oo)return Lr;oo=!0;var u=pf(),t=df(),o=vo();return Lr={formats:o,parse:t,stringify:u},Lr}function yf(){if(so)return wt;so=!0;var u=vt;function t(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,e=["<",">",'"',"`"," ","\r",`
`,"	"],r=["{","}","|","\\","^","`"].concat(e),n=["'"].concat(r),i=["%","/","?",";","#"].concat(n),s=["/","?","#"],c=255,h=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},f={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=gf();function S(v,A,E){if(v&&typeof v=="object"&&v instanceof t)return v;var O=new t;return O.parse(v,A,E),O}t.prototype.parse=function(v,A,E){if(typeof v!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof v);var O=v.indexOf("?"),R=O!==-1&&O<v.indexOf("#")?"?":"#",P=v.split(R),M=/\\/g;P[0]=P[0].replace(M,"/"),v=P.join(R);var k=v;if(k=k.trim(),!E&&v.split("#").length===1){var B=l.exec(k);if(B)return this.path=k,this.href=k,this.pathname=B[1],B[2]?(this.search=B[2],A?this.query=b.parse(this.search.substr(1)):this.query=this.search.substr(1)):A&&(this.search="",this.query={}),this}var U=o.exec(k);if(U){U=U[0];var F=U.toLowerCase();this.protocol=F,k=k.substr(U.length)}if(E||U||k.match(/^\/\/[^@/]+@[^@/]+/)){var oe=k.substr(0,2)==="//";oe&&!(U&&f[U])&&(k=k.substr(2),this.slashes=!0)}if(!f[U]&&(oe||U&&!y[U])){for(var H=-1,K=0;K<s.length;K++){var re=k.indexOf(s[K]);re!==-1&&(H===-1||re<H)&&(H=re)}var W,J;H===-1?J=k.lastIndexOf("@"):J=k.lastIndexOf("@",H),J!==-1&&(W=k.slice(0,J),k=k.slice(J+1),this.auth=decodeURIComponent(W)),H=-1;for(var K=0;K<i.length;K++){var re=k.indexOf(i[K]);re!==-1&&(H===-1||re<H)&&(H=re)}H===-1&&(H=k.length),this.host=k.slice(0,H),k=k.slice(H),this.parseHost(),this.hostname=this.hostname||"";var C=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!C)for(var Y=this.hostname.split(/\./),K=0,ye=Y.length;K<ye;K++){var te=Y[K];if(te&&!te.match(h)){for(var we="",G=0,L=te.length;G<L;G++)te.charCodeAt(G)>127?we+="x":we+=te[G];if(!we.match(h)){var ne=Y.slice(0,K),V=Y.slice(K+1),Q=te.match(d);Q&&(ne.push(Q[1]),V.unshift(Q[2])),V.length&&(k="/"+V.join(".")+k),this.hostname=ne.join(".");break}}}this.hostname.length>c?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=u.toASCII(this.hostname));var X=this.port?":"+this.port:"",me=this.hostname||"";this.host=me+X,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),k[0]!=="/"&&(k="/"+k))}if(!m[F])for(var K=0,ye=n.length;K<ye;K++){var se=n[K];if(k.indexOf(se)!==-1){var j=encodeURIComponent(se);j===se&&(j=escape(se)),k=k.split(se).join(j)}}var $=k.indexOf("#");$!==-1&&(this.hash=k.substr($),k=k.slice(0,$));var ee=k.indexOf("?");if(ee!==-1?(this.search=k.substr(ee),this.query=k.substr(ee+1),A&&(this.query=b.parse(this.query)),k=k.slice(0,ee)):A&&(this.search="",this.query={}),k&&(this.pathname=k),y[F]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var X=this.pathname||"",he=this.search||"";this.path=X+he}return this.href=this.format(),this};function g(v){return typeof v=="string"&&(v=S(v)),v instanceof t?v.format():t.prototype.format.call(v)}t.prototype.format=function(){var v=this.auth||"";v&&(v=encodeURIComponent(v),v=v.replace(/%3A/i,":"),v+="@");var A=this.protocol||"",E=this.pathname||"",O=this.hash||"",R=!1,P="";this.host?R=v+this.host:this.hostname&&(R=v+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(R+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(P=b.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var M=this.search||P&&"?"+P||"";return A&&A.substr(-1)!==":"&&(A+=":"),this.slashes||(!A||y[A])&&R!==!1?(R="//"+(R||""),E&&E.charAt(0)!=="/"&&(E="/"+E)):R||(R=""),O&&O.charAt(0)!=="#"&&(O="#"+O),M&&M.charAt(0)!=="?"&&(M="?"+M),E=E.replace(/[?#]/g,function(k){return encodeURIComponent(k)}),M=M.replace("#","%23"),A+R+E+M+O};function w(v,A){return S(v,!1,!0).resolve(A)}t.prototype.resolve=function(v){return this.resolveObject(S(v,!1,!0)).format()};function x(v,A){return v?S(v,!1,!0).resolveObject(A):A}return t.prototype.resolveObject=function(v){if(typeof v=="string"){var A=new t;A.parse(v,!1,!0),v=A}for(var E=new t,O=Object.keys(this),R=0;R<O.length;R++){var P=O[R];E[P]=this[P]}if(E.hash=v.hash,v.href==="")return E.href=E.format(),E;if(v.slashes&&!v.protocol){for(var M=Object.keys(v),k=0;k<M.length;k++){var B=M[k];B!=="protocol"&&(E[B]=v[B])}return y[E.protocol]&&E.hostname&&!E.pathname&&(E.pathname="/",E.path=E.pathname),E.href=E.format(),E}if(v.protocol&&v.protocol!==E.protocol){if(!y[v.protocol]){for(var U=Object.keys(v),F=0;F<U.length;F++){var oe=U[F];E[oe]=v[oe]}return E.href=E.format(),E}if(E.protocol=v.protocol,!v.host&&!f[v.protocol]){for(var ye=(v.pathname||"").split("/");ye.length&&!(v.host=ye.shift()););v.host||(v.host=""),v.hostname||(v.hostname=""),ye[0]!==""&&ye.unshift(""),ye.length<2&&ye.unshift(""),E.pathname=ye.join("/")}else E.pathname=v.pathname;if(E.search=v.search,E.query=v.query,E.host=v.host||"",E.auth=v.auth,E.hostname=v.hostname||v.host,E.port=v.port,E.pathname||E.search){var H=E.pathname||"",K=E.search||"";E.path=H+K}return E.slashes=E.slashes||v.slashes,E.href=E.format(),E}var re=E.pathname&&E.pathname.charAt(0)==="/",W=v.host||v.pathname&&v.pathname.charAt(0)==="/",J=W||re||E.host&&v.pathname,C=J,Y=E.pathname&&E.pathname.split("/")||[],ye=v.pathname&&v.pathname.split("/")||[],te=E.protocol&&!y[E.protocol];if(te&&(E.hostname="",E.port=null,E.host&&(Y[0]===""?Y[0]=E.host:Y.unshift(E.host)),E.host="",v.protocol&&(v.hostname=null,v.port=null,v.host&&(ye[0]===""?ye[0]=v.host:ye.unshift(v.host)),v.host=null),J=J&&(ye[0]===""||Y[0]==="")),W)E.host=v.host||v.host===""?v.host:E.host,E.hostname=v.hostname||v.hostname===""?v.hostname:E.hostname,E.search=v.search,E.query=v.query,Y=ye;else if(ye.length)Y||(Y=[]),Y.pop(),Y=Y.concat(ye),E.search=v.search,E.query=v.query;else if(v.search!=null){if(te){E.host=Y.shift(),E.hostname=E.host;var we=E.host&&E.host.indexOf("@")>0?E.host.split("@"):!1;we&&(E.auth=we.shift(),E.hostname=we.shift(),E.host=E.hostname)}return E.search=v.search,E.query=v.query,(E.pathname!==null||E.search!==null)&&(E.path=(E.pathname?E.pathname:"")+(E.search?E.search:"")),E.href=E.format(),E}if(!Y.length)return E.pathname=null,E.search?E.path="/"+E.search:E.path=null,E.href=E.format(),E;for(var G=Y.slice(-1)[0],L=(E.host||v.host||Y.length>1)&&(G==="."||G==="..")||G==="",ne=0,V=Y.length;V>=0;V--)G=Y[V],G==="."?Y.splice(V,1):G===".."?(Y.splice(V,1),ne++):ne&&(Y.splice(V,1),ne--);if(!J&&!C)for(;ne--;ne)Y.unshift("..");J&&Y[0]!==""&&(!Y[0]||Y[0].charAt(0)!=="/")&&Y.unshift(""),L&&Y.join("/").substr(-1)!=="/"&&Y.push("");var Q=Y[0]===""||Y[0]&&Y[0].charAt(0)==="/";if(te){E.hostname=Q?"":Y.length?Y.shift():"",E.host=E.hostname;var we=E.host&&E.host.indexOf("@")>0?E.host.split("@"):!1;we&&(E.auth=we.shift(),E.hostname=we.shift(),E.host=E.hostname)}return J=J||E.host&&Y.length,J&&!Q&&Y.unshift(""),Y.length>0?E.pathname=Y.join("/"):(E.pathname=null,E.path=null),(E.pathname!==null||E.search!==null)&&(E.path=(E.pathname?E.pathname:"")+(E.search?E.search:"")),E.auth=v.auth||E.auth,E.slashes=E.slashes||v.slashes,E.href=E.format(),E},t.prototype.parseHost=function(){var v=this.host,A=a.exec(v);A&&(A=A[0],A!==":"&&(this.port=A.substr(1)),v=v.substr(0,v.length-A.length)),v&&(this.hostname=v)},wt.parse=S,wt.resolve=w,wt.resolveObject=x,wt.format=g,wt.Url=t,wt}function sl(u){if(typeof u=="string")u=new URL(u);else if(!(u instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(u.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Wr?mf(u):bf(u)}function mf(u){let t=u.hostname,o=u.pathname;for(let a=0;a<o.length;a++)if(o[a]==="%"){let l=o.codePointAt(a+2)||32;if(o[a+1]==="2"&&l===102||o[a+1]==="5"&&l===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(o=o.replace(vl,"\\"),o=decodeURIComponent(o),t!=="")return`\\\\${t}${o}`;{let a=o.codePointAt(1)|32,l=o[2];if(a<ml||a>bl||l!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return o.slice(1)}}function bf(u){if(u.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let t=u.pathname;for(let o=0;o<t.length;o++)if(t[o]==="%"){let a=t.codePointAt(o+2)||32;if(t[o+1]==="2"&&a===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(t)}function al(u){let t=Xi.resolve(u),o=u.charCodeAt(u.length-1);(o===yl||Wr&&o===gl)&&t[t.length-1]!==Xi.sep&&(t+="/");let a=new URL("file://");return t.includes("%")&&(t=t.replace(wl,"%25")),!Wr&&t.includes("\\")&&(t=t.replace(_l,"%5C")),t.includes(`
`)&&(t=t.replace(Sl,"%0A")),t.includes("\r")&&(t=t.replace(El,"%0D")),t.includes("	")&&(t=t.replace(xl,"%09")),a.pathname=t,a}var ll,Pr,Zi,Tr,Rr,eo,Cr,to,jr,ro,Nr,no,Mr,io,Lr,oo,wt,so,qe,Ds,ul,cl,fl,hl,pl,dl,gl,yl,ml,bl,Wr,vl,wl,_l,Sl,El,xl,vf=Ge(()=>{le(),ce(),ue(),Mc(),Jc(),cf(),nl(),ll=Object.freeze(Object.create(null)),Pr={},Zi=!1,Tr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Rr={},eo=!1,Cr={},to=!1,jr={},ro=!1,Nr={},no=!1,Mr={},io=!1,Lr={},oo=!1,wt={},so=!1,qe=yf(),qe.parse,qe.resolve,qe.resolveObject,qe.format,qe.Url,Ds=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,qe.URL=typeof URL<"u"?URL:null,qe.pathToFileURL=al,qe.fileURLToPath=sl,ul=qe.Url,cl=qe.format,fl=qe.resolve,hl=qe.resolveObject,pl=qe.parse,dl=qe.URL,gl=92,yl=47,ml=97,bl=122,Wr=Ds==="win32",vl=/\//g,wl=/%/g,_l=/\\/g,Sl=/\n/g,El=/\r/g,xl=/\t/g}),wf=de((u,t)=>{le(),ce(),ue(),t.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),wo=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"__esModule",{value:!0}),u.BufferedDuplex=void 0,u.writev=a;var t=Ct(),o=(Be(),Re(Ue));function a(e,r){let n=new Array(e.length);for(let i=0;i<e.length;i++)typeof e[i].chunk=="string"?n[i]=o.Buffer.from(e[i].chunk,"utf8"):n[i]=e[i].chunk;this._write(o.Buffer.concat(n),"binary",r)}var l=class extends t.Duplex{socket;proxy;isSocketOpen;writeQueue;constructor(e,r,n){super({objectMode:!0}),this.proxy=r,this.socket=n,this.writeQueue=[],e.objectMode||(this._writev=a.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",i=>{!this.destroyed&&this.readable&&this.push(i)})}_read(e){this.proxy.read(e)}_write(e,r,n){this.isSocketOpen?this.writeToProxy(e,r,n):this.writeQueue.push({chunk:e,encoding:r,cb:n})}_final(e){this.writeQueue=[],this.proxy.end(e)}_destroy(e,r){this.writeQueue=[],this.proxy.destroy(),r(e)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(e,r,n){this.proxy.write(e,r)===!1?this.proxy.once("drain",n):n()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:e,encoding:r,cb:n}=this.writeQueue.shift();this.writeToProxy(e,r,n)}}};u.BufferedDuplex=l}),fr=de(u=>{le(),ce(),ue();var t=u&&u.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(u,"__esModule",{value:!0}),u.streamBuilder=u.browserStreamBuilder=void 0;var o=(Be(),Re(Ue)),a=t(wf()),l=t(ht()),e=Ct(),r=t(Gr()),n=wo(),i=(0,l.default)("mqttjs:ws"),s=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function c(S,g){let w=`${S.protocol}://${S.hostname}:${S.port}${S.path}`;return typeof S.transformWsUrl=="function"&&(w=S.transformWsUrl(w,S,g)),w}function h(S){let g=S;return S.port||(S.protocol==="wss"?g.port=443:g.port=80),S.path||(g.path="/"),S.wsOptions||(g.wsOptions={}),!r.default&&!S.forceNativeWebSocket&&S.protocol==="wss"&&s.forEach(w=>{Object.prototype.hasOwnProperty.call(S,w)&&!Object.prototype.hasOwnProperty.call(S.wsOptions,w)&&(g.wsOptions[w]=S[w])}),g}function d(S){let g=h(S);if(g.hostname||(g.hostname=g.host),!g.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let w=new URL(document.URL);g.hostname=w.hostname,g.port||(g.port=Number(w.port))}return g.objectMode===void 0&&(g.objectMode=!(g.binary===!0||g.binary===void 0)),g}function m(S,g,w){i("createWebSocket"),i(`protocol: ${w.protocolId} ${w.protocolVersion}`);let x=w.protocolId==="MQIsdp"&&w.protocolVersion===3?"mqttv3.1":"mqtt";i(`creating new Websocket for url: ${g} and protocol: ${x}`);let v;return w.createWebsocket?v=w.createWebsocket(g,[x],w):v=new a.default(g,[x],w.wsOptions),v}function f(S,g){let w=g.protocolId==="MQIsdp"&&g.protocolVersion===3?"mqttv3.1":"mqtt",x=c(g,S),v;return g.createWebsocket?v=g.createWebsocket(x,[w],g):v=new WebSocket(x,[w]),v.binaryType="arraybuffer",v}var y=(S,g)=>{i("streamBuilder");let w=h(g);w.hostname=w.hostname||w.host||"localhost";let x=c(w,S),v=m(S,x,w),A=a.default.createWebSocketStream(v,w.wsOptions);return A.url=x,v.on("close",()=>{A.destroy()}),A};u.streamBuilder=y;var b=(S,g)=>{i("browserStreamBuilder");let w,x=d(g).browserBufferSize||1024*512,v=g.browserBufferTimeout||1e3,A=!g.objectMode,E=f(S,g),O=P(g,F,oe);g.objectMode||(O._writev=n.writev.bind(O)),O.on("close",()=>{E.close()});let R=typeof E.addEventListener<"u";E.readyState===E.OPEN?(w=O,w.socket=E):(w=new n.BufferedDuplex(g,O,E),R?E.addEventListener("open",M):E.onopen=M),R?(E.addEventListener("close",k),E.addEventListener("error",B),E.addEventListener("message",U)):(E.onclose=k,E.onerror=B,E.onmessage=U);function P(H,K,re){let W=new e.Transform({objectMode:H.objectMode});return W._write=K,W._flush=re,W}function M(){i("WebSocket onOpen"),w instanceof n.BufferedDuplex&&w.socketReady()}function k(H){i("WebSocket onClose",H),w.end(),w.destroy()}function B(H){i("WebSocket onError",H);let K=new Error("WebSocket error");K.event=H,w.destroy(K)}async function U(H){if(!O||!O.readable||!O.writable)return;let{data:K}=H;K instanceof ArrayBuffer?K=o.Buffer.from(K):K instanceof Blob?K=o.Buffer.from(await new Response(K).arrayBuffer()):K=o.Buffer.from(K,"utf8"),O.push(K)}function F(H,K,re){if(E.bufferedAmount>x){setTimeout(F,v,H,K,re);return}A&&typeof H=="string"&&(H=o.Buffer.from(H,"utf8"));try{E.send(H)}catch(W){return re(W)}re()}function oe(H){E.close(),H()}return w};u.browserStreamBuilder=b}),_o={};Dt(_o,{Server:()=>je,Socket:()=>je,Stream:()=>je,_createServerHandle:()=>je,_normalizeArgs:()=>je,_setSimultaneousAccepts:()=>je,connect:()=>je,createConnection:()=>je,createServer:()=>je,default:()=>Al,isIP:()=>je,isIPv4:()=>je,isIPv6:()=>je});function je(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var Al,Il=Ge(()=>{le(),ce(),ue(),Al={_createServerHandle:je,_normalizeArgs:je,_setSimultaneousAccepts:je,connect:je,createConnection:je,createServer:je,isIP:je,isIPv4:je,isIPv6:je,Server:je,Socket:je,Stream:je}}),Ol=de((u,t)=>{le(),ce(),ue(),t.exports={}}),Ws=de(u=>{le(),ce(),ue();var t=u&&u.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(u,"__esModule",{value:!0});var o=t((Il(),Re(_o))),a=t(ht()),l=t(Ol()),e=(0,a.default)("mqttjs:tcp"),r=(n,i)=>{if(i.port=i.port||1883,i.hostname=i.hostname||i.host||"localhost",i.socksProxy)return(0,l.default)(i.hostname,i.port,i.socksProxy,{timeout:i.socksTimeout});let{port:s,path:c}=i,h=i.hostname;return e("port %d and host %s",s,h),o.default.createConnection({port:s,host:h,path:c})};u.default=r}),kl={};Dt(kl,{default:()=>Pl});var Pl,_f=Ge(()=>{le(),ce(),ue(),Pl={}}),$s=de(u=>{le(),ce(),ue();var t=u&&u.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(u,"__esModule",{value:!0});var o=(_f(),Re(kl)),a=t((Il(),Re(_o))),l=t(ht()),e=t(Ol()),r=(0,l.default)("mqttjs:tls");function n(s){let{host:c,port:h,socksProxy:d,...m}=s;if(d!==void 0){let f=(0,e.default)(c,h,d,{timeout:s.socksTimeout});return(0,o.connect)({...m,socket:f})}return(0,o.connect)(s)}var i=(s,c)=>{c.port=c.port||8883,c.host=c.hostname||c.host||"localhost",a.default.isIP(c.host)===0&&(c.servername=c.host),c.rejectUnauthorized=c.rejectUnauthorized!==!1,delete c.path,r("port %d host %s rejectUnauthorized %b",c.port,c.host,c.rejectUnauthorized);let h=n(c);h.on("secureConnect",()=>{c.rejectUnauthorized&&!h.authorized?h.emit("error",new Error("TLS not authorized")):h.removeListener("error",d)});function d(m){c.rejectUnauthorized&&s.emit("error",m),h.end()}return h.on("error",d),h};u.default=i}),qs=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"__esModule",{value:!0});var t=(Be(),Re(Ue)),o=Ct(),a=wo(),l,e,r;function n(){let d=new o.Transform;return d._write=(m,f,y)=>{l.send({data:m.buffer,success(){y()},fail(b){y(new Error(b))}})},d._flush=m=>{l.close({success(){m()}})},d}function i(d){d.hostname||(d.hostname="localhost"),d.path||(d.path="/"),d.wsOptions||(d.wsOptions={})}function s(d,m){let f=d.protocol==="wxs"?"wss":"ws",y=`${f}://${d.hostname}${d.path}`;return d.port&&d.port!==80&&d.port!==443&&(y=`${f}://${d.hostname}:${d.port}${d.path}`),typeof d.transformWsUrl=="function"&&(y=d.transformWsUrl(y,d,m)),y}function c(){l.onOpen(()=>{r.socketReady()}),l.onMessage(d=>{let{data:m}=d;m instanceof ArrayBuffer?m=t.Buffer.from(m):m=t.Buffer.from(m,"utf8"),e.push(m)}),l.onClose(()=>{r.emit("close"),r.end(),r.destroy()}),l.onError(d=>{let m=new Error(d.errMsg);r.destroy(m)})}var h=(d,m)=>{if(m.hostname=m.hostname||m.host,!m.hostname)throw new Error("Could not determine host. Specify host manually.");let f=m.protocolId==="MQIsdp"&&m.protocolVersion===3?"mqttv3.1":"mqtt";i(m);let y=s(m,d);l=wx.connectSocket({url:y,protocols:[f]}),e=n(),r=new a.BufferedDuplex(m,e,l),r._destroy=(S,g)=>{l.close({success(){g&&g(S)}})};let b=r.destroy;return r.destroy=(S,g)=>(r.destroy=b,setTimeout(()=>{l.close({fail(){r._destroy(S,g)}})},0),r),c(),r};u.default=h}),Ks=de(u=>{le(),ce(),ue(),Object.defineProperty(u,"__esModule",{value:!0});var t=(Be(),Re(Ue)),o=Ct(),a=wo(),l,e,r,n=!1;function i(){let m=new o.Transform;return m._write=(f,y,b)=>{l.sendSocketMessage({data:f.buffer,success(){b()},fail(){b(new Error)}})},m._flush=f=>{l.closeSocket({success(){f()}})},m}function s(m){m.hostname||(m.hostname="localhost"),m.path||(m.path="/"),m.wsOptions||(m.wsOptions={})}function c(m,f){let y=m.protocol==="alis"?"wss":"ws",b=`${y}://${m.hostname}${m.path}`;return m.port&&m.port!==80&&m.port!==443&&(b=`${y}://${m.hostname}:${m.port}${m.path}`),typeof m.transformWsUrl=="function"&&(b=m.transformWsUrl(b,m,f)),b}function h(){n||(n=!0,l.onSocketOpen(()=>{r.socketReady()}),l.onSocketMessage(m=>{if(typeof m.data=="string"){let f=t.Buffer.from(m.data,"base64");e.push(f)}else{let f=new FileReader;f.addEventListener("load",()=>{if(f.result instanceof ArrayBuffer){e.push(t.Buffer.from(f.result));return}e.push(t.Buffer.from(f.result,"utf-8"))}),f.readAsArrayBuffer(m.data)}}),l.onSocketClose(()=>{r.end(),r.destroy()}),l.onSocketError(m=>{r.destroy(m)}))}var d=(m,f)=>{if(f.hostname=f.hostname||f.host,!f.hostname)throw new Error("Could not determine host. Specify host manually.");let y=f.protocolId==="MQIsdp"&&f.protocolVersion===3?"mqttv3.1":"mqtt";s(f);let b=c(f,m);return l=f.my,l.connectSocket({url:b,protocols:y}),e=i(),r=new a.BufferedDuplex(f,e,l),h(),r};u.default=d}),Sf=de(u=>{le(),ce(),ue();var t=u&&u.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(u,"__esModule",{value:!0}),u.connectAsync=c;var o=t(ht()),a=t((vf(),Re(il))),l=t(vi()),e=t(Gr());typeof Ce?.nextTick!="function"&&(Ce.nextTick=setImmediate);var r=(0,o.default)("mqttjs"),n=null;function i(h){let d;if(h.auth)if(d=h.auth.match(/^(.+):(.+)$/),d){let[,m,f]=d;h.username=m,h.password=f}else h.username=h.auth}function s(h,d){if(r("connecting to an MQTT broker..."),typeof h=="object"&&!d&&(d=h,h=""),d=d||{},h&&typeof h=="string"){let y=a.default.parse(h,!0),b={};if(y.port!=null&&(b.port=Number(y.port)),b.host=y.hostname,b.query=y.query,b.auth=y.auth,b.protocol=y.protocol,b.path=y.path,d={...b,...d},!d.protocol)throw new Error("Missing protocol");d.protocol=d.protocol.replace(/:$/,"")}if(d.unixSocket=d.unixSocket||d.protocol?.includes("+unix"),d.unixSocket?d.protocol=d.protocol.replace("+unix",""):!d.protocol?.startsWith("ws")&&!d.protocol?.startsWith("wx")&&delete d.path,i(d),d.query&&typeof d.query.clientId=="string"&&(d.clientId=d.query.clientId),e.default||d.unixSocket?d.socksProxy=void 0:d.socksProxy===void 0&&typeof Ce<"u"&&(d.socksProxy=Ce.env.MQTTJS_SOCKS_PROXY),d.cert&&d.key)if(d.protocol){if(["mqtts","wss","wxs","alis"].indexOf(d.protocol)===-1)switch(d.protocol){case"mqtt":d.protocol="mqtts";break;case"ws":d.protocol="wss";break;case"wx":d.protocol="wxs";break;case"ali":d.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${d.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(n||(n={},!e.default&&!d.forceNativeWebSocket?(n.ws=fr().streamBuilder,n.wss=fr().streamBuilder,n.mqtt=Ws().default,n.tcp=Ws().default,n.ssl=$s().default,n.tls=n.ssl,n.mqtts=$s().default):(n.ws=fr().browserStreamBuilder,n.wss=fr().browserStreamBuilder,n.wx=qs().default,n.wxs=qs().default,n.ali=Ks().default,n.alis=Ks().default)),!n[d.protocol]){let y=["mqtts","wss"].indexOf(d.protocol)!==-1;d.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((b,S)=>y&&S%2===0?!1:typeof n[b]=="function")[0]}if(d.clean===!1&&!d.clientId)throw new Error("Missing clientId for unclean clients");d.protocol&&(d.defaultProtocol=d.protocol);function m(y){return d.servers&&((!y._reconnectCount||y._reconnectCount===d.servers.length)&&(y._reconnectCount=0),d.host=d.servers[y._reconnectCount].host,d.port=d.servers[y._reconnectCount].port,d.protocol=d.servers[y._reconnectCount].protocol?d.servers[y._reconnectCount].protocol:d.defaultProtocol,d.hostname=d.host,y._reconnectCount++),r("calling streambuilder for",d.protocol),n[d.protocol](y,d)}let f=new l.default(m,d);return f.on("error",()=>{}),f}function c(h,d,m=!0){return new Promise((f,y)=>{let b=s(h,d),S={connect:w=>{g(),f(b)},end:()=>{g(),f(b)},error:w=>{g(),b.end(),y(w)}};m===!1&&(S.close=()=>{S.error(new Error("Couldn't connect to server"))});function g(){Object.keys(S).forEach(w=>{b.off(w,S[w])})}Object.keys(S).forEach(w=>{b.on(w,S[w])})})}u.default=s}),Vs=de(u=>{le(),ce(),ue();var t=u&&u.__createBinding||(Object.create?function(m,f,y,b){b===void 0&&(b=y);var S=Object.getOwnPropertyDescriptor(f,y);(!S||("get"in S?!f.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return f[y]}}),Object.defineProperty(m,b,S)}:function(m,f,y,b){b===void 0&&(b=y),m[b]=f[y]}),o=u&&u.__setModuleDefault||(Object.create?function(m,f){Object.defineProperty(m,"default",{enumerable:!0,value:f})}:function(m,f){m.default=f}),a=u&&u.__importStar||(function(){var m=function(f){return m=Object.getOwnPropertyNames||function(y){var b=[];for(var S in y)Object.prototype.hasOwnProperty.call(y,S)&&(b[b.length]=S);return b},m(f)};return function(f){if(f&&f.__esModule)return f;var y={};if(f!=null)for(var b=m(f),S=0;S<b.length;S++)b[S]!=="default"&&t(y,f,b[S]);return o(y,f),y}})(),l=u&&u.__exportStar||function(m,f){for(var y in m)y!=="default"&&!Object.prototype.hasOwnProperty.call(f,y)&&t(f,m,y)},e=u&&u.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(u,"__esModule",{value:!0}),u.ReasonCodes=u.KeepaliveManager=u.UniqueMessageIdProvider=u.DefaultMessageIdProvider=u.Store=u.MqttClient=u.connectAsync=u.connect=u.Client=void 0;var r=e(vi());u.MqttClient=r.default;var n=e(Va());u.DefaultMessageIdProvider=n.default;var i=e(jc());u.UniqueMessageIdProvider=i.default;var s=e(ka());u.Store=s.default;var c=a(Sf());u.connect=c.default,Object.defineProperty(u,"connectAsync",{enumerable:!0,get:function(){return c.connectAsync}});var h=e(Xa());u.KeepaliveManager=h.default,u.Client=r.default,l(vi(),u),l($t(),u),l(Oa(),u);var d=zr();Object.defineProperty(u,"ReasonCodes",{enumerable:!0,get:function(){return d.ReasonCodes}})}),Ef=de(u=>{le(),ce(),ue();var t=u&&u.__createBinding||(Object.create?function(r,n,i,s){s===void 0&&(s=i);var c=Object.getOwnPropertyDescriptor(n,i);(!c||("get"in c?!n.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(r,s,c)}:function(r,n,i,s){s===void 0&&(s=i),r[s]=n[i]}),o=u&&u.__setModuleDefault||(Object.create?function(r,n){Object.defineProperty(r,"default",{enumerable:!0,value:n})}:function(r,n){r.default=n}),a=u&&u.__importStar||(function(){var r=function(n){return r=Object.getOwnPropertyNames||function(i){var s=[];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(s[s.length]=c);return s},r(n)};return function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var s=r(n),c=0;c<s.length;c++)s[c]!=="default"&&t(i,n,s[c]);return o(i,n),i}})(),l=u&&u.__exportStar||function(r,n){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(n,i)&&t(n,r,i)};Object.defineProperty(u,"__esModule",{value:!0});var e=a(Vs());u.default=e,l(Vs(),u)});const xf=Ef();function nn(u){return{...u,info:{id:u.info.id,name:u.info.name,url:u.info.url,discoveryTopic:u.info.discoveryTopic,responseDiscoveryTopic:u.info.responseDiscoveryTopic,username:u.info.username}}}const Tl={connectionData:null,setConnectionData(){},mqttConnect(){},mqttDisconnect(){}},Af=Le.createContext(Tl);function Uf({children:u}){const{t}=gu(),[o,a]=Le.useState(Tl.connectionData),l=Le.useCallback(async(r,n)=>{o&&await o.client.endAsync();const i=await xf.connect(r.url,{username:r.username||void 0,password:n||void 0,reconnectPeriod:1e3});a(()=>({client:i,isConnected:!1,info:{id:r.id,name:r.name,url:r.url,discoveryTopic:r.discoveryTopic,responseDiscoveryTopic:r.responseDiscoveryTopic,username:r.username}}))},[o]),e=Le.useCallback(async()=>{o&&await o.client.endAsync(),a(()=>null)},[o]);return Le.useEffect(()=>{const r=()=>{console.log("mqtt-context: connected"),Qr(t("connected"),{indicator:Mt.jsx(Yr,{}),variant:"success"}),a(c=>(console.log(c),c?{...nn(c),isConnected:!0}:null))},n=()=>{console.log("mqtt-context: reconnect"),a(c=>c?{...nn(c),isConnected:!1}:null)},i=()=>{console.log("mqtt-context: disconnect"),Qr(t("disconnected"),{indicator:Mt.jsx(Yr,{}),variant:"danger"}),a(c=>c?{...nn(c),isConnected:!1}:null)},s=()=>{console.log("mqtt-context: error"),Qr(t("error"),{indicator:Mt.jsx(Yr,{}),variant:"danger"}),a(c=>(c&&c.client.end(!0),null))};return o&&(o.client.on("connect",r),o.client.on("reconnect",n),o.client.on("disconnect",i),o.client.on("error",s)),()=>{o&&(o.client.removeListener("connect",r),o.client.removeListener("reconnect",n),o.client.removeListener("disconnect",i),o.client.removeListener("error",s))}},[o,t]),Mt.jsx(Mt.Fragment,{children:Mt.jsx(Af.Provider,{value:{connectionData:o,setConnectionData:a,mqttConnect:l,mqttDisconnect:e},children:u})})}var If=(u=>(u.INT="INT",u.FLOAT="FLOAT",u.DOUBLE="DOUBLE",u.BOOL="BOOL",u.STRING="STRING",u.ENUM="ENUM",u))(If||{}),Rl=(u=>(u.REQUEST="REQUEST",u.RESPONSE="RESPONSE",u))(Rl||{}),Of=(u=>(u.OK="OK",u.ERROR="ERROR",u))(Of||{});const Fe=[];for(let u=0;u<256;++u)Fe.push((u+256).toString(16).slice(1));function kf(u,t=0){return(Fe[u[t+0]]+Fe[u[t+1]]+Fe[u[t+2]]+Fe[u[t+3]]+"-"+Fe[u[t+4]]+Fe[u[t+5]]+"-"+Fe[u[t+6]]+Fe[u[t+7]]+"-"+Fe[u[t+8]]+Fe[u[t+9]]+"-"+Fe[u[t+10]]+Fe[u[t+11]]+Fe[u[t+12]]+Fe[u[t+13]]+Fe[u[t+14]]+Fe[u[t+15]]).toLowerCase()}let on;const Pf=new Uint8Array(16);function Tf(){if(!on){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");on=crypto.getRandomValues.bind(crypto)}return on(Pf)}const Rf=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),zs={randomUUID:Rf};function Cf(u,t,o){u=u||{};const a=u.random??u.rng?.()??Tf();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,kf(a)}function jf(u,t,o){return zs.randomUUID&&!u?zs.randomUUID():Cf(u)}function Bf({client:u,requestTopic:t,responseTopic:o,action:a,parameters:l,timeoutMs:e=5e3}){return new Promise((r,n)=>{const i=jf();let s=!1;const c=()=>{s||(s=!0,clearTimeout(d),u.removeListener("message",h),u.unsubscribe(o))},h=(m,f)=>{try{const y=JSON.parse(f.toString());if(y.requestId!==i)return;c(),y.status==="ERROR"?n(y):r(y)}catch(y){c(),n(y)}},d=setTimeout(()=>{c(),n(new Error(`MQTT request timeout (${e}ms)`))},e);u.on("message",h),u.subscribe(o,m=>{if(m){c(),n(m);return}u.publish(t,JSON.stringify({requestId:i,type:Rl.REQUEST,action:a,parameters:l}))})})}export{Af as M,Of as R,If as V,Lf as a,Uf as b,Rl as c,He as i,Bf as m,gu as u,jf as v};
